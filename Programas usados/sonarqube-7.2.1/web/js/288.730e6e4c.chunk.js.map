{"version":3,"sources":["webpack:///./src/main/js/apps/organizations/components/OrganizationAdminContainer.tsx","webpack:///./src/main/js/app/utils/handleRequiredAuthorization.js"],"names":["OrganizationAdmin","_super","_this","apply","this","arguments","isOrganizationAdmin","props","organization","canAdmin","checkPermissions","Object","_app_utils_handleRequiredAuthorization__WEBPACK_IMPORTED_MODULE_3__","__extends","prototype","componentDidMount","componentDidUpdate","render","react__WEBPACK_IMPORTED_MODULE_0__","children","location","__webpack_exports__","react_redux__WEBPACK_IMPORTED_MODULE_1__","state","ownProps","_store_rootReducer__WEBPACK_IMPORTED_MODULE_2__","params","organizationKey","store","_getStore__WEBPACK_IMPORTED_MODULE_0__","history","_getHistory__WEBPACK_IMPORTED_MODULE_1__","returnTo","window","pathname","search","hash","dispatch","_store_appState_duck__WEBPACK_IMPORTED_MODULE_2__","replace","query","return_to"],"mappings":"gdAoCAA,EAAA,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAAAD,YASEF,EAAAI,oBAAsB,WAAM,OAAAJ,EAAKK,MAAMC,cAAgBN,EAAKK,MAAMC,aAAtCC,UAE5BP,EAAAQ,iBAAmB,WACZR,EAAKI,uBACRK,OAAAC,EAAA,EAAAD,MAaN,OA1BuCE,EAAAb,EAAAC,GACrCD,EAAAc,UAAAC,kBAAA,WACEX,KAAKM,oBAGPV,EAAAc,UAAAE,mBAAA,WACEZ,KAAKM,oBAWPV,EAAAc,UAAAG,OAAA,WACE,OAAKb,KAAKE,sBAGHY,EAAA,aAAmBd,KAAKG,MAAMY,UACnCC,SAAUhB,KAAKG,MAAMa,SACrBZ,aAAcJ,KAAKG,MAAMC,eAJlB,MAObR,EA1BA,CAAuCkB,EAAA,eAgCvCG,EAAA,QAAeV,OAAAW,EAAA,QAAAX,CAJS,SAACY,EAAYC,GAAuB,OAC1DhB,aAAcG,OAAAc,EAAA,qBAAAd,CAAqBY,EAAOC,EAASE,OAAOC,mBAG5D,CAAoE3B,mEC5CpEqB,EAAA,aACE,IAAMO,EAAQjB,OAAAkB,EAAA,QAAAlB,GACRmB,EAAUnB,OAAAoB,EAAA,EAAApB,GAEVqB,EAAWC,OAAOb,SAASc,SAAWD,OAAOb,SAASe,OAASF,OAAOb,SAASgB,KAErFR,EAAMS,SAAS1B,OAAA2B,EAAA,EAAA3B,IACfmB,EAAQS,SACNL,SAAU,gBACVM,OAASC,UAAWT","file":"js/288.730e6e4c.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouterState } from 'react-router';\nimport { getOrganizationByKey } from '../../../store/rootReducer';\nimport handleRequiredAuthorization from '../../../app/utils/handleRequiredAuthorization';\nimport { Organization } from '../../../app/types';\n\ninterface StateToProps {\n  organization?: Organization;\n}\n\ninterface OwnProps extends RouterState {\n  children: JSX.Element;\n}\n\ninterface Props extends StateToProps, Pick<OwnProps, 'children' | 'location'> {}\n\nexport class OrganizationAdmin extends React.PureComponent<Props> {\n  componentDidMount() {\n    this.checkPermissions();\n  }\n\n  componentDidUpdate() {\n    this.checkPermissions();\n  }\n\n  isOrganizationAdmin = () => this.props.organization && this.props.organization.canAdmin;\n\n  checkPermissions = () => {\n    if (!this.isOrganizationAdmin()) {\n      handleRequiredAuthorization();\n    }\n  };\n\n  render() {\n    if (!this.isOrganizationAdmin()) {\n      return null;\n    }\n    return React.cloneElement(this.props.children, {\n      location: this.props.location,\n      organization: this.props.organization\n    });\n  }\n}\n\nconst mapStateToProps = (state: any, ownProps: OwnProps) => ({\n  organization: getOrganizationByKey(state, ownProps.params.organizationKey)\n});\n\nexport default connect<StateToProps, {}, OwnProps>(mapStateToProps)(OrganizationAdmin);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport getStore from './getStore';\nimport getHistory from './getHistory';\nimport { requireAuthorization } from '../../store/appState/duck';\n\nexport default () => {\n  const store = getStore();\n  const history = getHistory();\n\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n\n  store.dispatch(requireAuthorization());\n  history.replace({\n    pathname: '/sessions/new',\n    query: { return_to: returnTo }\n  });\n};\n"],"sourceRoot":""}