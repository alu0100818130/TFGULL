{"version":3,"sources":["webpack:///./src/main/js/components/charts/BarChart.css","webpack:///./src/main/js/components/charts/BarChart.css?f378","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/icons-components/StatusIcon.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/icons-components/ListIcon.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/charts/Histogram.tsx","webpack:///./src/main/js/components/charts/LanguageDistribution.tsx","webpack:///./src/main/js/components/charts/LanguageDistributionContainer.tsx","webpack:///./src/main/js/components/charts/Histogram.css","webpack:///./src/main/js/components/charts/Histogram.css?9e83","webpack:///./src/main/js/components/icons-components/HistoryIcon.tsx","webpack:///./src/main/js/components/icons-components/EllipsisIcon.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.js","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.js","webpack:///./src/main/js/components/issue/components/IssueChangelog.js","webpack:///./src/main/js/components/issue/components/IssueMessage.js","webpack:///./src/main/js/components/common/SelectListItem.js","webpack:///./src/main/js/components/common/SelectList.js","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.js","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.js","webpack:///./src/main/js/components/issue/components/IssueTitleBar.js","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.js","webpack:///./src/main/js/components/issue/components/IssueAssign.js","webpack:///./src/main/js/components/issue/actions.js","webpack:///./src/main/js/components/issue/popups/CommentPopup.js","webpack:///./src/main/js/components/issue/components/IssueCommentAction.js","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.js","webpack:///./src/main/js/components/issue/components/IssueSeverity.js","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.js","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.js","webpack:///./src/main/js/components/issue/components/IssueTransition.js","webpack:///./src/main/js/components/issue/popups/SetTypePopup.js","webpack:///./src/main/js/components/issue/components/IssueType.js","webpack:///./src/main/js/components/issue/components/IssueActionsBar.js","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.js","webpack:///./src/main/js/components/issue/components/IssueCommentLine.js","webpack:///./src/main/js/components/issue/IssueView.js","webpack:///./src/main/js/components/issue/Issue.js","webpack:///./src/main/js/components/charts/ColorRatingsLegend.tsx","webpack:///./src/main/js/components/charts/BubbleChart.tsx","webpack:///./src/main/js/components/charts/ColorBoxLegend.css?2ae6","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/icons-components/FilterIcon.tsx","webpack:///./src/main/js/components/charts/BubbleChart.css","webpack:///./src/main/js/components/charts/BubbleChart.css?695a","webpack:///./src/main/js/components/charts/ColorBoxLegend.css","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./src/main/js/components/SourceViewer/styles.css?b9b0","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/common/LocationMessage.css?478d","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/components/issue/Issue.css?0fe5","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationIndex.css?ad8e","webpack:///./src/main/js/apps/component-measures/style.css","webpack:///./src/main/js/apps/component-measures/style.css?5cd5","webpack:///./src/main/js/components/charts/TreeMap.css","webpack:///./src/main/js/components/charts/TreeMap.css?bc33","webpack:///./src/main/js/components/charts/ColorGradientLegend.css","webpack:///./src/main/js/components/charts/ColorGradientLegend.css?3255","webpack:///./src/main/js/apps/component-measures/components/Breadcrumb.js","webpack:///./src/main/js/apps/component-measures/components/Breadcrumbs.js","webpack:///./src/main/js/apps/component-measures/components/MeasureFavoriteContainer.js","webpack:///./src/main/js/apps/component-measures/components/LeakPeriodLegend.js","webpack:///./src/main/js/apps/component-measures/components/MeasureHeader.js","webpack:///./src/main/js/components/icons-components/TreeIcon.tsx","webpack:///./src/main/js/components/icons-components/TreemapIcon.tsx","webpack:///./src/main/js/apps/component-measures/config/domains.js","webpack:///./src/main/js/apps/component-measures/config/bubbles.js","webpack:///./src/main/js/apps/component-measures/utils.js","webpack:///./src/main/js/apps/component-measures/components/MeasureViewSelect.js","webpack:///./src/main/js/apps/component-measures/components/MetricNotFound.js","webpack:///./src/main/js/apps/component-measures/components/FilesCounter.js","webpack:///./src/main/js/apps/component-measures/components/PageActions.js","webpack:///./src/main/js/apps/component-measures/drilldown/ComponentCell.js","webpack:///./src/main/js/apps/component-measures/drilldown/MeasureCell.js","webpack:///./src/main/js/apps/component-measures/drilldown/ComponentsListRow.js","webpack:///./src/main/js/apps/component-measures/drilldown/EmptyResult.js","webpack:///./src/main/js/apps/component-measures/config/complementary.js","webpack:///./src/main/js/apps/component-measures/drilldown/ComponentsList.js","webpack:///./src/main/js/apps/component-measures/drilldown/FilesView.js","webpack:///./src/main/js/apps/component-measures/drilldown/CodeView.js","webpack:///./src/main/js/components/charts/ColorBoxLegend.tsx","webpack:///./src/main/js/components/charts/ColorGradientLegend.tsx","webpack:///./src/main/js/components/charts/TreeMapRect.tsx","webpack:///./src/main/js/components/charts/TreeMap.tsx","webpack:///./src/main/js/apps/component-measures/drilldown/TreeMapView.js","webpack:///./src/main/js/apps/component-measures/components/MeasureContent.js","webpack:///./src/main/js/apps/component-measures/components/MeasureContentContainer.js","webpack:///./src/main/js/apps/component-measures/drilldown/BubbleChart.js","webpack:///./src/main/js/apps/component-measures/components/MeasureOverview.js","webpack:///./src/main/js/apps/component-measures/components/MeasureOverviewContainer.js","webpack:///./src/main/js/apps/component-measures/sidebar/ProjectOverviewFacet.js","webpack:///./src/main/js/apps/component-measures/sidebar/FacetMeasureValue.js","webpack:///./src/main/js/apps/component-measures/sidebar/DomainFacet.js","webpack:///./src/main/js/apps/component-measures/sidebar/Sidebar.js","webpack:///./src/main/js/apps/component-measures/components/App.js","webpack:///./src/main/js/apps/component-measures/components/AppContainer.js","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/ui/IssueTypeIcon.tsx","webpack:///./src/main/js/components/facet/FacetBox.tsx","webpack:///./src/main/js/components/facet/FacetItem.tsx","webpack:///./src/main/js/components/facet/utils.ts","webpack:///./src/main/js/components/facet/FacetHeader.tsx","webpack:///./src/main/js/components/facet/FacetItemsList.tsx","webpack:///./src/main/js/components/icons-components/CodeSmellIcon.tsx","webpack:///./src/main/js/components/icons-components/VulnerabilityIcon.tsx","webpack:///./src/main/js/components/icons-components/BugIcon.tsx","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/icons-components/ChevronRightcon.tsx","webpack:///./src/main/js/components/icons-components/TagsIcon.tsx","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/icons-components/SeverityIcon.tsx","webpack:///./src/main/js/components/icons-components/ChevronDownIcon.tsx","webpack:///./src/main/js/components/icons-components/OpenCloseIcon.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/tags/TagsList.css?c8ad","webpack:///./src/main/js/components/search-navigator.css","webpack:///./src/main/js/components/search-navigator.css?b13d","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/icons-components/LinkIcon.tsx","webpack:///./src/main/js/components/icons-components/BubblesIcon.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayCoveredFiles.tsx","webpack:///./src/main/js/api/tests.ts","webpack:///./src/main/js/components/icons-components/TestStatusIcon.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayTestCase.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayTestCases.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/CoveragePopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplications.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/DuplicationPopup.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/getCoverageStatus.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewer.tsx"],"names":["module","exports","__webpack_require__","push","i","content","options","hmr","transform","insertInto","undefined","locals","LocationIndex","props","children","leading","onClick","selected","other","__rest","clickAttributes","role","tabIndex","react__WEBPACK_IMPORTED_MODULE_0__","__assign","className","classnames__WEBPACK_IMPORTED_MODULE_1__","is-leading","statusIcons","open","_a","size","index_js_exposed","icons_components_Icon","d","style","fill","theme","confirmed","reopened","resolved","closed","StatusIcon","status","toLowerCase","Icon","StatusHelper","resolution","Object","l10n","getLeakPeriod","periods","index","Array","isArray","find","period","getPeriod","getPeriodLabel","parameter","modeParam","mode","_l10n__WEBPACK_IMPORTED_MODULE_0__","getPeriodDate","date","_dates__WEBPACK_IMPORTED_MODULE_1__","ListIcon","_b","_Icon__WEBPACK_IMPORTED_MODULE_1__","MarkdownTips","_super","__extends","prototype","handleClick","evt","preventDefault","window","_helpers_urls__WEBPACK_IMPORTED_MODULE_1__","render","href","this","_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","TagsSelector","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_1__","elements","tags","listSize","onSearch","onSelect","onUnselect","placeholder","selectedElements","selectedTags","validateSearchInput","validateTag","value","replace","DEFAULT_PADDING","Histogram","renderBar","xScale","yScale","alignTicks","padding","width","Math","round","x","range","y","bandwidth","height","renderValue","yValues","BAR_HEIGHT","Tooltip","overlay","yTooltips","dx","dy","renderTick","yTicks","tick","historyTickClass","renderBars","_this","bars","map","key","availableWidth","d3_scale","domain","d3_array","availableHeight","_","rangeRound","cutLanguageName","name","length","substr","__webpack_exports__","es","state","languages","rootReducer","distribution","split","point","tokens","language","lines","parseInt","data","sortBy_default","langKey","lang","find_default","getLanguageName","measures","components_charts_Histogram","HistoryIcon","EllipsisIcon","IssueChangelogDiff","message","diff","index_js_exposed_default","a","createElement","oldValue","newValue","ChangelogPopup","apply","arguments","changelogs","componentDidMount","mounted","loadChangelog","componentWillUnmount","issues","issue","then","setState","onFail","author","Dropdown","DateTimeFormatter","creationDate","item","idx","userName","Avatar","hash","avatar","diffs","PureComponent","IssueChangelog","toggleChangelog","togglePopup","handleClose","IssueChangelog_extends","Toggler","onRequestClose","isOpen","popups_ChangelogPopup","mouseEnterDelay","buttons","DateFromNow","DropdownIcon","IssueMessage","context","workspace","openRule","rule","organization","IssueMessage_extends","aria-label","engine","contextTypes","prop_types_default","object","isRequired","SelectListItem","handleSelect","handleHover","onHover","SelectListItem_extends","renderLink","classnames_default","active","onMouseOver","onFocus","title","placement","SelectList","call","attachShortcuts","previousKeyScope","keymaster_default","getScope","previousFilter","filter","currentKeyScope","uniqueId_default","setScope","event","tagName","target","srcElement","isInput","includes","keyCode","selectNextElement","selectPreviousElement","detachShortcuts","deleteScope","items","indexOf","renderChild","child","type","common_SelectListItem","cloneElement","currentItem","SelectList_extends","componentWillReceiveProps","nextProps","hasChildren","Children","count","SimilarIssuesPopup","property","onFilter","SimilarIssuesPopup_extends","tag","subProject","noPadding","common_SelectList","IssueTypeIcon","query","SeverityHelper","severity","assignee","assigneeAvatar","assigneeName","path","ruleName","TagsIcon","QualifierIcon","qualifier","projectName","subProjectName","componentQualifier","componentLongName","SimilarIssuesFilter","handleFilter","SimilarIssuesFilter_extends","popups_SimilarIssuesPopup","FilterIcon","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","reduce","sum","locations","locationsBadge","displayLocations","displayLocationsCount","issueUrl","urls","project","branches","branchLike","components_IssueMessage","externalRuleEngine","components_IssueChangelog","currentPopup","textRange","endLine","displayLocationsLink","to","LinkIcon","components_SimilarIssuesFilter","LIST_SIZE","SetAssigneePopup_SetAssigneePopup","SetAssigneePopup","searchMembers","organizations","projectOrganization","q","ps","handleSearchResult","searchUsers","users","currentUser","login","handleSearchChange","defaultUsersArray","organizationsEnabled","isLoggedIn","concat","SetAssigneePopup_extends","SearchBox","autoFocus","minLength","onChange","map_default","user","marginLeft","prop_types","popups_SetAssigneePopup","react_redux_es","IssueAssign","toggleAssign","IssueAssign_extends","renderAssignee","canAssign","closeOnEscape","onAssign","actions_updateIssue","resultPromise","oldIssue","newIssue","optimisticUpdate","response","helpers_issues","components","rules","error","CommentPopup","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","CommentPopup_extends","onKeyDown","rows","disabled","IssueCommentAction","addComment","text","issueKey","IssueCommentAction_extends","popups_CommentPopup","commentPlaceholder","SEVERITY","SetSeverityPopup","SetSeverityPopup_extends","SeverityIcon","IssueSeverity","toggleSetSeverity","setSeverity","setIssueProperty","IssueSeverity_extends","canSetSeverity","popups_SetSeverityPopup","SetIssueTagsPopup_LIST_SIZE","SetIssueTagsPopup","searchResult","min","setTags","without_default","SetIssueTagsPopup_extends","availableTags","difference_default","popups","BottomRight","IssueTags","toggleSetTags","IssueTags_assign","join","IssueTags_extends","canSetTags","popups_SetIssueTagsPopup","TagsList","allowUpdate","SetTransitionPopup","SetTransitionPopup_extends","transitions","transition","IssueTransition","setTransition","toggleSetTransition","IssueTransition_extends","hasTransitions","popups_SetTransitionPopup","TYPES","SetTypePopup","SetTypePopup_extends","IssueType","toggleSetType","setType","IssueType_extends","popups_SetTypePopup","IssueActionsBar","popup","apiCall","IssueActionsBar_assign","handleTransition","IssueActionsBar_extends","actions","canComment","components_IssueType","components_IssueSeverity","components_IssueTransition","components_IssueAssign","effort","components_IssueCommentAction","components_IssueTags","CommentDeletePopup","onDelete","IssueCommentLine","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","IssueCommentLine_extends","authorName","authorAvatar","dangerouslySetInnerHTML","__html","htmlText","createdAt","updatable","IssueView","handleCheck","onCheck","isClickable","node","toUpperCase","parentNode","editComment","deleteComment","IssueView_extends","hasCheckbox","issueClass","issue-with-checkbox","data-issue","components_IssueActionsBar","comments","components_IssueCommentLine","icon-checkbox-checked","checked","Issue_Issue","Issue","onPopupToggle","handleAssignement","handleFail","rootActions","store","dispatch","Issue_extends","bindShortcuts","componentWillUpdate","unbindShortcuts","componentDidUpdate","prevProps","unbind","issue_IssueView","defaultProps","ColorRatingsLegend","rating","borderColor","_helpers_constants__WEBPACK_IMPORTED_MODULE_3__","backgroundColor","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","Bubble","link","circle","react__WEBPACK_IMPORTED_MODULE_2__","r","color","stroke","scale","react_router__WEBPACK_IMPORTED_MODULE_5__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_10__","tooltip","BubbleChart","selection","zoom","boundNode","d3_zoom__WEBPACK_IMPORTED_MODULE_8__","scaleExtent","on","zoomed","d3_selection__WEBPACK_IMPORTED_MODULE_9__","resetZoom","getZoomLevelLabel","floor","k","renderXGrid","ticks","displayXGrid","y1","y2","x1","x2","renderYGrid","displayYGrid","renderXTicks","xTicks","displayXTicks","innerText","formatXTick","renderYTicks","displayYTicks","formatYTick","renderChart","d3_scale__WEBPACK_IMPORTED_MODULE_7__","xDomain","d3_array__WEBPACK_IMPORTED_MODULE_6__","nice","yDomain","sizeScale","sizeDomain","sizeRange","xScaleOriginal","copy","yScaleOriginal","getXRange","getYRange","bubbles","lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default","b","onBubbleClick","getTicks","classnames__WEBPACK_IMPORTED_MODULE_3__","ref","id","clipPath","rect","getBoundingClientRect","translateExtent","defineProperty","String","minX","maxX","minY","maxY","dMinY","format","ceil","uniqueTicksCount","lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default","ticksCount","_helpers_l10n__WEBPACK_IMPORTED_MODULE_11__","react_virtualized_dist_commonjs_AutoSizer__WEBPACK_IMPORTED_MODULE_4__","disableHeight","LocationMessage","Breadcrumb","e","blur","component","canBrowse","isLast","componentName","breadcrumbItem","Breadcrumbs","breadcrumbs","fetchBreadcrumbs","rootComponent","api_components","Breadcrumbs_extends","backToFirst","lastItem","components_Breadcrumb","MeasureFavoriteContainer_MeasureFavoriteContainer","MeasureFavoriteContainer","MeasureFavoriteContainer_extends","fetchComponentFavorite","onReceiveComponent","canMarkAsFavorite","FavoriteContainer","componentKey","mapDispatchToProps","favorites","notFavorites","fav","duck","components_MeasureFavoriteContainer","LeakPeriodLegend","leakClass","label","helpers_periods","DateFormatter","long","MeasureHeader","leakPeriod","measure","metric","secondaryMeasure","isDiff","helpers_measures","hasHistory","Measure","metricKey","metricType","leak","react_router_es","LanguageDistributionContainer","TreeIcon","TreemapIcon","_c","domains_domains","Reliability","categories","order","Security","Maintainability","Coverage","Duplications","Size","Complexity","Releasability","Issues","colors","project_overview","PROJECT_OVERVEW","DEFAULT_VIEW","DEFAULT_METRIC","KNOWN_DOMAINS","BANNED_MEASURES","enhanceComponent","metrics","enhancedMeasures","utils","utils_assign","isFileType","isViewType","groupByDomains","memoize_default","domains","toPairs_default","groupBy_default","hasList","hasTree","hasBubbleChart","domainName","getBubbleMetrics","conf","isProjectOverview","parseView","rawView","view","helpers_query","parseQuery","urlQuery","serializeQuery","MeasureViewSelect","getOptions","icon","hasTreemap","handleChange","option","handleViewChange","MeasureViewSelect_extends","Select","autoBlur","clearable","searchable","valueRenderer","MetricNotFound","FilesCounter","current","total","PageActions","isFile","paging","totalLoadedComponents","showShortcuts","DeferredSpinner","loading","ComponentCell","isLeftClickEvent","button","isModifiedEvent","altKey","shiftKey","ComponentCell_extends","renderInner","head","tail","parts","refKey","MeasureCell","ComponentsListRow","otherMeasures","otherMetrics","ComponentsListRow_assign","rowClass","isSelected","drilldown_ComponentCell","EmptyResult","complementary","coverage","line_coverage","branch_coverage","uncovered_lines","uncovered_conditions","new_coverage","new_line_coverage","new_branch_coverage","new_uncovered_lines","new_uncovered_conditions","duplicated_lines_density","new_duplicated_lines_density","duplicated_lines","new_duplicated_lines","ComponentsList","hideBest","displayAll","ComponentsList_extends","hasBestValue","focusedMeasure","bestValue","renderComponent","selectedComponent","renderHiddenLink","hiddenCount","colCount","notBestComponents","shouldHideBest","Fragment","ListView","openSelected","selectedKey","handleOpen","selectPrevious","selectedIdx","selectNext","scrollToElement","listContainer","elem","getElementsByClassName","scrolling","topOffset","bottomOffset","throttle_default","FilesView_extends","action","drilldown_ComponentsList","ListFooter","loadMore","fetchMore","CodeView","prevComponent","updateSelected","nextComponent","CodeView_extends","SourceViewer","ColorBoxLegend_ColorBoxLegend","colorScale","colorNA","colorDomain","colorRange","classnames","NA_SPACING","ColorGradientLegend_ColorGradientLegend","direction","reverse","lastColorIdx","lastDomainIdx","widthNoPadding","rectHeight","offset","stopColor","SIZE_SCALE","clamp","TreeMapRect","handleLinkClick","handleRectClick","itemKey","renderCell","cellStyles","left","top","fontSize","lineHeight","cursor","isTextVisible","isIconVisible","prefix","maxWidth","spacer-right","TreeMapRect_extends","TreeMap","mostCommitPrefix","labels","sortedLabels","slice","sort","firstLabel","firstLabelLength","lastLabel","charAt","prefixTokens","lastPrefixPart","TreeMap_extends","renderNoData","hierarchy","d3_hierarchy","nodes","treemap","leaves","halfWidth","charts_TreeMapRect","y0","onRectangleClick","x0","COLORS","LEVEL_COLORS","TreeMapView","getTreemapComponents","getColorScale","colorMeasure","sizeMeasure","colorValue","sizeValue","getTooltip","Boolean","getLevelColorScale","getPercentColorScale","getRatingColorScale","colorMetric","sizeMetric","formatted","treemapItems","TreeMapView_extends","renderLegend","AutoSizer_default","components_charts_TreeMap","MeasureContent","getSelectedIndex","findIndex","getComponentRequestParams","strategy","metricKeys","opts","MeasureContent_assign","additionalFields","metricSortFilter","metricPeriodSort","metricSort","s","asc","fetchComponents","updateLoading","c","fetchMoreComponents","onOpenComponent","router","container","focus","onSelectComponent","MeasureContent_extends","renderCode","drilldown_CodeView","renderMeasure","FilesView","drilldown_TreeMapView","components_Breadcrumbs","components_MeasureViewSelect","updateView","MeasureContentContainer","fetchMeasure","fetchMeasures","MeasureContentContainer_assign","updateQuery","MeasureContentContainer_extends","components_MeasureContent","getMeasureVal","Number","handleBubbleClick","BubbleChart_extends","values","inner","forEach","line","getDescription","description","translatedDescription","renderBubbleChart","constants","max","charts_BubbleChart","renderChartHeader","colorsMetric","HelpTooltip","BUBBLES_LIMIT","MeasureOverview","metricsKey","MeasureOverview_assign","MeasureOverview_extends","renderContent","drilldown_BubbleChart","MeasureOverviewContainer","fetchComponent","MeasureOverviewContainer_assign","MeasureOverviewContainer_extends","components_MeasureOverview","ProjectOverviewFacet","facetName","FacetBox","FacetItemsList","FacetItem","FacetMeasureValue","DomainFacet","handleHeaderClick","onToggle","hasFacetSelected","measureSelected","overviewSelected","getValues","renderItemFacetStat","renderItemsFacet","addMeasureCategories","translateMetric","some","sortedItems","configOrder","sortMeasures","stat","renderOverviewFacet","BubblesIcon","DomainFacet_extends","helper","translatedHelper","FacetHeader","Sidebar","getOpenFacets","openFacets","selectedMetric","newOpenFacets","Sidebar_assign","toggleFacet","resetSelection","getDefaultView","changeMetric","Sidebar_extends","sidebar_DomainFacet","App","filteredKeys","newQuery","App_assign","location","pathname","getHelmetTitle","App_extends","document","body","classList","add","documentElement","fetchMetrics","footer","getElementById","remove","Suggestions","suggestions","Helmet_default","ScreenPositionHelper","sidebar_Sidebar","components_MeasureContentContainer","components_MeasureOverviewContainer","AppContainer_mapDispatchToProps","getState","Promise","resolve","api_measures","AppContainer_assign","bannedMetrics","applicationPeriods","throwGlobalError","components_App","addSuggestions","removeSuggestions","prop_types__WEBPACK_IMPORTED_MODULE_1__","_icons_components_BugIcon__WEBPACK_IMPORTED_MODULE_1__","_icons_components_VulnerabilityIcon__WEBPACK_IMPORTED_MODULE_2__","_icons_components_CodeSmellIcon__WEBPACK_IMPORTED_MODULE_3__","data-property","FacetItem_FacetItem","currentTarget","search-navigator-facet-half","navigator","userAgent","data-facet","renderHelper","_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_2__","renderValueIndicator","_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","showClearButton","onClear","_icons_components_OpenCloseIcon__WEBPACK_IMPORTED_MODULE_1__","_ui_buttons__WEBPACK_IMPORTED_MODULE_3__","CodeSmellIcon","VulnerabilityIcon","BugIcon","_icons_components_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","decimals","small","_ui_Level__WEBPACK_IMPORTED_MODULE_3__","level","formattedValue","_helpers_measures__WEBPACK_IMPORTED_MODULE_5__","_utils__WEBPACK_IMPORTED_MODULE_1__","_ui_Rating__WEBPACK_IMPORTED_MODULE_2__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_4__","ChevronRightIcon","getPosition","containerPos","pageYOffset","pageXOffset","debouncedOnResize","lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default","forceUpdate","addEventListener","removeEventListener","react__WEBPACK_IMPORTED_MODULE_1__","severityIcons","blocker","_app_theme__WEBPACK_IMPORTED_MODULE_2__","fillRule","critical","major","minor","info","ChevronDownIcon","OpenCloseIcon","ChevronRightcon","KNOWN_RATINGS","enhanceMeasure","getLeakValue","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","_icons_components_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","_icons_components_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","MultiSelectOption","onSelectChange","element","icon-checkbox-invisible","activeClass","custom","renderLabel","MultiSelect_MultiSelect","MultiSelect","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","handleElementHover","activeIdx","getAllElements","toggleSelect","stopLoading","isNewElement","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","MultiSelect_extends","totalElements","searchInput","allowSelection","allowNewElements","_d","footerNode","_e","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","div","common_MultiSelectOption","MeasuresOverlayMeasure","data-metric","MeasuresOverlayCoveredFiles","fetchCoveredFiles","testId","testCase","request","files","coveredFiles","coveredFile","longName","coveredLines","stacktrace","ok","failure","skipped","TestStatusIcon","MeasuresOverlayTestCase","handleTestCaseClick","MeasuresOverlayTestCase_extends","hasAdditionalData","durationInMs","MeasuresOverlayTestCases","fetchTests","parameters","testFileKey","catch","testCases","tests","handleTestCasesSortClick","dataset","sortAsc","selectedTestId","MeasuresOverlayTestCases_extends","selectedTest","test","colSpan","active-link","data-sort","mainOrder","orderBy_default","sortTestCases","components_MeasuresOverlayTestCase","components_MeasuresOverlayCoveredFiles","MeasuresOverlay","showAllMeasures","fetchData","all","fetchIssues","facets","MeasuresOverlay_assign","api_metrics","sourceViewerFile","withMetrics","keyBy_default","api_issues","componentKeys","severitiesFacet","f","tagsFacet","typesFacet","handleAllMeasuresClick","renderLines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","violations","sqale_index","val","renderCoverage","CoverageRating","lines_to_cover","conditions_to_cover","renderDuplications","duplications","DuplicationsRating","muted","duplicated_blocks","renderTests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","renderAllMeasures","domainKeys","keys","odd","even","MeasuresOverlay_extends","Modal","contentLabel","large","onClose","components_MeasuresOverlayTestCases","SourceViewerHeader","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","SourceViewerHeader_extends","uuid","isUnitTest","rawSourcesLink","querystring_es3","SourceViewerHeader_assign","helpers_path","overlayPlacement","components_MeasuresOverlay","fileUuids","duplicationDensity","LineOptionsPopup","permalink","LineOptionsPopup_assign","RightTop","LineNumber","handleTogglePopup","closePopup","LineNumber_extends","popupOpen","lineNumber","data-line-number","SCMPopup","scmAuthor","scmDate","scmRevision","LineSCM","LineSCM_extends","previousLine","hasPopup","cell","p","changed","isSCMChanged","data-author","CoveragePopup","CoveragePopup_assign","sourceFileKey","sourceFileLineNumber","handleTestClick","CoveragePopup_extends","testCasesByFile","testFiles","fileKey","testSet","file","fileName","conditions","coveredConditions","testFile","data-key","LineCoverage","LineCoverage_extends","coverageStatus","components_CoveragePopup","LineDuplications","LineDuplications_extends","source-line-duplicated","duplicated","LineDuplicationBlock","LineDuplicationBlock_extends","data-index","renderDuplicationPopup","LineIssuesIndicator","LineIssuesIndicator_extends","hasIssues","source-line-with-issues","mostImportantIssue","LineIssuesList","issuePopup","displayIssueLocationsCount","displayIssueLocationsLink","onIssueChange","onIssueClick","onIssuePopupToggle","selectedIssue","ISSUE_LOCATION_CLASS","splitByTokens","code","rootClassName","innerHTML","childNodes","nodeType","fullClassName","innerTokens","nodeValue","markers","part","str","from","acc","highlightIssueLocations","issueLocations","nextTokens","markerAdded","startLine","token","s1","e1","s2","e2","p1","p2","p3","highlight_assign","newClassName","uniq_default","LineCode","handleSymbolClick","match","onSymbolClick","LineCode_extends","attachEvents","highlightedLocationMessage","activeMarkerNode","scroll","detachEvents","codeNode","symbols","querySelectorAll","renderMarker","onLocationSelect","highlightedSymbols","onIssueSelect","secondaryIssueLocations","showIssues","symbol","symbolRegExp","RegExp","highlightSymbol","has-issues","renderedTokens","leadingMarker","displayLocationMarkers","marker","Line","isPopupOpen","linePopup","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","Line_extends","displayCoverage","duplicationsCount","filtered","source-line-highlighted","highlighted","source-line-filtered","source-line-filtered-dark","source-line-last","last","components_LineNumber","onLinePopupToggle","components_LineSCM","components_LineCoverage","displayDuplications","components_LineDuplications","loadDuplications","times_default","components_LineDuplicationBlock","displayIssues","displayAllIssues","components_LineIssuesIndicator","components_LineCode","getLinearLocations","startOffset","endOffset","EMPTY_ARRAY","ZERO_LINE","SourceViewerCode","getDuplicationsForLine","duplicationsByLine","getIssuesForLine","issuesByLine","getIssueLocationsForLine","issueLocationsByLine","getSecondaryIssueLocationsForLine","highlightedLocations","linearLocations","l","SourceViewerCode_assign","renderLine","filterLine","sources","issuesForLine","symbolsForLine","symbolsByLine","optimizedHighlightedSymbols","intersection_default","optimizedSelectedIssue","optimizedSecondaryIssueLocations","optimizedLocationMessage","components_Line","highlightedLine","hasSourcesAfter","openIssuesByLine","SourceViewerCode_extends","hasFileIssues","hasSourcesBefore","loadingSourcesBefore","loadSourcesBefore","loadingSourcesAfter","loadSourcesAfter","DuplicationPopup","isDifferentComponent","handleFileClick","DuplicationPopup_extends","duplicatedFiles","groupedBlocks","blocks","fileRef","inRemovedComponent","duplication","block","data-line","PAGE_SIZE","loadPageAndNext","toLine","page","pageSize","loadIssues_assign","loadPage","lastIssue","nextIssues","loadIssues_loadIssues","_fromLine","buildQuery","locationsByLine","flatten_default","LINES","SourceViewerBase","loadSources","reject","aroundLine","safeLoadSources","firstSourceLine","safeLoadIssues","uniqBy_default","computeCoverageStatus","SourceViewerBase_assign","lastSourceLine","fromLine","changes","duplicationIndex","_ref","handleLinePopupToggle","samePopup","closeLinePopup","handleIssuePopupToggle","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","newIssues","candidate","handleFilterLine","leakPeriodDate","dates","foundOne","outOfBounds","shouldDisplay","isOk","components_DuplicationPopup","notAccessible","notExist","sourceRemoved","SourceViewerBase_extends","isLineOutsideOfRange","fetchSources","selectedIssue_1","reloadIssues","loadComponent","defaultLoadComponent","loadIssues","defaultLoadSources","lineHits","firstLine","lastList","safeLoadComponent","finalSources_1","onLoaded","onFailLoadSources","finalSources_2","SourceViewer_SourceViewerCode","source-duplications-expanded","SourceViewer_SourceViewerHeader","SourceViewer_SourceViewerBase"],"mappings":"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nE,OACEC,EAAA,cAACa,EAAA,GAAKpB,UAAWA,EAAWM,KAAMA,GAChCC,EAAA,sBACEE,EAAE,4qBACFC,OAASC,KAAIA,MCLP,SAAA6mB,EAAsBnnB,OAAEL,EAAAK,EAAAL,UAAW0C,EAAArC,EAAAM,YAAA,IAAA+B,EAAA,eAAAA,EAAuB+kB,EAAApnB,EAAAC,YAAA,IAAAmnB,EAAA,GAAAA,EACtE,OACElnB,EAAA,cAACa,EAAA,GAAKpB,UAAWA,EAAWM,KAAMA,GAChCC,EAAA,sBACEE,EAAE,6EACFC,OAASC,KAAIA,2FCPR+mB,IACXC,aACEC,YAAa,oBAAqB,oBAClCC,OACE,oBACA,WACA,yBACA,qCAEA,mBACA,OACA,qBACA,mCAIJC,UACEF,YAAa,oBAAqB,oBAClCC,OACE,oBACA,sBACA,sBACA,kCAEA,mBACA,kBACA,kBACA,gCAIJE,iBACEH,YAAa,oBAAqB,oBAClCC,OACE,oBACA,kBACA,qBACA,uBACA,6BAEA,mBACA,cACA,cACA,mBACA,eACA,6CAIJG,UACEJ,YAAa,oBAAqB,mBAAoB,kBACtDC,OACE,oBACA,eACA,qBACA,sBACA,oBACA,0BACA,2BACA,sBAEA,mBACA,WACA,iBACA,kBACA,gBACA,sBACA,uBACA,kBAEA,iBACA,QACA,eACA,cACA,gBACA,gBACA,uBACA,wBAIJI,cACEL,YAAa,oBAAqB,oBAClCC,OACE,oBACA,+BACA,uBACA,wBAEA,mBACA,2BACA,mBACA,oBACA,qBAIJK,MACEL,OACE,YAEA,QACA,QACA,aACA,YACA,UACA,QACA,gBAIJM,YACEN,OAAQ,aAAc,sBAAuB,kBAAmB,qBAGlEO,eACEP,OAAQ,uBAAwB,uBAAwB,iBAG1DQ,QACER,OACE,iBACA,yBACA,0BACA,uBACA,uBACA,sBAEA,aACA,qBACA,sBACA,mBACA,mBACA,kBACA,cACA,kBACA,mBACA,2BCzIOrF,IACXmF,aACEziB,EAAG,QACHE,EAAG,iCACH9E,KAAM,OACNgoB,QAAS,uBAEXR,UACE5iB,EAAG,QACHE,EAAG,8BACH9E,KAAM,kBACNgoB,QAA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","file":"js/279.29ee92d7.chunk.js","sourcesContent":["exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".bar-chart-bar{fill:#4b9fd5}.bar-chart-tick{fill:#777;font-size:12px;text-anchor:middle}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BarChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BarChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BarChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tags-list{white-space:nowrap}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\ninterface Props {\n  className?: string;\n  status: string;\n}\n\nconst statusIcons: { [x: string]: (props: IconProps) => React.ReactElement<any> } = {\n  open: OpenStatusIcon,\n  confirmed: ConfirmedStatusIcon,\n  reopened: ReopenedStatusIcon,\n  resolved: ResolvedStatusIcon,\n  closed: ClosedStatusIcon\n};\n\nexport default function StatusIcon(props: Props) {\n  const status = props.status.toLowerCase();\n  const Icon = statusIcons[status];\n  return Icon ? <Icon className={props.className} /> : null;\n}\n\nfunction OpenStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ConfirmedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M10 8c0 .552-.195 1.023-.586 1.414-.39.39-.862.586-1.414.586a1.926 1.926 0 0 1-1.414-.586A1.928 1.928 0 0 1 6 8c0-.552.195-1.023.586-1.414C6.976 6.196 7.448 6 8 6c.552 0 1.023.195 1.414.586.39.39.586.862.586 1.414zM8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ReopenedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 12.25v-8.5c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ResolvedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M12.03 6.734a.49.49 0 0 0-.14-.36l-.71-.702a.48.48 0 0 0-.352-.15.474.474 0 0 0-.35.15l-3.19 3.18-1.765-1.766a.479.479 0 0 0-.35-.15.479.479 0 0 0-.353.15l-.71.703a.482.482 0 0 0-.14.358c0 .14.046.258.14.352l2.828 2.828c.098.1.216.15.35.15.142 0 .26-.05.36-.15l4.243-4.242a.475.475 0 0 0 .14-.352l-.001.001zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.baseFontColor }}\n      />\n    </Icon>\n  );\n}\n\nfunction ClosedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.baseFontColor }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from '../icons-components/StatusIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from './l10n';\nimport { parseDate } from './dates';\n\nexport interface Period {\n  date: string;\n  index: number;\n  mode: string;\n  modeParam?: string;\n  parameter: string;\n}\n\nexport function getPeriod(periods: Period[] | undefined, index: number): Period | undefined {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod(periods: Period[] | undefined): Period | undefined {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(period: Period | undefined): string | undefined {\n  if (!period) {\n    return undefined;\n  }\n\n  const parameter = period.modeParam || period.parameter;\n\n  if (period.mode === 'previous_version' && !parameter) {\n    return translate('overview.period.previous_version_only_date');\n  }\n\n  return translateWithParameters(`overview.period.${period.mode}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n\nexport function getLeakPeriodLabel(periods: Period[]): string | undefined {\n  return getPeriodLabel(getLeakPeriod(periods));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ListIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M15.045 11.526v1.007q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 8.506v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 5.487v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 2.468v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\nimport { translate } from '../../helpers/l10n';\n\nexport default class MarkdownTips extends React.PureComponent {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className=\"markdown-tips\">\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">``{translate('code')}``</span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport MultiSelect from '../common/MultiSelect';\nimport { translate } from '../../helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { max } from 'd3-array';\nimport { scaleLinear, scaleBand, ScaleLinear, ScaleBand } from 'd3-scale';\nimport Tooltip from '../controls/Tooltip';\nimport './BarChart.css';\nimport './Histogram.css';\n\ninterface Props {\n  alignTicks?: boolean;\n  bars: number[];\n  height: number;\n  padding?: [number, number, number, number];\n  yTicks?: string[];\n  yTooltips?: string[];\n  yValues?: string[];\n  width: number;\n}\n\nconst BAR_HEIGHT = 10;\nconst DEFAULT_PADDING = [10, 10, 10, 10];\n\ntype XScale = ScaleLinear<number, number>;\ntype YScale = ScaleBand<number>;\n\nexport default class Histogram extends React.PureComponent<Props> {\n  renderBar(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING } = this.props;\n\n    const width = Math.round(xScale(d)) + /* minimum bar width */ 1;\n    const x = xScale.range()[0] + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2);\n\n    return <rect className=\"bar-chart-bar\" x={x} y={y} width={width} height={BAR_HEIGHT} />;\n  }\n\n  renderValue(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING, yValues } = this.props;\n\n    const value = yValues && yValues[index];\n\n    if (!value) {\n      return null;\n    }\n\n    const x = xScale(d) + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n\n    return (\n      <Tooltip overlay={this.props.yTooltips && this.props.yTooltips[index]}>\n        <text className=\"bar-chart-tick histogram-value\" x={x} y={y} dx=\"1em\" dy=\"0.3em\">\n          {value}\n        </text>\n      </Tooltip>\n    );\n  }\n\n  renderTick(index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, yTicks } = this.props;\n\n    const tick = yTicks && yTicks[index];\n\n    if (!tick) {\n      return null;\n    }\n\n    const x = xScale.range()[0];\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n    const historyTickClass = alignTicks ? 'histogram-tick-start' : 'histogram-tick';\n\n    return (\n      <text\n        className={'bar-chart-tick ' + historyTickClass}\n        x={x}\n        y={y}\n        dx={alignTicks ? 0 : '-1em'}\n        dy=\"0.3em\">\n        {tick}\n      </text>\n    );\n  }\n\n  renderBars(xScale: XScale, yScale: YScale) {\n    return (\n      <g>\n        {this.props.bars.map((d, index) => {\n          return (\n            <g key={index}>\n              {this.renderBar(d, index, xScale, yScale)}\n              {this.renderValue(d, index, xScale, yScale)}\n              {this.renderTick(index, xScale, yScale)}\n            </g>\n          );\n        })}\n      </g>\n    );\n  }\n\n  render() {\n    const { bars, width, height, padding = DEFAULT_PADDING } = this.props;\n\n    const availableWidth = width - padding[1] - padding[3];\n    const xScale: XScale = scaleLinear()\n      .domain([0, max(bars)!])\n      .range([0, availableWidth]);\n\n    const availableHeight = height - padding[0] - padding[2];\n    const yScale: YScale = scaleBand<number>()\n      .domain(bars.map((_, index) => index))\n      .rangeRound([0, availableHeight]);\n\n    return (\n      <svg className=\"bar-chart\" width={this.props.width} height={this.props.height}>\n        <g transform={`translate(${this.props.alignTicks ? 4 : padding[3]}, ${padding[0]})`}>\n          {this.renderBars(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { find, sortBy } from 'lodash';\nimport Histogram from './Histogram';\nimport { formatMeasure } from '../../helpers/measures';\nimport { Language } from '../../api/languages';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  alignTicks?: boolean;\n  distribution: string;\n  languages?: Language[];\n  width: number;\n}\n\nexport default function LanguageDistribution(props: Props) {\n  let distribution = props.distribution.split(';').map(point => {\n    const tokens = point.split('=');\n    return { language: tokens[0], lines: parseInt(tokens[1], 10) };\n  });\n\n  distribution = sortBy(distribution, d => -d.lines);\n\n  const data = distribution.map(d => d.lines);\n  const yTicks = distribution.map(d => getLanguageName(d.language)).map(cutLanguageName);\n  const yTooltips = distribution.map(d => (d.lines > 1000 ? formatMeasure(d.lines, 'INT') : ''));\n  const yValues = distribution.map(d => formatMeasure(d.lines, 'SHORT_INT'));\n\n  return (\n    <Histogram\n      alignTicks={props.alignTicks}\n      bars={data}\n      height={distribution.length * 25}\n      padding={[0, 60, 0, 80]}\n      yTicks={yTicks}\n      yTooltips={yTooltips}\n      yValues={yValues}\n      width={props.width}\n    />\n  );\n\n  function getLanguageName(langKey: string) {\n    if (langKey === '<null>') {\n      return translate('unknown');\n    }\n    const lang = find(props.languages, { key: langKey });\n    return lang ? lang.name : langKey;\n  }\n}\n\nfunction cutLanguageName(name: string) {\n  return name.length > 10 ? `${name.substr(0, 7)}...` : name;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport LanguageDistribution from './LanguageDistribution';\nimport { getLanguages } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: any) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect<any, any, any>(mapStateToProps)(LanguageDistribution);\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".histogram-tick{text-anchor:end}.histogram-tick-start,.histogram-value{text-anchor:start}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Histogram.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Histogram.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Histogram.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function HistoryIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.7 3.4v3.3c0 .1 0 .2-.1.2s-.2 0-.3-.1l-.9-.9-4.8 4.8c-.1.1-.1.1-.2.1s-.1 0-.2-.1L6.4 9l-3.2 3.2-1.5-1.5 4.5-4.5c.1-.1.1-.1.2-.1s.1 0 .2.1L8.4 8l3.5-3.5-.9-1c-.1-.1-.1-.2-.1-.3s.1-.1.2-.1h3.3c.1 0 .1 0 .2.1.1 0 .1.1.1.2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function EllipsisIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M5.273 7.182v1.636a.818.818 0 0 1-.818.818H2.818A.818.818 0 0 1 2 8.818V7.182c0-.452.366-.818.818-.818h1.637c.451 0 .818.366.818.818zm4.363 0v1.636a.818.818 0 0 1-.818.818H7.182a.818.818 0 0 1-.818-.818V7.182c0-.452.366-.818.818-.818h1.636c.452 0 .818.366.818.818zm4.364 0v1.636a.818.818 0 0 1-.818.818h-1.637a.818.818 0 0 1-.818-.818V7.182c0-.452.367-.818.818-.818h1.637c.452 0 .818.366.818.818z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\n/*::\nexport type ChangelogDiff = {\n  key: string,\n  oldValue?: string,\n  newValue?: string\n};\n*/\n\nexport default function IssueChangelogDiff(props /*: { diff: ChangelogDiff } */) {\n  const { diff } = props;\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  }\n  if (diff.key === 'from_long_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_long_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  }\n  if (diff.key === 'from_short_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_short_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let newValue /*: string */ = diff.newValue;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let oldValue /*: string */ = diff.oldValue;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { getIssueChangelog } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport Avatar from '../../../components/ui/Avatar';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n/*:: import type { ChangelogDiff } from '../components/IssueChangelogDiff'; */\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Changelog = {\n  avatar?: string,\n  creationDate: string,\n  diffs: Array<ChangelogDiff>,\n  user: string,\n  userName: string\n};\n*/\n\n/*::\ntype Props = {\n  issue: Issue,\n  onFail: Error => void,\n  popupPosition?: {}\n};\n*/\n\n/*::\ntype State = {\n  changelogs: Array<Changelog>\n};\n*/\n\nexport default class ChangelogPopup extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    changelogs: []\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(changelogs => {\n      if (this.mounted) {\n        this.setState({ changelogs });\n      }\n    }, this.props.onFail);\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelogs.map((item, idx) => (\n                <tr key={idx}>\n                  <td className=\"thin text-left text-top nowrap\">\n                    <DateTimeFormatter date={item.creationDate} />\n                  </td>\n                  <td className=\"text-left text-top\">\n                    {item.userName && (\n                      <p>\n                        <Avatar\n                          className=\"little-spacer-right\"\n                          hash={item.avatar}\n                          name={item.userName}\n                          size={16}\n                        />\n                        {item.userName}\n                      </p>\n                    )}\n                    {item.diffs.map(diff => <IssueChangelogDiff diff={diff} key={diff.key} />)}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport ChangelogPopup from '../popups/ChangelogPopup';\nimport DropdownIcon from '../../../components/icons-components/DropdownIcon';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport DateTimeFormatter from '../../../components/intl/DateTimeFormatter';\nimport Toggler from '../../../components/controls/Toggler';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { Button } from '../../../components/ui/buttons';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {\n  isOpen: boolean,\n  issue: Issue,\n  creationDate: string,\n  togglePopup: (string, boolean | void) => void,\n  onFail: Error => void\n};\n*/\n\nexport default class IssueChangelog extends React.PureComponent {\n  /*:: props: Props; */\n\n  toggleChangelog = (open /*: boolean | void */) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} onFail={this.props.onFail} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <Button\n              className=\"button-link issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </Button>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport EllipsisIcon from '../../icons-components/EllipsisIcon';\nimport Tooltip from '../../controls/Tooltip';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { Button } from '../../ui/buttons';\n\nexport default class IssueMessage extends React.PureComponent {\n  /*:: props: {\n    engine?: string;\n    message: string,\n    organization: string,\n    rule: string\n  };\n  */\n\n  static contextTypes = {\n    workspace: PropTypes.object.isRequired\n  };\n\n  handleClick = () => {\n    this.context.workspace.openRule({\n      key: this.props.rule,\n      organization: this.props.organization\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"issue-message\">\n        {this.props.message}\n        <Button\n          aria-label={translate('issue.rule_details')}\n          className=\"button-link issue-rule little-spacer-left\"\n          onClick={this.handleClick}>\n          <EllipsisIcon />\n        </Button>\n        {this.props.engine && (\n          <Tooltip\n            overlay={translateWithParameters('issue.from_external_rule_engine', this.props.engine)}>\n            <div className=\"outline-badge badge-tiny-height spacer-left vertical-text-top\">\n              {this.props.engine}\n            </div>\n          </Tooltip>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport Tooltip from '../controls/Tooltip';\n\n/*::\ntype Props = {\n  active?: string,\n  children?: React.Element<*>,\n  item: string,\n  onSelect?: string => void,\n  onHover?: string => void,\n  title?: string\n};\n*/\n\nexport default class SelectListItem extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleSelect = (evt /*: SyntheticInputEvent */) => {\n    evt.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    let children = this.props.item;\n    if (this.props.children) {\n      children = this.props.children;\n    }\n    return (\n      <li>\n        <a\n          href=\"#\"\n          className={classNames({ active: this.props.active === this.props.item })}\n          onClick={this.handleSelect}\n          onMouseOver={this.handleHover}\n          onFocus={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport classNames from 'classnames';\nimport SelectListItem from './SelectListItem';\n\n/*::\ntype Props = {\n  children?: SelectListItem,\n  className?: string,\n  items: Array<string>,\n  currentItem: string,\n  onSelect: string => void\n};\n*/\n\n/*::\ntype State = {\n  active: string\n};\n*/\n\nexport default class SelectList extends React.PureComponent {\n  /*:: currentKeyScope: string; */\n  /*:: previousFilter: Function; */\n  /*:: previousKeyScope: string; */\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (\n      nextProps.currentItem !== this.props.currentItem &&\n      !nextProps.items.includes(this.state.active)\n    ) {\n      this.setState({ active: nextProps.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    key.filter = (event /*: KeyboardEvent & { target: HTMLElement } */) => {\n      const tagName = (event.target || event.srcElement).tagName;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    key.setScope(this.previousKeyScope);\n    key.deleteScope(this.currentKeyScope);\n    key.filter = this.previousFilter;\n  };\n\n  handleSelect = (item /*: string */) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item /*: string */) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state /*: State */, props /*: Props */) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state /*: State */, props /*: Props */) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child /*: Object */) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport SelectList from '../../../components/common/SelectList';\nimport SelectListItem from '../../../components/common/SelectListItem';\nimport { DropdownOverlay } from '../../../components/controls/Dropdown';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport StatusHelper from '../../../components/shared/StatusHelper';\nimport QualifierIcon from '../../../components/icons-components/QualifierIcon';\nimport TagsIcon from '../../../components/icons-components/TagsIcon';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport Avatar from '../../../components/ui/Avatar';\nimport { translate } from '../../../helpers/l10n';\nimport { fileFromPath, limitComponentName } from '../../../helpers/path';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {|\n  issue: Issue,\n  onFilter: (property: string, issue: Issue) => void,\n|};\n*/\n\nexport default class SimilarIssuesPopup extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleSelect = (property /*: string */) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      // $FlowFixMe items are filtered later\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item);\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper status={issue.status} />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {issue.assignee != null ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={issue.assigneeName || issue.assignee}\n                  size={16}\n                />\n                {issue.assigneeName || issue.assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons-components/DropdownIcon';\nimport FilterIcon from '../../../components/icons-components/FilterIcon';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {|\n  isOpen: boolean,\n  issue: Issue,\n  togglePopup: (string, boolean | void) => void,\n  onFail: Error => void,\n  onFilter: (property: string, issue: Issue) => void\n|};\n*/\n\nexport default class SimilarIssuesFilter extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleClick = (evt /*: SyntheticInputEvent */) => {\n    evt.preventDefault();\n    this.togglePopup();\n  };\n\n  handleFilter = (property /*: string */, issue /*: Issue */) => {\n    this.togglePopup(false);\n    this.props.onFilter(property, issue);\n  };\n\n  togglePopup = (open /*: boolean | void */) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <Button\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"js-issue-filter button-link issue-action issue-action-with-options\"\n            onClick={this.handleClick}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </Button>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { Link } from 'react-router';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\nimport LinkIcon from '../../../components/icons-components/LinkIcon';\nimport LocationIndex from '../../common/LocationIndex';\nimport Tooltip from '../../controls/Tooltip';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {|\n  branchLike?: { id?: string; name: string },\n  currentPopup: ?string,\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: Issue,\n  onFail: Error => void,\n  onFilter?: (property: string, issue: Issue) => void,\n  togglePopup: (string, boolean | void) => void\n|};\n*/\n\nexport default function IssueTitleBar(props /*: Props */) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount)\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <IssueMessage\n        engine={issue.externalRuleEngine}\n        message={issue.message}\n        organization={issue.organization}\n        rule={issue.rule}\n      />\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              onFail={props.onFail}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFail={props.onFail}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { map } from 'lodash';\nimport { connect } from 'react-redux';\nimport * as PropTypes from 'prop-types';\nimport Avatar from '../../../components/ui/Avatar';\nimport SelectList from '../../../components/common/SelectList';\nimport SelectListItem from '../../../components/common/SelectListItem';\nimport SearchBox from '../../../components/controls/SearchBox';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { translate } from '../../../helpers/l10n';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype User = {\n  avatar?: string,\n  email?: string,\n  login: string,\n  name: string\n};\n*/\n\n/*::\ntype Props = {\n  currentUser: User,\n  issue: Issue,\n  onFail: Error => void,\n  onSelect: string => void,\n  popupPosition?: {}\n};\n*/\n\n/*::\ntype State = {\n  query: string,\n  users: Array<User>,\n  currentUser: string\n};\n*/\n\nconst LIST_SIZE = 10;\n\nclass SetAssigneePopup extends React.PureComponent {\n  /*:: defaultUsersArray: Array<User>; */\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  static contextTypes = {\n    organizationsEnabled: PropTypes.bool\n  };\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (props.currentUser.isLoggedIn) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query /*: string */) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, this.props.onFail);\n  };\n\n  searchUsers = (query /*: string */) =>\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, this.props.onFail);\n\n  handleSearchResult = (data /*: Object */) => {\n    this.setState({\n      users: data.users,\n      currentUser: data.users.length > 0 ? data.users[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query /*: string */) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (this.context.organizationsEnabled) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span\n                  className=\"vertical-middle\"\n                  style={{ marginLeft: !user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\nimport Avatar from '../../../components/ui/Avatar';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons-components/DropdownIcon';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {\n  isOpen: boolean,\n  issue: Issue,\n  canAssign: boolean,\n  onAssign: string => void,\n  onFail: Error => void,\n  togglePopup: (string, boolean | void) => void\n};\n*/\n\nexport default class IssueAssign extends React.PureComponent {\n  /*:: props: Props; */\n\n  toggleAssign = (open /*: boolean | void */) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    return (\n      <span>\n        {issue.assignee && (\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n        )}\n        <span className=\"issue-meta-label\">\n          {issue.assignee ? issue.assigneeName || issue.assignee : translate('unassigned')}\n        </span>\n      </span>\n    );\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={\n              <SetAssigneePopup\n                issue={this.props.issue}\n                onFail={this.props.onFail}\n                onSelect={this.props.onAssign}\n              />\n            }>\n            <Button\n              className=\"button-link issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </Button>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport { parseIssueFromResponse } from '../../helpers/issues';\n/*:: import type { Issue } from './types'; */\n\nexport const updateIssue = (\n  onChange /*: Issue => void */,\n  onFail /*: Error => void */,\n  resultPromise /*: Promise<*> */,\n  oldIssue /*: ?Issue */,\n  newIssue /*: ?Issue */\n) => {\n  const optimisticUpdate = oldIssue != null && newIssue != null;\n  if (optimisticUpdate) {\n    // $FlowFixMe `newIssue` is not null, because `optimisticUpdate` is true\n    onChange(newIssue);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    error => {\n      onFail(error);\n      if (optimisticUpdate) {\n        // $FlowFixMe `oldIssue` is not null, because `optimisticUpdate` is true\n        onChange(oldIssue);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { Button, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n/*:: import type { IssueComment } from '../types'; */\n\n/*::\ntype Props = {\n  comment?: IssueComment,\n  onComment: string => void,\n  toggleComment: boolean => void,\n  placeholder: string,\n  popupPosition?: {}\n};\n*/\n\n/*::\ntype State = {\n  textComment: string\n};\n*/\n\nexport default class CommentPopup extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (evt /*: SyntheticInputEvent */) => {\n    this.setState({ textComment: evt.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (evt /*: KeyboardEvent */) => {\n    if (evt.keyCode === 13 && (evt.metaKey || evt.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(evt.keyCode)) {\n      // Arrow keys\n      evt.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment } = this.props;\n    return (\n      <DropdownOverlay>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows=\"2\"\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { updateIssue } from '../actions';\nimport Toggler from '../../../components/controls/Toggler';\nimport { Button } from '../../../components/ui/buttons';\nimport CommentPopup from '../popups/CommentPopup';\nimport { addIssueComment } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {|\n  commentPlaceholder: string,\n  currentPopup: ?string,\n  issueKey: string,\n  onChange: Issue => void,\n  onFail: Error => void,\n  toggleComment: (open?: boolean, placeholder?: string) => void\n|};\n*/\n\nexport default class IssueCommentAction extends React.PureComponent {\n  /*:: props: Props; */\n\n  addComment = (text /*: string */) => {\n    updateIssue(\n      this.props.onChange,\n      this.props.onFail,\n      addIssueComment({ issue: this.props.issueKey, text })\n    );\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <Button\n            className=\"button-link issue-action js-issue-comment\"\n            onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </Button>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport SelectList from '../../../components/common/SelectList';\nimport SelectListItem from '../../../components/common/SelectListItem';\nimport SeverityIcon from '../../../components/icons-components/SeverityIcon';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {\n  issue: Issue,\n  onSelect: string => void,\n};\n*/\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default class SetSeverityPopup extends React.PureComponent {\n  /*:: props: Props; */\n\n  render() {\n    return (\n      <DropdownOverlay>\n        <SelectList\n          currentItem={this.props.issue.severity}\n          items={SEVERITY}\n          onSelect={this.props.onSelect}>\n          {SEVERITY.map(severity => (\n            <SelectListItem item={severity} key={severity}>\n              <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n              {translate('severity', severity)}\n            </SelectListItem>\n          ))}\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\nimport { setIssueSeverity } from '../../../api/issues';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons-components/DropdownIcon';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Button } from '../../../components/ui/buttons';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {\n  canSetSeverity: boolean,\n  isOpen: boolean,\n  issue: Issue,\n  setIssueProperty: (string, string, apiCall: (Object) => Promise<*>, string) => void,\n  togglePopup: (string, boolean | void) => void\n};\n*/\n\nexport default class IssueSeverity extends React.PureComponent {\n  /*:: props: Props; */\n\n  toggleSetSeverity = (open /*: boolean | void */) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity /*: string */) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <Button\n              className=\"button-link issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </Button>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { difference, without } from 'lodash';\nimport TagsSelector from '../../../components/tags/TagsSelector';\nimport { searchIssueTags } from '../../../api/issues';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\nimport { setIssueTags } from '../../../api/issues';\nimport Toggler from '../../../components/controls/Toggler';\nimport TagsList from '../../../components/tags/TagsList';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {|\n  canSetTags: boolean,\n  isOpen: boolean,\n  issue: Issue,\n  onChange: Issue => void,\n  onFail: Error => void,\n  togglePopup: (string, boolean | void) => void\n|};\n*/\n\nexport default class IssueTags extends React.PureComponent {\n  /*:: props: Props; */\n\n  toggleSetTags = (open /*: boolean | void */) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags /*: Array<string> */) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      this.props.onFail,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue,\n      newIssue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <Button\n              className={'js-issue-edit-tags button-link issue-action issue-action-with-options'}\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </Button>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport SelectList from '../../../components/common/SelectList';\nimport SelectListItem from '../../../components/common/SelectListItem';\nimport { translate } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n\n/*::\ntype Props = {\n  transitions: Array<string>,\n  onSelect: string => void,\n};\n*/\n\nexport default class SetTransitionPopup extends React.PureComponent {\n  /*:: props: Props; */\n\n  render() {\n    const { transitions } = this.props;\n    return (\n      <DropdownOverlay>\n        <SelectList currentItem={transitions[0]} items={transitions} onSelect={this.props.onSelect}>\n          {transitions.map(transition => {\n            return (\n              <SelectListItem\n                item={transition}\n                key={transition}\n                title={translate('issue.transition', transition, 'description')}>\n                {translate('issue.transition', transition)}\n              </SelectListItem>\n            );\n          })}\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\nimport { setIssueTransition } from '../../../api/issues';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons-components/DropdownIcon';\nimport StatusHelper from '../../../components/shared/StatusHelper';\nimport { Button } from '../../../components/ui/buttons';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {\n  hasTransitions: boolean,\n  isOpen: boolean,\n  issue: Issue,\n  onChange: Issue => void,\n  onFail: Error => void,\n  togglePopup: (string, boolean | void) => void\n};\n*/\n\nexport default class IssueTransition extends React.PureComponent {\n  /*:: props: Props; */\n\n  setTransition = (transition /*: string */) => {\n    updateIssue(\n      this.props.onChange,\n      this.props.onFail,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open /*: boolean | void */) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup onSelect={this.setTransition} transitions={issue.transitions} />\n            }>\n            <Button\n              className=\"button-link issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </Button>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport SelectList from '../../../components/common/SelectList';\nimport SelectListItem from '../../../components/common/SelectListItem';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {\n  issue: Issue,\n  onSelect: string => void,\n};\n*/\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default class SetTypePopup extends React.PureComponent {\n  /*:: props: Props; */\n\n  render() {\n    return (\n      <DropdownOverlay>\n        <SelectList\n          currentItem={this.props.issue.type}\n          items={TYPES}\n          onSelect={this.props.onSelect}>\n          {TYPES.map(type => (\n            <SelectListItem item={type} key={type}>\n              <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n              {translate('issue.type', type)}\n            </SelectListItem>\n          ))}\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport SetTypePopup from '../popups/SetTypePopup';\nimport { setIssueType } from '../../../api/issues';\nimport Toggler from '../../../components/controls/Toggler';\nimport DropdownIcon from '../../../components/icons-components/DropdownIcon';\nimport { Button } from '../../../components/ui/buttons';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {\n  canSetSeverity: boolean,\n  isOpen: boolean,\n  issue: Issue,\n  setIssueProperty: (string, string, apiCall: (Object) => Promise<*>, string) => void,\n  togglePopup: (string, boolean | void) => void\n};\n*/\n\nexport default class IssueType extends React.PureComponent {\n  /*:: props: Props; */\n\n  toggleSetType = (open /*: boolean | void */) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type /*: string */) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <Button\n              className=\"button-link issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </Button>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\nimport { updateIssue } from '../actions';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n/*:: import type { Issue } from '../types'; */\n\n/*::\ntype Props = {\n  issue: Issue,\n  currentPopup: ?string,\n  onAssign: string => void,\n  onChange: Issue => void,\n  onFail: Error => void,\n  togglePopup: (string, boolean | void) => void\n};\n*/\n\n/*::\ntype State = {\n  commentPlaceholder: string\n};\n*/\n\nexport default class IssueActionsBar extends React.PureComponent {\n  /*:: props: Props; */\n  state /*: State */ = {\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property /*: string */,\n    popup /*: string */,\n    apiCall /*: Object => Promise<*> */,\n    value /*: string */\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        this.props.onFail,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open /*: boolean | void */, placeholder /*: string | void */) => {\n    this.setState({ commentPlaceholder: placeholder || '' });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue /*: Issue */) => {\n    this.props.onChange(issue);\n    if (['FALSE-POSITIVE', 'WONTFIX'].includes(issue.resolution)) {\n      this.toggleComment(true, translate('issue.comment.tell_why'));\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n\n    return (\n      <table className=\"issue-table\">\n        <tbody>\n          <tr>\n            <td>\n              <ul className=\"issue-meta-list\">\n                <li className=\"issue-meta\">\n                  <IssueType\n                    isOpen={this.props.currentPopup === 'set-type' && canSetSeverity}\n                    issue={issue}\n                    canSetSeverity={canSetSeverity}\n                    togglePopup={this.props.togglePopup}\n                    setIssueProperty={this.setIssueProperty}\n                  />\n                </li>\n                <li className=\"issue-meta\">\n                  <IssueSeverity\n                    isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                    issue={issue}\n                    canSetSeverity={canSetSeverity}\n                    togglePopup={this.props.togglePopup}\n                    setIssueProperty={this.setIssueProperty}\n                  />\n                </li>\n                <li className=\"issue-meta\">\n                  <IssueTransition\n                    isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n                    issue={issue}\n                    hasTransitions={hasTransitions}\n                    onChange={this.handleTransition}\n                    onFail={this.props.onFail}\n                    togglePopup={this.props.togglePopup}\n                  />\n                </li>\n                <li className=\"issue-meta\">\n                  <IssueAssign\n                    isOpen={this.props.currentPopup === 'assign' && canAssign}\n                    issue={issue}\n                    canAssign={canAssign}\n                    onAssign={this.props.onAssign}\n                    onFail={this.props.onFail}\n                    togglePopup={this.props.togglePopup}\n                  />\n                </li>\n                {issue.effort && (\n                  <li className=\"issue-meta\">\n                    <span className=\"issue-meta-label\">\n                      {translateWithParameters('issue.x_effort', issue.effort)}\n                    </span>\n                  </li>\n                )}\n                {canComment && (\n                  <IssueCommentAction\n                    commentPlaceholder={this.state.commentPlaceholder}\n                    currentPopup={this.props.currentPopup}\n                    issueKey={issue.key}\n                    onChange={this.props.onChange}\n                    onFail={this.props.onFail}\n                    toggleComment={this.toggleComment}\n                  />\n                )}\n              </ul>\n            </td>\n            <td className=\"issue-table-meta-cell\">\n              <ul className=\"list-inline\">\n                <li className=\"issue-meta js-issue-tags\">\n                  <IssueTags\n                    isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n                    canSetTags={canSetTags}\n                    issue={issue}\n                    onChange={this.props.onChange}\n                    onFail={this.props.onFail}\n                    togglePopup={this.props.togglePopup}\n                  />\n                </li>\n              </ul>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n\n/*::\ntype Props = {\n  onDelete: () => void,\n  popupPosition?: {}\n};\n*/\n\nexport default function CommentDeletePopup(props /*: Props */) {\n  return (\n    <DropdownOverlay>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={props.onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Avatar from '../../../components/ui/Avatar';\nimport Toggler from '../../../components/controls/Toggler';\nimport EditIcon from '../../../components/icons-components/EditIcon';\nimport { EditButton, DeleteButton } from '../../../components/ui/buttons';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\nimport DateFromNow from '../../../components/intl/DateFromNow';\n/*:: import type { IssueComment } from '../types'; */\n\n/*::\ntype Props = {\n  comment: IssueComment,\n  onDelete: string => void,\n  onEdit: (string, string) => void\n};\n*/\n\n/*::\ntype State = {\n  openPopup: string\n};\n*/\n\nexport default class IssueCommentLine extends React.PureComponent {\n  /*:: props: Props; */\n  state /*: State */ = {\n    openPopup: ''\n  };\n\n  handleEdit = (text /*: string */) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName /*: string */, force /*: ?boolean */) => {\n    this.setState((prevState /*: State */) => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force /*: ?boolean */) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force /*: ?boolean */) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={comment.authorName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={comment.authorName || comment.author}\n            size={16}\n          />\n          {comment.authorName || comment.author}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: comment.htmlText }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                className=\"display-inline-block\"\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                className=\"display-inline-block\"\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport IssueTitleBar from './components/IssueTitleBar';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport { updateIssue } from './actions';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\n/*:: import type { Issue } from './types'; */\n\n/*::\ntype Props = {|\n  branchLike?: { id?: string; name: string },\n  checked?: boolean,\n  currentPopup: ?string,\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: Issue,\n  onAssign: string => void,\n  onChange: Issue => void,\n  onCheck?: (issue: string, event: Event) => void,\n  onClick: string => void,\n  onFail: Error => void,\n  onFilter?: (property: string, issue: Issue) => void,\n  selected: boolean,\n  togglePopup: (string, boolean | void) => void\n|};\n*/\n\nexport default class IssueView extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleCheck = (event /*: Event */) => {\n    event.preventDefault();\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key, event);\n    }\n  };\n\n  handleClick = (event /*: Event & { target: HTMLElement } */) => {\n    if (!isClickable(event.target) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment /*: string */, text /*: string */) => {\n    updateIssue(this.props.onChange, this.props.onFail, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment /*: string */) => {\n    updateIssue(this.props.onChange, this.props.onFail, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFail={this.props.onFail}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          onFail={this.props.onFail}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments &&\n          issue.comments.length > 0 && (\n            <div className=\"issue-comments\">\n              {issue.comments.map(comment => (\n                <IssueCommentLine\n                  comment={comment}\n                  key={comment.key}\n                  onDelete={this.deleteComment}\n                  onEdit={this.editComment}\n                />\n              ))}\n            </div>\n          )}\n        {hasCheckbox && (\n          <a className=\"js-toggle issue-checkbox-container\" href=\"#\" onClick={this.handleCheck}>\n            <i\n              className={classNames('issue-checkbox', 'icon-checkbox', {\n                'icon-checkbox-checked': this.props.checked\n              })}\n            />\n          </a>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node /*: any */) {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentNode);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport key from 'keymaster';\nimport PropTypes from 'prop-types';\nimport IssueView from './IssueView';\nimport { updateIssue } from './actions';\nimport { onFail } from '../../store/rootActions';\nimport { setIssueAssignee } from '../../api/issues';\n/*:: import type { Issue as IssueType } from './types'; */\nimport './Issue.css';\n\n/*::\ntype Props = {|\n  branchLike?: { id?: string; name: string },\n  checked?: boolean,\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: IssueType,\n  onChange: IssueType => void,\n  onCheck?: (issue: string, event: Event) => void,\n  onClick: string => void,\n  onFilter?: (property: string, issue: IssueType) => void,\n  onPopupToggle: (issue: string, popupName: string, open: ?boolean) => void,\n  openPopup: ?string,\n  selected: boolean\n|};\n*/\n\nexport default class Issue extends React.PureComponent {\n  /*:: props: Props; */\n\n  static contextTypes = {\n    store: PropTypes.object\n  };\n\n  static defaultProps = {\n    displayLocationsCount: true,\n    displayLocationsLink: true,\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps /*: Props */) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps /*: Props */) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', (event /*: Event*/) => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key, event);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName /*: string */, open /*: ?boolean */) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login /*: string */) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(\n        this.props.onChange,\n        this.handleFail,\n        setIssueAssignee({ issue: issue.key, assignee: login })\n      );\n    }\n    this.togglePopup('assign', false);\n  };\n\n  handleFail = (error /*: Error */) => {\n    onFail(this.context.store.dispatch)(error);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFail={this.handleFail}\n        onFilter={this.props.onFilter}\n        onChange={this.props.onChange}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport { RATING_COLORS } from '../../helpers/constants';\nimport './ColorBoxLegend.css';\n\ninterface Props {\n  className?: string;\n}\n\nexport default function ColorRatingsLegend({ className }: Props) {\n  return (\n    <div className={classNames('color-box-legend', className)}>\n      {[1, 2, 3, 4, 5].map(rating => (\n        <div key={rating}>\n          <span\n            className=\"color-box-legend-rect\"\n            style={{ borderColor: RATING_COLORS[rating - 1] }}>\n            <span\n              className=\"color-box-legend-rect-inner\"\n              style={{ backgroundColor: RATING_COLORS[rating - 1] }}\n            />\n          </span>\n          {formatMeasure(rating, 'RATING')}\n        </div>\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { AutoSizer } from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { Link } from 'react-router';\nimport { min, max } from 'd3-array';\nimport { scaleLinear, ScaleLinear } from 'd3-scale';\nimport { zoom, zoomIdentity } from 'd3-zoom';\nimport { event, select } from 'd3-selection';\nimport { sortBy, uniq } from 'lodash';\nimport Tooltip from '../controls/Tooltip';\nimport { translate } from '../../helpers/l10n';\nimport './BubbleChart.css';\n\nconst TICKS_COUNT = 5;\n\ninterface BubbleProps {\n  color?: string;\n  link?: string;\n  onClick?: (link?: string) => void;\n  r: number;\n  scale: number;\n  tooltip?: string | React.ReactNode;\n  x: number;\n  y: number;\n}\n\nexport class Bubble extends React.PureComponent<BubbleProps> {\n  handleClick = (event: React.MouseEvent<SVGCircleElement>) => {\n    if (this.props.onClick) {\n      event.stopPropagation();\n      event.preventDefault();\n      this.props.onClick(this.props.link);\n    }\n  };\n\n  render() {\n    let circle = (\n      <circle\n        className=\"bubble-chart-bubble\"\n        onClick={this.props.onClick ? this.handleClick : undefined}\n        r={this.props.r}\n        style={{ fill: this.props.color, stroke: this.props.color }}\n        transform={`translate(${this.props.x}, ${this.props.y}) scale(${this.props.scale})`}\n      />\n    );\n\n    if (this.props.link && !this.props.onClick) {\n      circle = <Link to={this.props.link}>{circle}</Link>;\n    }\n\n    return (\n      <Tooltip overlay={this.props.tooltip || undefined}>\n        <g>{circle}</g>\n      </Tooltip>\n    );\n  }\n}\n\ninterface Item {\n  color?: string;\n  key?: string;\n  link?: any;\n  size: number;\n  tooltip?: React.ReactNode;\n  x: number;\n  y: number;\n}\n\ninterface Props {\n  displayXGrid?: boolean;\n  displayXTicks?: boolean;\n  displayYGrid?: boolean;\n  displayYTicks?: boolean;\n  formatXTick?: (tick: number) => string;\n  formatYTick?: (tick: number) => string;\n  height: number;\n  items: Item[];\n  onBubbleClick?: (link?: string) => void;\n  padding?: [number, number, number, number];\n  sizeDomain?: [number, number];\n  sizeRange?: [number, number];\n  xDomain?: [number, number];\n  yDomain?: [number, number];\n}\n\ninterface State {\n  transform: { x: number; y: number; k: number };\n}\n\ntype Scale = ScaleLinear<number, number>;\n\nexport default class BubbleChart extends React.Component<Props, State> {\n  node: SVGSVGElement | null = null;\n  selection: any = null;\n  transform: any = null;\n  zoom: any = null;\n\n  static defaultProps = {\n    displayXGrid: true,\n    displayXTicks: true,\n    displayYGrid: true,\n    displayYTicks: true,\n    sizeRange: [5, 45]\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { transform: { x: 0, y: 0, k: 1 } };\n  }\n\n  componentDidUpdate() {\n    if (this.zoom && this.node) {\n      const rect = this.node.getBoundingClientRect();\n      this.zoom.translateExtent([[0, 0], [rect.width, rect.height]]);\n    }\n  }\n\n  boundNode = (node: SVGSVGElement) => {\n    this.node = node;\n    this.zoom = zoom()\n      .scaleExtent([1, 10])\n      .on('zoom', this.zoomed);\n    this.selection = select(this.node).call(this.zoom);\n  };\n\n  zoomed = () => {\n    this.setState({ transform: event.transform });\n  };\n\n  resetZoom = (event: React.MouseEvent<Link>) => {\n    event.stopPropagation();\n    event.preventDefault();\n    select(this.node).call(this.zoom.transform, zoomIdentity);\n  };\n\n  get formatXTick() {\n    return this.props.formatXTick || ((d: number) => String(d));\n  }\n\n  get formatYTick() {\n    return this.props.formatYTick || ((d: number) => String(d));\n  }\n\n  get padding() {\n    return this.props.padding || [10, 10, 10, 10];\n  }\n\n  getXRange(xScale: Scale, sizeScale: Scale, availableWidth: number) {\n    const minX = min(this.props.items, d => xScale(d.x) - sizeScale(d.size)) || 0;\n    const maxX = max(this.props.items, d => xScale(d.x) + sizeScale(d.size)) || 0;\n    const dMinX = minX < 0 ? xScale.range()[0] - minX : xScale.range()[0];\n    const dMaxX = maxX > xScale.range()[1] ? maxX - xScale.range()[1] : 0;\n    return [dMinX, availableWidth - dMaxX];\n  }\n\n  getYRange(yScale: Scale, sizeScale: Scale, availableHeight: number) {\n    const minY = min(this.props.items, d => yScale(d.y) - sizeScale(d.size)) || 0;\n    const maxY = max(this.props.items, d => yScale(d.y) + sizeScale(d.size)) || 0;\n    const dMinY = minY < 0 ? yScale.range()[1] - minY : yScale.range()[1];\n    const dMaxY = maxY > yScale.range()[0] ? maxY - yScale.range()[0] : 0;\n    return [availableHeight - dMaxY, dMinY];\n  }\n\n  getTicks(scale: Scale, format: (d: number) => string) {\n    const zoom = Math.ceil(this.state.transform.k);\n    const ticks = scale.ticks(TICKS_COUNT * zoom).map(tick => format(tick));\n    const uniqueTicksCount = uniq(ticks).length;\n    const ticksCount =\n      uniqueTicksCount < TICKS_COUNT * zoom ? uniqueTicksCount - 1 : TICKS_COUNT * zoom;\n    return scale.ticks(ticksCount);\n  }\n\n  getZoomLevelLabel = () => Math.floor(this.state.transform.k * 100) + '%';\n\n  renderXGrid = (ticks: number[], xScale: Scale, yScale: Scale) => {\n    if (!this.props.displayXGrid) {\n      return null;\n    }\n\n    const { transform } = this.state;\n    const lines = ticks.map((tick, index) => {\n      const x = xScale(tick);\n      const y1 = yScale.range()[0];\n      const y2 = yScale.range()[1];\n      return (\n        <line\n          className=\"bubble-chart-grid\"\n          key={index}\n          x1={x * transform.k + transform.x}\n          x2={x * transform.k + transform.x}\n          y1={y1 * transform.k}\n          y2={transform.k > 1 ? 0 : y2}\n        />\n      );\n    });\n\n    return <g>{lines}</g>;\n  };\n\n  renderYGrid = (ticks: number[], xScale: Scale, yScale: Scale) => {\n    if (!this.props.displayYGrid) {\n      return null;\n    }\n\n    const { transform } = this.state;\n    const lines = ticks.map((tick, index) => {\n      const y = yScale(tick);\n      const x1 = xScale.range()[0];\n      const x2 = xScale.range()[1];\n      return (\n        <line\n          className=\"bubble-chart-grid\"\n          key={index}\n          x1={transform.k > 1 ? 0 : x1}\n          x2={x2 * transform.k}\n          y1={y * transform.k + transform.y}\n          y2={y * transform.k + transform.y}\n        />\n      );\n    });\n\n    return <g>{lines}</g>;\n  };\n\n  renderXTicks = (xTicks: number[], xScale: Scale, yScale: Scale) => {\n    if (!this.props.displayXTicks) {\n      return null;\n    }\n\n    const { transform } = this.state;\n    const ticks = xTicks.map((tick, index) => {\n      const x = xScale(tick) * transform.k + transform.x;\n      const y = yScale.range()[0];\n      const innerText = this.formatXTick(tick);\n      return x > 0 ? (\n        <text className=\"bubble-chart-tick\" dy=\"1.5em\" key={index} x={x} y={y}>\n          {innerText}\n        </text>\n      ) : null;\n    });\n\n    return <g>{ticks}</g>;\n  };\n\n  renderYTicks = (yTicks: number[], xScale: Scale, yScale: Scale) => {\n    if (!this.props.displayYTicks) {\n      return null;\n    }\n\n    const { transform } = this.state;\n    const ticks = yTicks.map((tick, index) => {\n      const x = xScale.range()[0];\n      const y = yScale(tick) * transform.k + transform.y;\n      const innerText = this.formatYTick(tick);\n      return y > 0 && y < this.props.height - 80 ? (\n        <text\n          className=\"bubble-chart-tick bubble-chart-tick-y\"\n          dx=\"-0.5em\"\n          dy=\"0.3em\"\n          key={index}\n          x={x}\n          y={y}>\n          {innerText}\n        </text>\n      ) : null;\n    });\n\n    return <g>{ticks}</g>;\n  };\n\n  renderChart = (width: number) => {\n    const { transform } = this.state;\n    const availableWidth = width - this.padding[1] - this.padding[3];\n    const availableHeight = this.props.height - this.padding[0] - this.padding[2];\n\n    const xScale = scaleLinear()\n      .domain(this.props.xDomain || [0, max(this.props.items, d => d.x) || 0])\n      .range([0, availableWidth])\n      .nice();\n    const yScale = scaleLinear()\n      .domain(this.props.yDomain || [0, max(this.props.items, d => d.y) || 0])\n      .range([availableHeight, 0])\n      .nice();\n    const sizeScale = scaleLinear()\n      .domain(this.props.sizeDomain || [0, max(this.props.items, d => d.size) || 0])\n      .range(this.props.sizeRange || []);\n\n    const xScaleOriginal = xScale.copy();\n    const yScaleOriginal = yScale.copy();\n\n    xScale.range(this.getXRange(xScale, sizeScale, availableWidth));\n    yScale.range(this.getYRange(yScale, sizeScale, availableHeight));\n\n    const bubbles = sortBy(this.props.items, b => -b.size).map((item, index) => {\n      return (\n        <Bubble\n          color={item.color}\n          key={item.key || index}\n          link={item.link}\n          onClick={this.props.onBubbleClick}\n          r={sizeScale(item.size)}\n          scale={1 / transform.k}\n          tooltip={item.tooltip}\n          x={xScale(item.x)}\n          y={yScale(item.y)}\n        />\n      );\n    });\n\n    const xTicks = this.getTicks(xScale, this.formatXTick);\n    const yTicks = this.getTicks(yScale, this.formatYTick);\n\n    return (\n      <svg\n        className={classNames('bubble-chart')}\n        height={this.props.height}\n        ref={this.boundNode}\n        width={width}>\n        <defs>\n          <clipPath id=\"graph-region\">\n            <rect\n              // Extend clip by 2 pixels: one for clipRect border, and one for Bubble borders\n              height={this.props.height - this.padding[0] - this.padding[2] + 4}\n              width={width + 4}\n              x={-2}\n              y={-2}\n            />\n          </clipPath>\n        </defs>\n        <g transform={`translate(${this.padding[3]}, ${this.padding[0]})`}>\n          <g clipPath=\"url(#graph-region)\">\n            {this.renderXGrid(xTicks, xScale, yScale)}\n            {this.renderYGrid(yTicks, xScale, yScale)}\n            <g transform={`translate(${transform.x}, ${transform.y}) scale(${transform.k})`}>\n              {bubbles}\n            </g>\n          </g>\n          {this.renderXTicks(xTicks, xScale, yScaleOriginal)}\n          {this.renderYTicks(yTicks, xScaleOriginal, yScale)}\n        </g>\n      </svg>\n    );\n  };\n\n  render() {\n    return (\n      <div>\n        <div className=\"bubble-chart-zoom\">\n          <Tooltip overlay={translate('component_measures.bubble_chart.zoom_level')}>\n            <Link\n              className={classNames('outline-badge', { active: this.state.transform.k > 1 })}\n              onClick={this.resetZoom}\n              to=\"#\">\n              {this.getZoomLevelLabel()}\n            </Link>\n          </Tooltip>\n        </div>\n        <AutoSizer disableHeight={true}>{size => this.renderChart(size.width)}</AutoSizer>\n      </div>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ColorBoxLegend.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ColorBoxLegend.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ColorBoxLegend.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function FilterIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M13.957 2.333a.536.536 0 0 1-.12.596l-4.2 4.202v6.323a.552.552 0 0 1-.333.503.632.632 0 0 1-.213.043.51.51 0 0 1-.384-.162l-2.181-2.182a.542.542 0 0 1-.162-.383V7.13L2.162 2.929a.536.536 0 0 1-.12-.596A.552.552 0 0 1 2.547 2h10.908c.222 0 .418.137.503.333z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".bubble-chart text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.bubble-chart-bubble{fill:#4b9fd5;fill-opacity:.2;stroke:#4b9fd5;cursor:pointer;transition:fill-opacity .2s ease}.bubble-chart-bubble:hover{fill-opacity:.8}.bubble-chart-grid{shape-rendering:crispedges;stroke:#eee}.bubble-chart-tick{fill:#777;font-size:12px;text-anchor:middle}.bubble-chart-tick-y{text-anchor:end}.bubble-chart-zoom{position:absolute;right:20px;top:20px;z-index:3}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BubbleChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BubbleChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BubbleChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".color-box-legend{display:flex;justify-content:center}.color-box-legend>:not(:first-child){margin-left:24px}.color-box-legend .color-box-legend-rect{display:inline-block;margin-top:1px;margin-right:4px;border:1px solid}.color-box-legend .color-box-legend-rect-inner{display:block;width:8px;height:8px;opacity:.2}.color-box-legend.color-box-full .color-box-legend-rect-inner{opacity:1}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow-x:auto;overflow-y:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code{background-color:#eaddb2!important}.source-line-last .source-line-code{padding-bottom:160px}.source-viewer pre{height:18px;padding:0}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-meta[role=button]{cursor:pointer}.source-meta+.source-meta{border-left:1px solid #f3f3f3}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#777;text-align:right}.source-line-number:before{content:attr(data-line-number)}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3}.source-line-issues-counter{position:absolute;top:-1px;right:-1px;line-height:8px;font-size:8px}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-duplications-expanded .source-line-duplications,.source-line-duplications-extra{display:none}.source-duplications-expanded .source-line-duplications-extra{display:table-cell}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-scm-inner:before{content:attr(data-author)}.source-line-bar{width:5px;height:18px}.source-line-covered{background-color:#0a0!important}.source-line-uncovered{background-color:#d4333f!important}.source-line-partially-covered{background-color:#ed7d20!important;background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header:after,.source-viewer-header:before{display:table;content:\\\"\\\";line-height:0}.source-viewer-header:after{clear:both}.source-viewer-header-bar+.source-viewer-header-bar{border-top:1px solid #e6e6e6}.source-viewer-header-component{float:left;padding-top:4px}.source-viewer-header-component-project{color:#777;font-size:12px}.source-viewer-header-component-name{font-weight:600}.source-viewer-header-favorite{position:relative;top:-2px;margin-left:4px;border-bottom:none}.source-viewer-header-measures{float:right}.source-viewer-header-measures-scope{position:relative;float:left}.source-viewer-header-measure{display:inline-block;vertical-align:middle;padding:3px 0;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:25px}.source-viewer-header-measure-label{display:block;margin-top:4px;line-height:12px;color:#777;font-size:12px}.source-viewer-header-measure-value{display:block;line-height:18px;color:#444;font-size:16px}.source-viewer-header-actions{float:right;display:block;margin-left:25px;padding:8px 5px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-measures-overlay{padding:20px 10px;background-color:#f3f3f3}.source-viewer-measures-overlay,.source-viewer-measures-overlay .modal-foot{width:1100px;left:50%;right:auto;margin-left:-550px}.source-viewer-measures-component{float:none;margin:0 10px 30px}.source-viewer-measures,.source-viewer-measures-modal{background-color:#f3f3f3}.source-viewer-measures{margin:0 -10px}.source-viewer-measures:after,.source-viewer-measures:before{display:table;content:\\\"\\\";line-height:0}.source-viewer-measures:after{clear:both}.source-viewer-measures+.source-viewer-measures{margin-top:40px}.source-viewer-measures-secondary .source-viewer-measures-card{background-color:hsla(0,0%,100%,.6)}.source-viewer-measures-section{float:left;width:25%;margin:-20px 0}.source-viewer-measures-section-big{width:50%}.source-viewer-measures-section-full{width:100%}.source-viewer-measures-section+.source-viewer-measures-section-full{margin-top:20px}.source-viewer-measures-card{margin:20px 10px;padding:10px;border:1px solid #e6e6e6;background-color:#fff}.source-viewer-measures-card-overflow{overflow:auto}.source-viewer-measures-card-fixed-height{max-height:36vh;overflow-y:scroll}.source-viewer-tests-list{width:100%;font-size:13px}.source-viewer-test-covered-lines,.source-viewer-test-duration,.source-viewer-test-status{width:1px}.source-viewer-test-covered-lines,.source-viewer-test-covered-name,.source-viewer-test-duration,.source-viewer-test-status{vertical-align:middle;padding:3px}.source-viewer-test-name{padding-left:10px;word-break:break-all}.source-viewer-test-covered-lines{text-align:right}.source-viewer-issue-location{max-width:200px;margin-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-viewer-flow-location+.source-viewer-flow-location{z-index:504}.source-line-issue-locations{float:right;margin-right:-10px}.source-line-issue-locations:empty{display:none}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.source-viewer-bubble-popup{font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:13px;text-align:left}.issue-location{display:inline-block;vertical-align:top;line-height:18px;height:18px;box-sizing:border-box;background-color:#ffeaea;transition:background-color .3s ease}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures+.measures{margin-top:15px;padding-top:15px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:70px;margin-right:20px;text-align:center}.measures-chart .rating{font-size:32px}.measure{line-height:1.3333333333333}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:2px;font-size:15px;font-weight:400}.measure-big .measure-value,.measure-big .rating{font-size:22px}.measure-big+.measure-big{margin-left:20px}.measure-one-line:after,.measure-one-line:before{display:table;content:\\\"\\\";line-height:0}.measure-one-line:after{clear:both}.measure-one-line .measure-name{float:left}.measure-one-line .measure-value{float:right}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{position:absolute;bottom:calc(100% + 4px);left:0}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LocationMessage.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LocationMessage.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LocationMessage.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#ffeaea;box-shadow:inset 0 0 0 1px #ffeaea;transition:all .3s ease,border 0 ease}.issue.selected{box-shadow:none;border:1px solid #dd4040!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-table{width:100%}.issue-table td{vertical-align:top}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-table-meta-cell{width:1px;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:10px;padding-right:10px;line-height:1.5;font-size:13px;font-weight:600;text-overflow:ellipsis;overflow:hidden}.issue-message .button-link{height:16px}.issue-rule{vertical-align:top;margin-top:2px;padding:0 3px;opacity:.5}.issue-rule,.issue-rule:hover{background:rgba(75,159,213,.3)}.issue-meta-list{display:flex;align-items:center;padding-left:10px}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:10px;padding-right:10px;font-size:12px}.issue-comment{display:table;width:100%}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{display:table-cell;vertical-align:top;width:1px;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{padding-right:5px;line-height:18px;line-height:1.5;outline:none;word-break:break-all}.issue-comment-actions,.issue-comment-text{display:table-cell;vertical-align:top;padding-left:5px}.issue-comment-actions{width:1px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:block}.issue-checkbox-container{display:none;position:absolute;width:29px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue-checkbox{position:absolute;top:50%;left:50%;margin:-8px 0 0 -8px}.issue:not(.selected) .location-index{background-color:#ccc}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Issue.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Issue.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Issue.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#bc5e5e}.location-index.muted{background-color:#ccc}.location-index.is-leading{position:absolute;margin:1px 0 0 -4px!important;transform:translateX(-100%)}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#bc5e5e}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px;margin-left:4px;margin-right:4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LocationIndex.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LocationIndex.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LocationIndex.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".domain-measures-value{margin-right:4px}.domain-measures-value span{line-height:16px}.domain-measures-value .rating{margin-left:-4px;margin-right:-4px}.domain-measures-leak{background-color:#fbf3d5;border:1px solid #eae3c7;padding:4px 6px}.facet .domain-measures-leak{padding:3px 8px;margin:-5px}.domain-measures-leak-header{display:inline-block;background-color:#fbf3d5;border:1px solid #eae3c7;padding:4px 10px;white-space:nowrap}.measure-details-page-actions{display:inline-block;text-align:right}.measure-details-page-actions .spinner{vertical-align:text-bottom}.measure-details-metric,.measure-details-primary{display:flex;align-items:center}.measure-details-primary{flex-wrap:nowrap;justify-content:space-between}.measure-details-primary-actions{display:flex;align-items:center}.measure-details-secondary{display:inline-block;width:260px;margin-top:4px}.measure-details-component-row.selected{background-color:#cae3f2!important}.measure-details-component-cell{max-width:0}.measure-details-component-cell>div{max-width:100%}.domain-measures-value .rating,.measure-details-value .rating{width:18px;height:18px;line-height:18px;margin-top:-2px;margin-bottom:-2px;font-size:12px}.domain-measures-value .level{height:18px;line-height:18px;border-radius:18px;margin-top:-2px;margin-bottom:-2px;margin-right:-4px}.measure-details-treemap-legend{margin-right:-4px}.measure-details-treemap-legend.color-box-legend{margin-right:0}.measure-details-viewer .issue-list{min-width:600px;width:800px}@media (max-width:1320px){.measure-details-viewer .issue-list{width:calc(60vw - 80px)}}.measure-view-select{width:50px}.measure-view-select .Select-menu-outer{width:100px;border-top-right-radius:4px}.measure-breadcrumbs{display:inline-block;max-width:60%}.measure-breadcrumbs,.measure-favorite svg{vertical-align:middle}.measure-overview-bubble-chart{position:relative;border:1px solid #e6e6e6;background-color:#fff}.measure-overview-bubble-chart-content{padding:0;padding-left:60px}.measure-overview-bubble-chart-header{display:flex;align-items:center;padding:16px;border-bottom:1px solid #e6e6e6}.measure-overview-bubble-chart-title{position:absolute}.measure-overview-bubble-chart-legend{display:flex;flex-direction:column;text-align:center;flex-grow:1}.measure-overview-bubble-chart-footer{padding:15px 60px;border-top:1px solid #e6e6e6;text-align:center;font-size:12px;line-height:1.4}.measure-overview-bubble-chart-axis{color:#777;font-size:12px}.measure-overview-bubble-chart-axis.x{position:relative;top:-8px;padding-bottom:8px;text-align:center}.measure-overview-bubble-chart-axis.y{position:absolute;top:50%;left:30px;transform:rotate(-90deg) translateX(-50%);transform-origin:left}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sonar-d3 .treemap-container{position:relative}.sonar-d3 .treemap-cell{position:absolute;border-right:1px solid #fff;border-bottom:1px solid #fff;box-sizing:border-box;text-align:center}.sonar-d3 .treemap-cell:focus{outline:none}.sonar-d3 .treemap-inner{display:inline-flex;vertical-align:middle;align-items:center;justify-content:center;flex-wrap:wrap;padding:0 4px;box-sizing:border-box;line-height:1.2}.sonar-d3 .treemap-inner .treemap-icon{flex-shrink:0}.sonar-d3 .treemap-inner .treemap-icon svg{margin-top:2px}.sonar-d3 .treemap-inner .treemap-text{flex-shrink:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left}.sonar-d3 .treemap-link{position:absolute;z-index:2;top:5px;right:5px;line-height:14px;font-size:12px;border-bottom:none}.sonar-d3 .treemap-link:hover{color:#d1eafb}.sonar-d3 .treemap-link i,.sonar-d3 .treemap-link i:before{vertical-align:top;font-size:inherit;line-height:inherit}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TreeMap.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TreeMap.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TreeMap.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".gradient-legend-na,.gradient-legend-text{text-anchor:middle;fill:#777;font-size:10px}.gradient-legend-text:first-of-type{text-anchor:start}.gradient-legend-text:last-of-type{text-anchor:end}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ColorGradientLegend.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ColorGradientLegend.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ColorGradientLegend.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { collapsePath, limitComponentName } from '../../../helpers/path';\n/*:: import type { Component } from '../types'; */\n\n/*:: type Props = {\n  canBrowse: boolean,\n  component: Component,\n  isLast: boolean,\n  handleSelect: string => void\n}; */\n\nexport default class Breadcrumb extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleClick = (e /*: Event & { target: HTMLElement } */) => {\n    e.preventDefault();\n    e.target.blur();\n    this.props.handleSelect(this.props.component.key);\n  };\n\n  render() {\n    const { canBrowse, component, isLast } = this.props;\n    const isPath = component.qualifier === 'DIR';\n    const componentName = isPath\n      ? collapsePath(component.name, 15)\n      : limitComponentName(component.name);\n    const breadcrumbItem = canBrowse ? (\n      <a href=\"#\" onClick={this.handleClick}>\n        {componentName}\n      </a>\n    ) : (\n      <span>{componentName}</span>\n    );\n\n    return (\n      <span>\n        <Tooltip overlay={component.name !== componentName ? component.name : undefined}>\n          {breadcrumbItem}\n        </Tooltip>\n        {!isLast && <span className=\"slash-separator\" />}\n      </span>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport key from 'keymaster';\nimport Breadcrumb from './Breadcrumb';\nimport { getBreadcrumbs } from '../../../api/components';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n/*:: import type { Component } from '../types'; */\n\n/*:: type Props = {|\n  backToFirst: boolean,\n  branchLike?: { id?: string, name: string },\n  className?: string,\n  component: Component,\n  handleSelect: string => void,\n  rootComponent: Component\n|}; */\n\n/*:: type State = {\n  breadcrumbs: Array<Component>\n}; */\n\nexport default class Breadcrumbs extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    breadcrumbs: []\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchBreadcrumbs(this.props);\n    this.attachShortcuts();\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (this.props.component !== nextProps.component) {\n      this.fetchBreadcrumbs(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    this.detachShortcuts();\n  }\n\n  attachShortcuts() {\n    key('left', 'measures-files', () => {\n      const { breadcrumbs } = this.state;\n      if (breadcrumbs.length > 1) {\n        const idx = this.props.backToFirst ? 0 : breadcrumbs.length - 2;\n        this.props.handleSelect(breadcrumbs[idx].key);\n      }\n      return false;\n    });\n  }\n\n  detachShortcuts() {\n    key.unbind('left', 'measures-files');\n  }\n\n  fetchBreadcrumbs = ({ branchLike, component, rootComponent } /*: Props */) => {\n    const isRoot = component.key === rootComponent.key;\n    if (isRoot) {\n      if (this.mounted) {\n        this.setState({ breadcrumbs: [component] });\n      }\n      return;\n    }\n    getBreadcrumbs({ component: component.key, ...getBranchLikeQuery(branchLike) }).then(\n      breadcrumbs => {\n        if (this.mounted) {\n          this.setState({ breadcrumbs });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { breadcrumbs } = this.state;\n    if (breadcrumbs.length <= 0) {\n      return null;\n    }\n    const lastItem = breadcrumbs[breadcrumbs.length - 1];\n    return (\n      <div className={this.props.className}>\n        {breadcrumbs.map(component => (\n          <Breadcrumb\n            key={component.key}\n            canBrowse={component.key !== lastItem.key}\n            component={component}\n            isLast={component.key === lastItem.key}\n            handleSelect={this.props.handleSelect}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport FavoriteContainer from '../../../components/controls/FavoriteContainer';\nimport { getComponentForSourceViewer } from '../../../api/components';\nimport { receiveFavorites } from '../../../store/favorites/duck';\nimport { isMainBranch } from '../../../helpers/branches';\n\n/*:: type FavComponent = { key: string, canMarkAsFavorite: boolean, fav: boolean }; */\n\n/*:: type Props = {\n  branchLike?: { id?: string; name: string },\n  className?: string,\n  component: string,\n  onReceiveComponent: (component: FavComponent) => void\n}; */\n\n/*:: type State = { component: ?FavComponent }; */\n\nclass MeasureFavoriteContainer extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    component: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponentFavorite(this.props);\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (nextProps.component !== this.props.component) {\n      this.fetchComponentFavorite(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchComponentFavorite({ component, onReceiveComponent } /*: Props */) {\n    getComponentForSourceViewer({ component }).then(component => {\n      this.setState({ component });\n      onReceiveComponent(component);\n    });\n  }\n\n  render() {\n    const { component } = this.state;\n    if (\n      component == null ||\n      !component.canMarkAsFavorite ||\n      (this.props.branchLike && !isMainBranch(this.props.branchLike))\n    ) {\n      return null;\n    }\n    return (\n      <FavoriteContainer className={this.props.className} componentKey={this.props.component} />\n    );\n  }\n}\n\nconst mapStateToProps = null;\n\nconst mapDispatchToProps = {\n  onReceiveComponent: (component /*: FavComponent */) => dispatch => {\n    if (component.canMarkAsFavorite) {\n      const favorites = [];\n      const notFavorites = [];\n      if (component.fav) {\n        favorites.push({ key: component.key });\n      } else {\n        notFavorites.push({ key: component.key });\n      }\n      dispatch(receiveFavorites(favorites, notFavorites));\n    }\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasureFavoriteContainer);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { getPeriodLabel, getPeriodDate } from '../../../helpers/periods';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n/*:: import type { Component, Period } from '../types'; */\n\n/*:: type Props = {\n  className?: string,\n  component: Component,\n  period: Period\n}; */\n\nexport default function LeakPeriodLegend({ className, component, period } /*: Props */) {\n  const leakClass = classNames('domain-measures-leak-header', className);\n  if (component.qualifier === 'APP') {\n    return <div className={leakClass}>{translate('issues.leak_period')}</div>;\n  }\n\n  const label = (\n    <div className={leakClass}>\n      {translateWithParameters('overview.leak_period_x', getPeriodLabel(period))}\n    </div>\n  );\n\n  if (period.mode === 'days') {\n    return label;\n  }\n\n  const date = getPeriodDate(period);\n  const tooltip = (\n    <div>\n      <DateFromNow date={date} />\n      {', '}\n      <DateFormatter date={date} long={true} />\n    </div>\n  );\n  return <Tooltip overlay={tooltip}>{label}</Tooltip>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { Link } from 'react-router';\nimport LeakPeriodLegend from './LeakPeriodLegend';\nimport HistoryIcon from '../../../components/icons-components/HistoryIcon';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport LanguageDistributionContainer from '../../../components/charts/LanguageDistributionContainer';\nimport Measure from '../../../components/measure/Measure';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { getLocalizedMetricName, translate } from '../../../helpers/l10n';\nimport { getMeasureHistoryUrl } from '../../../helpers/urls';\nimport { isDiffMetric } from '../../../helpers/measures';\n/*:: import type { Component, Period } from '../types'; */\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  component: Component,\n  components: Array<Component>,\n  leakPeriod?: Period,\n  measure?: MeasureEnhanced,\n  metric: Metric,\n  secondaryMeasure: ?MeasureEnhanced\n|}; */\n\nexport default function MeasureHeader(props /*: Props*/) {\n  const { branchLike, component, leakPeriod, measure, metric, secondaryMeasure } = props;\n  const isDiff = isDiffMetric(metric.key);\n  const hasHistory = component.qualifier !== 'FIL' && component.qualifier !== 'UTS';\n  return (\n    <div className=\"measure-details-header big-spacer-bottom\">\n      <div className=\"measure-details-primary\">\n        <div className=\"measure-details-metric\">\n          <IssueTypeIcon className=\"little-spacer-right text-text-bottom\" query={metric.key} />\n          {getLocalizedMetricName(metric)}\n          <span className=\"measure-details-value spacer-left\">\n            <strong>\n              {isDiff ? (\n                <Measure\n                  className=\"domain-measures-leak\"\n                  metricKey={metric.key}\n                  metricType={metric.type}\n                  value={measure && measure.leak}\n                />\n              ) : (\n                <Measure\n                  metricKey={metric.key}\n                  metricType={metric.type}\n                  value={measure && measure.value}\n                />\n              )}\n            </strong>\n          </span>\n          {!isDiff &&\n            hasHistory && (\n              <Tooltip overlay={translate('component_measures.show_metric_history')}>\n                <Link\n                  className=\"js-show-history spacer-left button button-small\"\n                  to={getMeasureHistoryUrl(component.key, metric.key, branchLike)}>\n                  <HistoryIcon />\n                </Link>\n              </Tooltip>\n            )}\n        </div>\n        <div className=\"measure-details-primary-actions\">\n          {leakPeriod != null && (\n            <LeakPeriodLegend className=\"spacer-left\" component={component} period={leakPeriod} />\n          )}\n        </div>\n      </div>\n      {secondaryMeasure &&\n        secondaryMeasure.metric.key === 'ncloc_language_distribution' && (\n          <div className=\"measure-details-secondary\">\n            <LanguageDistributionContainer\n              alignTicks={true}\n              distribution={secondaryMeasure.value}\n              width={260}\n            />\n          </div>\n        )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function TreeIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M15.045 2.467c0-0.277-0.225-0.503-0.503-0.503h-13.084c-0.277 0-0.503 0.225-0.503 0.503v1.007c0 0.277 0.225 0.503 0.503 0.503h13.084c0.277 0 0.503-0.225 0.503-0.503v-1.007zM15.045 5.487c0-0.277-0.194-0.503-0.432-0.503h-11.216c-0.238 0-0.432 0.225-0.432 0.503v1.007c0 0.277 0.193 0.503 0.432 0.503h11.216c0.238 0 0.432-0.225 0.432-0.503v-1.007zM15.045 8.506c0-0.277-0.161-0.503-0.359-0.503h-9.346c-0.198 0-0.359 0.225-0.359 0.503v1.007c0 0.277 0.161 0.503 0.359 0.503h9.346c0.198 0 0.359-0.225 0.359-0.503v-1.007zM15.045 11.527c0-0.277-0.129-0.503-0.287-0.503h-7.477c-0.159 0-0.288 0.225-0.288 0.503v1.007c0 0.277 0.129 0.503 0.288 0.503h7.477c0.159 0 0.287-0.225 0.287-0.503v-1.007z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function TreemapIcon({ className, fill = 'currentColor', size = 14 }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M0 0h8v16h-8zM9.143 0h6.857v9.143h-6.857zM9.143 10.286h6.857v5.714h-6.857z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nexport const domains /*: { [string]: { categories?: Array<string>, order: Array<string> } }*/ = {\n  Reliability: {\n    categories: ['new_code_category', 'overall_category'],\n    order: [\n      'new_code_category',\n      'new_bugs',\n      'new_reliability_rating',\n      'new_reliability_remediation_effort',\n\n      'overall_category',\n      'bugs',\n      'reliability_rating',\n      'reliability_remediation_effort'\n    ]\n  },\n\n  Security: {\n    categories: ['new_code_category', 'overall_category'],\n    order: [\n      'new_code_category',\n      'new_vulnerabilities',\n      'new_security_rating',\n      'new_security_remediation_effort',\n\n      'overall_category',\n      'vulnerabilities',\n      'security_rating',\n      'security_remediation_effort'\n    ]\n  },\n\n  Maintainability: {\n    categories: ['new_code_category', 'overall_category'],\n    order: [\n      'new_code_category',\n      'new_code_smells',\n      'new_technical_debt',\n      'new_sqale_debt_ratio',\n      'new_maintainability_rating',\n\n      'overall_category',\n      'code_smells',\n      'sqale_index',\n      'sqale_debt_ratio',\n      'sqale_rating',\n      'effort_to_reach_maintainability_rating_a'\n    ]\n  },\n\n  Coverage: {\n    categories: ['new_code_category', 'overall_category', 'tests_category'],\n    order: [\n      'new_code_category',\n      'new_coverage',\n      'new_lines_to_cover',\n      'new_uncovered_lines',\n      'new_line_coverage',\n      'new_conditions_to_cover',\n      'new_uncovered_conditions',\n      'new_branch_coverage',\n\n      'overall_category',\n      'coverage',\n      'lines_to_cover',\n      'uncovered_lines',\n      'line_coverage',\n      'conditions_to_cover',\n      'uncovered_conditions',\n      'branch_coverage',\n\n      'tests_category',\n      'tests',\n      'test_success',\n      'test_errors',\n      'test_failures',\n      'skipped_tests',\n      'test_success_density',\n      'test_execution_time'\n    ]\n  },\n\n  Duplications: {\n    categories: ['new_code_category', 'overall_category'],\n    order: [\n      'new_code_category',\n      'new_duplicated_lines_density',\n      'new_duplicated_lines',\n      'new_duplicated_blocks',\n\n      'overall_category',\n      'duplicated_lines_density',\n      'duplicated_lines',\n      'duplicated_blocks',\n      'duplicated_files'\n    ]\n  },\n\n  Size: {\n    order: [\n      'new_lines',\n\n      'ncloc',\n      'lines',\n      'statements',\n      'functions',\n      'classes',\n      'files',\n      'directories'\n    ]\n  },\n\n  Complexity: {\n    order: ['complexity', 'function_complexity', 'file_complexity', 'class_complexity']\n  },\n\n  Releasability: {\n    order: ['releasability_rating', 'releasability_effort', 'alert_status']\n  },\n\n  Issues: {\n    order: [\n      'new_violations',\n      'new_blocker_violations',\n      'new_critical_violations',\n      'new_major_violations',\n      'new_minor_violations',\n      'new_info_violations',\n\n      'violations',\n      'blocker_violations',\n      'critical_violations',\n      'major_violations',\n      'minor_violations',\n      'info_violations',\n      'open_issues',\n      'reopened_issues',\n      'confirmed_issues',\n      'false_positive_issues'\n    ]\n  }\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nexport const bubbles = {\n  Reliability: {\n    x: 'ncloc',\n    y: 'reliability_remediation_effort',\n    size: 'bugs',\n    colors: ['reliability_rating']\n  },\n  Security: {\n    x: 'ncloc',\n    y: 'security_remediation_effort',\n    size: 'vulnerabilities',\n    colors: ['security_rating']\n  },\n  Maintainability: {\n    x: 'ncloc',\n    y: 'sqale_index',\n    size: 'code_smells',\n    colors: ['sqale_rating']\n  },\n  Coverage: { x: 'complexity', y: 'coverage', size: 'uncovered_lines', yDomain: [100, 0] },\n  Duplications: { x: 'ncloc', y: 'duplicated_lines', size: 'duplicated_blocks' },\n  project_overview: {\n    x: 'sqale_index',\n    y: 'coverage',\n    size: 'ncloc',\n    colors: ['reliability_rating', 'security_rating'],\n    yDomain: [100, 0]\n  }\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport { groupBy, memoize, sortBy, toPairs } from 'lodash';\nimport { domains } from './config/domains';\nimport { bubbles } from './config/bubbles';\nimport { getLocalizedMetricName } from '../../helpers/l10n';\nimport { cleanQuery, parseAsString, serializeString } from '../../helpers/query';\nimport { enhanceMeasure } from '../../components/measure/utils';\n/*:: import type { Component, ComponentEnhanced, Query } from './types'; */\n/*:: import type { RawQuery } from '../../helpers/query'; */\n/*:: import type { Metric } from '../../store/metrics/actions'; */\n/*:: import type { MeasureEnhanced } from '../../components/measure/types'; */\n\nexport const PROJECT_OVERVEW = 'project_overview';\nexport const DEFAULT_VIEW = 'list';\nexport const DEFAULT_METRIC = PROJECT_OVERVEW;\nexport const KNOWN_DOMAINS = [\n  'Releasability',\n  'Reliability',\n  'Security',\n  'Maintainability',\n  'Coverage',\n  'Duplications',\n  'Size',\n  'Complexity'\n];\nconst BANNED_MEASURES = [\n  'blocker_violations',\n  'new_blocker_violations',\n  'critical_violations',\n  'new_critical_violations',\n  'major_violations',\n  'new_major_violations',\n  'minor_violations',\n  'new_minor_violations',\n  'info_violations',\n  'new_info_violations'\n];\n\nexport function filterMeasures(\n  measures /*: Array<MeasureEnhanced> */\n) /*: Array<MeasureEnhanced> */ {\n  return measures.filter(measure => !BANNED_MEASURES.includes(measure.metric.key));\n}\n\nexport function sortMeasures(\n  domainName /*: string */,\n  measures /*: Array<MeasureEnhanced | string> */\n) /*: Array<MeasureEnhanced | string> */ {\n  const config = domains[domainName] || {};\n  const configOrder = config.order || [];\n  return sortBy(measures, [\n    item => {\n      if (typeof item === 'string') {\n        return configOrder.indexOf(item);\n      }\n      const idx = configOrder.indexOf(item.metric.key);\n      return idx >= 0 ? idx : configOrder.length;\n    },\n    item => (typeof item === 'string' ? item : getLocalizedMetricName(item.metric))\n  ]);\n}\n\nexport function addMeasureCategories(\n  domainName /*: string */,\n  measures /*: Array<MeasureEnhanced> */\n) /*: Array<any> */ {\n  const categories = domains[domainName] && domains[domainName].categories;\n  if (categories && categories.length > 0) {\n    return [...categories, ...measures];\n  }\n  return measures;\n}\n\nexport function enhanceComponent(\n  component /*: Component */,\n  metric /*: ?Metric */,\n  metrics /*: { [string]: Metric } */\n) /*: ComponentEnhanced */ {\n  const enhancedMeasures = component.measures.map(measure => enhanceMeasure(measure, metrics));\n  // $FlowFixMe metric can't be null since there is a guard for it\n  const measure = metric && enhancedMeasures.find(measure => measure.metric.key === metric.key);\n  const value = measure ? measure.value : null;\n  const leak = measure ? measure.leak : null;\n  return { ...component, value, leak, measures: enhancedMeasures };\n}\n\nexport function isFileType(component /*: Component */) /*: boolean */ {\n  return ['FIL', 'UTS'].includes(component.qualifier);\n}\n\nexport function isViewType(component /*: Component */) /*: boolean */ {\n  return ['VW', 'SVW', 'APP'].includes(component.qualifier);\n}\n\nexport const groupByDomains = memoize((measures /*: Array<MeasureEnhanced> */) => {\n  const domains = toPairs(groupBy(measures, measure => measure.metric.domain)).map(r => ({\n    name: r[0],\n    measures: r[1]\n  }));\n\n  return sortBy(domains, [\n    domain => {\n      const idx = KNOWN_DOMAINS.indexOf(domain.name);\n      return idx >= 0 ? idx : KNOWN_DOMAINS.length;\n    },\n    'name'\n  ]);\n});\n\nexport function getDefaultView(metric /*: string */) /*: string */ {\n  if (!hasList(metric)) {\n    return 'tree';\n  }\n  return DEFAULT_VIEW;\n}\n\nexport function hasList(metric /*: string */) /*: boolean */ {\n  return !['releasability_rating', 'releasability_effort'].includes(metric);\n}\n\nexport function hasTree(metric /*: string */) /*: boolean */ {\n  return metric !== 'alert_status';\n}\n\nexport function hasTreemap(metric /*: string */, type /*: string */) /*: boolean */ {\n  return ['PERCENT', 'RATING', 'LEVEL'].includes(type) && hasTree(metric);\n}\n\nexport function hasBubbleChart(domainName /*: string */) /*: boolean */ {\n  return bubbles[domainName] != null;\n}\n\nexport function hasFacetStat(metric /*: string */) /*: boolean */ {\n  return metric !== 'alert_status';\n}\n\nexport function getBubbleMetrics(domain /*: string */, metrics /*: { [string]: Metric } */) {\n  const conf = bubbles[domain];\n  return {\n    x: metrics[conf.x],\n    y: metrics[conf.y],\n    size: metrics[conf.size],\n    colors: conf.colors ? conf.colors.map(color => metrics[color]) : null\n  };\n}\n\nexport function getBubbleYDomain(domain /*: string */) {\n  return bubbles[domain].yDomain;\n}\n\nexport function isProjectOverview(metric /*: string */) {\n  return metric === PROJECT_OVERVEW;\n}\n\nconst parseView = memoize((rawView /*:: ? */ /*: string */, metric /*: string */) => {\n  const view = parseAsString(rawView) || DEFAULT_VIEW;\n  if (!hasTree(metric)) {\n    return 'list';\n  } else if (view === 'list' && !hasList(metric)) {\n    return 'tree';\n  }\n  return view;\n});\n\nexport const parseQuery = memoize((urlQuery /*: RawQuery */) => {\n  const metric = parseAsString(urlQuery['metric']) || DEFAULT_METRIC;\n  return {\n    metric,\n    selected: parseAsString(urlQuery['selected']),\n    view: parseView(urlQuery['view'], metric)\n  };\n});\n\nexport const serializeQuery = memoize((query /*: Query */) => {\n  return cleanQuery({\n    metric: query.metric === DEFAULT_METRIC ? null : serializeString(query.metric),\n    selected: serializeString(query.selected),\n    view: query.view === DEFAULT_VIEW ? null : serializeString(query.view)\n  });\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport ListIcon from '../../../components/icons-components/ListIcon';\nimport TreeIcon from '../../../components/icons-components/TreeIcon';\nimport TreemapIcon from '../../../components/icons-components/TreemapIcon';\nimport Select from '../../../components/controls/Select';\nimport { hasList, hasTree, hasTreemap } from '../utils';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {\n  className?: string,\n  metric: Metric,\n  handleViewChange: (view: string) => void,\n  view: string\n}; */\n\nexport default class MeasureViewSelect extends React.PureComponent {\n  /*:: props: Props; */\n\n  getOptions = () => {\n    const { metric } = this.props;\n    const options = [];\n    if (hasList(metric.key)) {\n      options.push({\n        value: 'list',\n        label: (\n          <div>\n            <ListIcon className=\"little-spacer-right\" />\n            {translate('component_measures.tab.list')}\n          </div>\n        ),\n        icon: <ListIcon />\n      });\n    }\n    if (hasTree(metric.key)) {\n      options.push({\n        value: 'tree',\n        label: (\n          <div>\n            <TreeIcon className=\"little-spacer-right\" />\n            {translate('component_measures.tab.tree')}\n          </div>\n        ),\n        icon: <TreeIcon />\n      });\n    }\n    if (hasTreemap(metric.key, metric.type)) {\n      options.push({\n        value: 'treemap',\n        label: (\n          <div>\n            <TreemapIcon className=\"little-spacer-right\" />\n            {translate('component_measures.tab.treemap')}\n          </div>\n        ),\n        icon: <TreemapIcon />\n      });\n    }\n    return options;\n  };\n\n  handleChange = (option /*: { value: string } */) => this.props.handleViewChange(option.value);\n\n  renderValue = (value /*: { icon: Element<*> } */) => value.icon;\n\n  render() {\n    return (\n      <Select\n        autoBlur={true}\n        className={this.props.className}\n        clearable={false}\n        searchable={false}\n        value={this.props.view}\n        valueRenderer={this.renderValue}\n        options={this.getOptions()}\n        onChange={this.handleChange}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { translate } from '../../../helpers/l10n';\n\nexport default function MetricNotFound({ className } /*: { className?: string } */) {\n  return (\n    <div className={className}>\n      <div className=\"alert alert-danger\">{translate('component_measures.not_found')}</div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\n\n/*:: type Props = {\n  className?: string,\n  current: ?number,\n  total: number\n}; */\n\nexport default function FilesCounter({ className, current, total } /*: Props */) {\n  return (\n    <span className={className}>\n      <strong>\n        {current != null && (\n          <span>\n            {formatMeasure(current, 'INT')}\n            {' / '}\n          </span>\n        )}\n        {formatMeasure(total, 'INT')}\n      </strong>{' '}\n      {translate('component_measures.files')}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport FilesCounter from './FilesCounter';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport { translate } from '../../../helpers/l10n';\n/*:: import type { Paging } from '../types'; */\n\n/*:: type Props = {|\n  current: ?number,\n  loading: boolean,\n  isFile: ?boolean,\n  paging: ?Paging,\n  totalLoadedComponents?: number,\n  view?: string\n|}; */\n\nexport default function PageActions(props /*: Props */) {\n  const { isFile, paging, totalLoadedComponents } = props;\n  const showShortcuts = ['list', 'tree'].includes(props.view);\n  return (\n    <div className=\"pull-right\">\n      {!isFile && showShortcuts && renderShortcuts()}\n      {isFile && paging && renderFileShortcuts()}\n      <div className=\"measure-details-page-actions\">\n        <DeferredSpinner loading={props.loading}>\n          <i className=\"spinner-placeholder\" />\n        </DeferredSpinner>\n        {paging != null && (\n          <FilesCounter\n            className=\"spacer-left\"\n            current={props.current}\n            total={isFile && totalLoadedComponents != null ? totalLoadedComponents : paging.total}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction renderShortcuts() {\n  return (\n    <span className=\"note big-spacer-right\">\n      <span className=\"big-spacer-right\">\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('component_measures.to_select_files')}\n      </span>\n\n      <span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('component_measures.to_navigate')}\n      </span>\n    </span>\n  );\n}\n\nfunction renderFileShortcuts() {\n  return (\n    <span className=\"note spacer-right\">\n      <span>\n        <span className=\"shortcut-button little-spacer-right\">j</span>\n        <span className=\"shortcut-button little-spacer-right\">k</span>\n        {translate('component_measures.to_navigate_files')}\n      </span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { Link } from 'react-router';\nimport LinkIcon from '../../../components/icons-components/LinkIcon';\nimport QualifierIcon from '../../../components/icons-components/QualifierIcon';\nimport { splitPath } from '../../../helpers/path';\nimport {\n  getPathUrlAsString,\n  getBranchLikeUrl,\n  getComponentDrilldownUrlWithSelection\n} from '../../../helpers/urls';\n/*:: import type { Component, ComponentEnhanced } from '../types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {\n  branchLike?: { id?: string; name: string },\n  component: ComponentEnhanced,\n  onClick: string => void,\n  metric: Metric,\n  rootComponent: Component\n}; */\n\nexport default class ComponentCell extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleClick = (e /*: MouseEvent */) => {\n    const isLeftClickEvent = e.button === 0;\n    const isModifiedEvent = !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey);\n\n    if (isLeftClickEvent && !isModifiedEvent) {\n      e.preventDefault();\n      this.props.onClick(this.props.component.key);\n    }\n  };\n\n  renderInner() {\n    const { component } = this.props;\n    let head = '';\n    let tail = component.name;\n\n    if (['DIR', 'FIL', 'UTS'].includes(component.qualifier)) {\n      const parts = splitPath(component.path);\n      ({ head, tail } = parts);\n    }\n    return (\n      <span title={component.refKey || component.key}>\n        <QualifierIcon qualifier={component.qualifier} />\n        &nbsp;\n        {head.length > 0 && <span className=\"note\">{head}/</span>}\n        <span>{tail}</span>\n      </span>\n    );\n  }\n\n  render() {\n    const { branchLike, component, metric, rootComponent } = this.props;\n    return (\n      <td className=\"measure-details-component-cell\">\n        <div className=\"text-ellipsis\">\n          {component.refKey == null ? (\n            <a\n              className=\"link-no-underline\"\n              href={getPathUrlAsString(\n                getComponentDrilldownUrlWithSelection(\n                  rootComponent.key,\n                  component.key,\n                  metric.key,\n                  branchLike\n                )\n              )}\n              id={'component-measures-component-link-' + component.key}\n              onClick={this.handleClick}>\n              {this.renderInner()}\n            </a>\n          ) : (\n            <Link\n              className=\"link-no-underline\"\n              id={'component-measures-component-link-' + component.key}\n              to={getBranchLikeUrl(component.refKey, branchLike)}>\n              <span className=\"big-spacer-right\">\n                <LinkIcon />\n              </span>\n              {this.renderInner()}\n            </Link>\n          )}\n        </div>\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Measure from '../../../components/measure/Measure';\nimport { isDiffMetric } from '../../../helpers/measures';\n/*:: import type { ComponentEnhanced } from '../types'; */\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {\n  component: ComponentEnhanced,\n  measure?: MeasureEnhanced,\n  metric: Metric\n}; */\n\nexport default function MeasureCell({ component, measure, metric } /*: Props */) {\n  const getValue = (item /*: { leak?: ?string; value?: string } */) =>\n    isDiffMetric(metric.key) ? item.leak : item.value;\n\n  const value = getValue(measure || component);\n\n  return (\n    <td className=\"thin nowrap text-right\">\n      <span id={`component-measures-component-measure-${component.key}-${metric.key}`}>\n        <Measure value={value} metricKey={metric.key} metricType={metric.type} />\n      </span>\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport ComponentCell from './ComponentCell';\nimport MeasureCell from './MeasureCell';\n/*:: import type { Component, ComponentEnhanced } from '../types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  component: ComponentEnhanced,\n  isSelected: boolean,\n  onClick: string => void,\n  otherMetrics: Array<Metric>,\n  metric: Metric,\n  rootComponent: Component\n|}; */\n\nexport default function ComponentsListRow(props /*: Props */) {\n  const { branchLike, component, rootComponent } = props;\n  const otherMeasures = props.otherMetrics.map(metric => {\n    const measure = component.measures.find(measure => measure.metric.key === metric.key);\n    return { ...measure, metric };\n  });\n  const rowClass = classNames('measure-details-component-row', {\n    selected: props.isSelected\n  });\n  return (\n    <tr className={rowClass}>\n      <ComponentCell\n        branchLike={branchLike}\n        component={component}\n        metric={props.metric}\n        onClick={props.onClick}\n        rootComponent={rootComponent}\n      />\n\n      <MeasureCell component={component} metric={props.metric} />\n\n      {otherMeasures.map(measure => (\n        <MeasureCell\n          component={component}\n          key={measure.metric.key}\n          measure={measure}\n          metric={measure.metric}\n        />\n      ))}\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { translate } from '../../../helpers/l10n';\n\nexport default function EmptyResult() {\n  return <div className=\"note\">{translate('no_results')}</div>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nexport const complementary = {\n  coverage: ['uncovered_lines', 'uncovered_conditions'],\n  line_coverage: ['uncovered_lines'],\n  branch_coverage: ['uncovered_conditions'],\n  uncovered_lines: ['line_coverage'],\n  uncovered_conditions: ['branch_coverage'],\n\n  new_coverage: ['new_uncovered_lines', 'new_uncovered_conditions'],\n  new_line_coverage: ['new_uncovered_lines'],\n  new_branch_coverage: ['new_uncovered_conditions'],\n  new_uncovered_lines: ['new_line_coverage'],\n  new_uncovered_conditions: ['new_branch_coverage'],\n\n  duplicated_lines_density: ['duplicated_lines'],\n  new_duplicated_lines_density: ['new_duplicated_lines'],\n  duplicated_lines: ['duplicated_lines_density'],\n  new_duplicated_lines: ['new_duplicated_lines_density']\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport ComponentsListRow from './ComponentsListRow';\nimport EmptyResult from './EmptyResult';\nimport { complementary } from '../config/complementary';\nimport { getLocalizedMetricName, translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure, isDiffMetric, isPeriodBestValue } from '../../../helpers/measures';\n/*:: import type { Component, ComponentEnhanced } from '../types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {|\n  bestValue?: string,\n  branchLike?: { id?: string; name: string },\n  components: Array<ComponentEnhanced>,\n  onClick: string => void,\n  metric: Metric,\n  metrics: { [string]: Metric },\n  rootComponent: Component,\n  selectedComponent?: ?string\n|}; */\n\n/*:: type State = {\n  hideBest: boolean\n}; */\n\nexport default class ComponentsList extends React.PureComponent {\n  /*:: props: Props; */\n  state /*: State */ = {\n    hideBest: true\n  };\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (nextProps.metric !== this.props.metric) {\n      this.setState({ hideBest: true });\n    }\n  }\n\n  displayAll = (event /*: Event */) => {\n    event.preventDefault();\n    this.setState({ hideBest: false });\n  };\n\n  hasBestValue(component /*: Component*/, otherMetrics /*: Array<Metric> */) {\n    const { metric } = this.props;\n    const focusedMeasure = component.measures.find(measure => measure.metric.key === metric.key);\n    if (isDiffMetric(focusedMeasure.metric.key)) {\n      return isPeriodBestValue(focusedMeasure, 1);\n    }\n    return focusedMeasure.bestValue;\n  }\n\n  renderComponent(component /*: Component*/, otherMetrics /*: Array<Metric> */) {\n    const { branchLike, metric, selectedComponent, onClick, rootComponent } = this.props;\n    return (\n      <ComponentsListRow\n        branchLike={branchLike}\n        component={component}\n        isSelected={component.key === selectedComponent}\n        key={component.id}\n        metric={metric}\n        onClick={onClick}\n        otherMetrics={otherMetrics}\n        rootComponent={rootComponent}\n      />\n    );\n  }\n\n  renderHiddenLink(hiddenCount /*: number*/, colCount /*: number*/) {\n    return (\n      <div className=\"alert alert-info spacer-top\">\n        {translateWithParameters(\n          'component_measures.hidden_best_score_metrics',\n          hiddenCount,\n          formatMeasure(this.props.bestValue, this.props.metric.type)\n        )}\n        <a className=\"spacer-left\" href=\"#\" onClick={this.displayAll}>\n          {translate('show_all')}\n        </a>\n      </div>\n    );\n  }\n\n  render() {\n    const { components, metric, metrics } = this.props;\n    if (!components.length) {\n      return <EmptyResult />;\n    }\n\n    const otherMetrics = (complementary[metric.key] || []).map(key => metrics[key]);\n    const notBestComponents = components.filter(\n      component => !this.hasBestValue(component, otherMetrics)\n    );\n    const hiddenCount = components.length - notBestComponents.length;\n    const shouldHideBest = this.state.hideBest && hiddenCount !== components.length;\n    return (\n      <React.Fragment>\n        <table className=\"data zebra zebra-hover\">\n          {otherMetrics.length > 0 && (\n            <thead>\n              <tr>\n                <th>&nbsp;</th>\n                <th className=\"text-right\">\n                  <span className=\"small\">{getLocalizedMetricName(metric)}</span>\n                </th>\n                {otherMetrics.map(metric => (\n                  <th className=\"text-right\" key={metric.key}>\n                    <span className=\"small\">{getLocalizedMetricName(metric)}</span>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n          )}\n\n          <tbody>\n            {(shouldHideBest ? notBestComponents : components).map(component =>\n              this.renderComponent(component, otherMetrics)\n            )}\n          </tbody>\n        </table>\n        {shouldHideBest &&\n          hiddenCount > 0 &&\n          this.renderHiddenLink(hiddenCount, otherMetrics.length + 3)}\n      </React.Fragment>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport key from 'keymaster';\nimport { throttle } from 'lodash';\nimport ComponentsList from './ComponentsList';\nimport ListFooter from '../../../components/controls/ListFooter';\nimport { scrollToElement } from '../../../helpers/scrolling';\n/*:: import type { Component, ComponentEnhanced, Paging } from '../types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {|\n  bestValue?: string,\n  branchLike?: { id?: string; name: string },\n  components: Array<ComponentEnhanced>,\n  fetchMore: () => void,\n  handleSelect: string => void,\n  handleOpen: string => void,\n  metric: Metric,\n  metrics: { [string]: Metric },\n  paging: ?Paging,\n  rootComponent: Component,\n  selectedKey: ?string,\n  selectedIdx: ?number\n|}; */\n\nexport default class ListView extends React.PureComponent {\n  /*:: listContainer: HTMLElement; */\n  /*:: props: Props; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.selectNext = throttle(this.selectNext, 100);\n    this.selectPrevious = throttle(this.selectPrevious, 100);\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n    if (this.props.selectedKey != null) {\n      this.scrollToElement();\n    }\n  }\n\n  componentDidUpdate(prevProps /*: Props */) {\n    if (this.props.selectedKey != null && prevProps.selectedKey !== this.props.selectedKey) {\n      this.scrollToElement();\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts() {\n    key('up', 'measures-files', () => {\n      this.selectPrevious();\n      return false;\n    });\n    key('down', 'measures-files', () => {\n      this.selectNext();\n      return false;\n    });\n    key('right', 'measures-files', () => {\n      this.openSelected();\n      return false;\n    });\n  }\n\n  detachShortcuts() {\n    ['up', 'down', 'right'].map(action => key.unbind(action, 'measures-files'));\n  }\n\n  openSelected = () => {\n    if (this.props.selectedKey != null) {\n      this.props.handleOpen(this.props.selectedKey);\n    }\n  };\n\n  selectPrevious = () => {\n    const { selectedIdx } = this.props;\n    if (selectedIdx != null && selectedIdx > 0) {\n      this.props.handleSelect(this.props.components[selectedIdx - 1].key);\n    } else {\n      this.props.handleSelect(this.props.components[this.props.components.length - 1].key);\n    }\n  };\n\n  selectNext = () => {\n    const { selectedIdx } = this.props;\n    if (selectedIdx != null && selectedIdx < this.props.components.length - 1) {\n      this.props.handleSelect(this.props.components[selectedIdx + 1].key);\n    } else {\n      this.props.handleSelect(this.props.components[0].key);\n    }\n  };\n\n  scrollToElement = () => {\n    if (this.listContainer) {\n      const elem = this.listContainer.getElementsByClassName('selected')[0];\n      if (elem) {\n        scrollToElement(elem, { topOffset: 215, bottomOffset: 100 });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div ref={elem => (this.listContainer = elem)}>\n        <ComponentsList\n          bestValue={this.props.bestValue}\n          branchLike={this.props.branchLike}\n          components={this.props.components}\n          metric={this.props.metric}\n          metrics={this.props.metrics}\n          onClick={this.props.handleOpen}\n          rootComponent={this.props.rootComponent}\n          selectedComponent={this.props.selectedKey}\n        />\n        {this.props.paging &&\n          this.props.components.length > 0 && (\n            <ListFooter\n              count={this.props.components.length}\n              loadMore={this.props.fetchMore}\n              total={this.props.paging.total}\n            />\n          )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport key from 'keymaster';\nimport SourceViewer from '../../../components/SourceViewer/SourceViewer';\n/*:: import type { ComponentEnhanced, Paging, Period } from '../types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  component: ComponentEnhanced,\n  components: Array<ComponentEnhanced>,\n  leakPeriod?: Period,\n  metric: Metric,\n  selectedIdx: ?number,\n  updateSelected: string => void,\n|}; */\n\nexport default class CodeView extends React.PureComponent {\n  /*:: props: Props; */\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts() {\n    key('j', 'measures-files', () => {\n      this.selectNext();\n      return false;\n    });\n    key('k', 'measures-files', () => {\n      this.selectPrevious();\n      return false;\n    });\n  }\n\n  detachShortcuts() {\n    ['j', 'k'].map(action => key.unbind(action, 'measures-files'));\n  }\n\n  selectPrevious = () => {\n    const { selectedIdx } = this.props;\n    if (selectedIdx != null && selectedIdx > 0) {\n      const prevComponent = this.props.components[selectedIdx - 1];\n      if (prevComponent) {\n        this.props.updateSelected(prevComponent.key);\n      }\n    }\n  };\n\n  selectNext = () => {\n    const { components, selectedIdx } = this.props;\n    if (selectedIdx != null && selectedIdx < components.length - 1) {\n      const nextComponent = components[selectedIdx + 1];\n      if (nextComponent) {\n        this.props.updateSelected(nextComponent.key);\n      }\n    }\n  };\n\n  render() {\n    const { branchLike, component } = this.props;\n    return <SourceViewer branchLike={branchLike} component={component.key} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { ScaleLinear, ScaleOrdinal } from 'd3-scale';\nimport { formatMeasure } from '../../helpers/measures';\nimport './ColorBoxLegend.css';\n\ninterface Props {\n  className?: string;\n  colorNA?: string;\n  colorScale:\n    | ScaleOrdinal<string, string> // used for LEVEL type\n    | ScaleLinear<number, string | number>; // used for RATING or PERCENT type\n  metricType: string;\n}\n\nexport default function ColorBoxLegend({ className, colorScale, colorNA, metricType }: Props) {\n  const colorDomain: Array<number | string> = colorScale.domain();\n  const colorRange = colorScale.range();\n  return (\n    <div className={classNames('color-box-legend', className)}>\n      {colorDomain.map((value, idx) => (\n        <div key={value}>\n          <span className=\"color-box-legend-rect\" style={{ borderColor: colorRange[idx] }}>\n            <span\n              className=\"color-box-legend-rect-inner\"\n              style={{ backgroundColor: colorRange[idx] }}\n            />\n          </span>\n          {formatMeasure(value, metricType)}\n        </div>\n      ))}\n      {colorNA && (\n        <div>\n          <span className=\"color-box-legend-rect\" style={{ borderColor: colorNA }}>\n            <span className=\"color-box-legend-rect-inner\" style={{ backgroundColor: colorNA }} />\n          </span>\n          N/A\n        </div>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ScaleLinear, ScaleOrdinal } from 'd3-scale';\nimport './ColorGradientLegend.css';\n\ninterface Props {\n  className?: string;\n  colorNA?: string;\n  colorScale:\n    | ScaleOrdinal<string, string> // used for LEVEL type\n    | ScaleLinear<number, string | number>; // used for RATING or PERCENT type\n  direction?: number;\n  height: number;\n  padding?: [number, number, number, number];\n  width: number;\n}\n\nconst NA_SPACING = 4;\n\nexport default function ColorGradientLegend({\n  className,\n  colorScale,\n  colorNA,\n  direction,\n  padding = [12, 24, 0, 0],\n  height,\n  width\n}: Props) {\n  const colorRange: Array<string | number> = colorScale.range();\n  if (direction === 1) {\n    colorRange.reverse();\n  }\n\n  const colorDomain: Array<string | number> = colorScale.domain();\n  const lastColorIdx = colorRange.length - 1;\n  const lastDomainIdx = colorDomain.length - 1;\n  const widthNoPadding = width - padding[1];\n  const rectHeight = height - padding[0];\n  return (\n    <svg className={className} height={height} width={width}>\n      <defs>\n        <linearGradient id=\"gradient-legend\">\n          {colorRange.map((color, idx) => (\n            <stop key={idx} offset={idx / lastColorIdx} stopColor={String(color)} />\n          ))}\n        </linearGradient>\n      </defs>\n      <g transform={`translate(${padding[3]}, ${padding[0]})`}>\n        <rect fill=\"url(#gradient-legend)\" height={rectHeight} width={widthNoPadding} x={0} y={0} />\n        {colorDomain.map((d, idx) => (\n          <text\n            className=\"gradient-legend-text\"\n            dy=\"-2px\"\n            key={idx}\n            x={widthNoPadding * (idx / lastDomainIdx)}\n            y={0}>\n            {d}\n          </text>\n        ))}\n      </g>\n      {colorNA && (\n        <g transform={`translate(${widthNoPadding}, ${padding[0]})`}>\n          <rect\n            fill={colorNA}\n            height={rectHeight}\n            width={padding[1] - NA_SPACING}\n            x={NA_SPACING}\n            y={0}\n          />\n          <text\n            className=\"gradient-legend-na\"\n            dy=\"-2px\"\n            x={NA_SPACING + (padding[1] - NA_SPACING) / 2}\n            y={0}>\n            N/A\n          </text>\n        </g>\n      )}\n    </svg>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport * as classNames from 'classnames';\nimport { scaleLinear } from 'd3-scale';\nimport LinkIcon from '../icons-components/LinkIcon';\nimport Tooltip, { Placement } from '../controls/Tooltip';\n\nconst SIZE_SCALE = scaleLinear()\n  .domain([3, 15])\n  .range([11, 18])\n  .clamp(true);\n\ninterface Props {\n  fill: string;\n  height: number;\n  icon?: React.ReactNode;\n  itemKey: string;\n  label: string;\n  link?: string;\n  onClick?: (item: string) => void;\n  placement?: Placement;\n  prefix: string;\n  tooltip?: React.ReactNode;\n  width: number;\n  x: number;\n  y: number;\n}\n\nexport default class TreeMapRect extends React.PureComponent<Props> {\n  handleLinkClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.stopPropagation();\n  };\n\n  handleRectClick = () => {\n    if (this.props.onClick) {\n      this.props.onClick(this.props.itemKey);\n    }\n  };\n\n  renderLink = () => {\n    const { link, height, width } = this.props;\n    const hasMinSize = width >= 24 && height >= 24 && (width >= 48 || height >= 50);\n    if (!hasMinSize || link == null) {\n      return null;\n    }\n    return (\n      <Link className=\"treemap-link\" onClick={this.handleLinkClick} to={link}>\n        <LinkIcon />\n      </Link>\n    );\n  };\n\n  renderCell = () => {\n    const cellStyles = {\n      left: this.props.x,\n      top: this.props.y,\n      width: this.props.width,\n      height: this.props.height,\n      backgroundColor: this.props.fill,\n      fontSize: SIZE_SCALE(this.props.width / this.props.label.length),\n      lineHeight: `${this.props.height}px`,\n      cursor: this.props.onClick != null ? 'pointer' : 'default'\n    };\n    const isTextVisible = this.props.width >= 40 && this.props.height >= 45;\n    const isIconVisible = this.props.width >= 24 && this.props.height >= 26;\n\n    const label = this.props.prefix\n      ? `${this.props.prefix}<br>${this.props.label.substr(this.props.prefix.length)}`\n      : this.props.label;\n\n    return (\n      <div\n        className=\"treemap-cell\"\n        onClick={this.handleRectClick}\n        role=\"treeitem\"\n        style={cellStyles}\n        tabIndex={0}>\n        <div className=\"treemap-inner\" style={{ maxWidth: this.props.width }}>\n          {isIconVisible && (\n            <span className={classNames('treemap-icon', { 'spacer-right': isTextVisible })}>\n              {this.props.icon}\n            </span>\n          )}\n          {isTextVisible && (\n            <span className=\"treemap-text\" dangerouslySetInnerHTML={{ __html: label }} />\n          )}\n        </div>\n        {this.renderLink()}\n      </div>\n    );\n  };\n\n  render() {\n    const { placement, tooltip } = this.props;\n    return (\n      <Tooltip overlay={tooltip || undefined} placement={placement || 'left'}>\n        {this.renderCell()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { treemap as d3Treemap, hierarchy as d3Hierarchy } from 'd3-hierarchy';\nimport TreeMapRect from './TreeMapRect';\nimport { translate } from '../../helpers/l10n';\nimport './TreeMap.css';\n\ninterface TreeMapItem {\n  color: string;\n  icon?: React.ReactNode;\n  key: string;\n  label: string;\n  link?: string;\n  size: number;\n  tooltip?: React.ReactNode;\n}\n\ninterface HierarchicalTreemapItem extends TreeMapItem {\n  children?: TreeMapItem[];\n}\n\ninterface Props {\n  height: number;\n  items: TreeMapItem[];\n  onRectangleClick?: (item: string) => void;\n  width: number;\n}\n\nexport default class TreeMap extends React.PureComponent<Props> {\n  mostCommitPrefix = (labels: string[]) => {\n    const sortedLabels = labels.slice(0).sort();\n    const firstLabel = sortedLabels[0];\n    const firstLabelLength = firstLabel.length;\n    const lastLabel = sortedLabels[sortedLabels.length - 1];\n    let i = 0;\n    while (i < firstLabelLength && firstLabel.charAt(i) === lastLabel.charAt(i)) {\n      i++;\n    }\n    const prefix = firstLabel.substr(0, i);\n    const prefixTokens = prefix.split(/[\\s\\\\/]/);\n    const lastPrefixPart = prefixTokens[prefixTokens.length - 1];\n    return prefix.substr(0, prefix.length - lastPrefixPart.length);\n  };\n\n  renderNoData() {\n    return (\n      <div className=\"sonar-d3\">\n        <div\n          className=\"treemap-container\"\n          style={{ width: this.props.width, height: this.props.height }}>\n          {translate('no_data')}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { items, height, width } = this.props;\n    if (items.length <= 0) {\n      return this.renderNoData();\n    }\n\n    const hierarchy = d3Hierarchy({ children: items } as HierarchicalTreemapItem)\n      .sum(d => d.size)\n      .sort((a, b) => (b.value || 0) - (a.value || 0));\n\n    const treemap = d3Treemap<TreeMapItem>()\n      .round(true)\n      .size([width, height]);\n\n    const nodes = treemap(hierarchy).leaves();\n    const prefix = this.mostCommitPrefix(items.map(item => item.label));\n    const halfWidth = width / 2;\n    return (\n      <div className=\"sonar-d3\">\n        <div className=\"treemap-container\" style={{ width, height }}>\n          {nodes.map(node => (\n            <TreeMapRect\n              fill={node.data.color}\n              height={node.y1 - node.y0}\n              icon={node.data.icon}\n              itemKey={node.data.key}\n              key={node.data.key}\n              label={node.data.label}\n              link={node.data.link}\n              onClick={this.props.onRectangleClick}\n              placement={node.x0 === 0 || node.x1 < halfWidth ? 'right' : 'left'}\n              prefix={prefix}\n              tooltip={node.data.tooltip}\n              width={node.x1 - node.x0}\n              x={node.x0}\n              y={node.y0}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\n// $FlowFixMe\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { scaleLinear, scaleOrdinal } from 'd3-scale';\nimport EmptyResult from './EmptyResult';\nimport * as theme from '../../../app/theme';\nimport ColorBoxLegend from '../../../components/charts/ColorBoxLegend';\nimport ColorGradientLegend from '../../../components/charts/ColorGradientLegend';\nimport QualifierIcon from '../../../components/icons-components/QualifierIcon';\nimport TreeMap from '../../../components/charts/TreeMap';\nimport { translate, translateWithParameters, getLocalizedMetricName } from '../../../helpers/l10n';\nimport { formatMeasure, isDiffMetric } from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n/*:: import type { ComponentEnhanced } from '../types'; */\n/*:: import type { TreeMapItem } from '../../../components/charts/TreeMap'; */\n\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  components: Array<ComponentEnhanced>,\n  handleSelect: string => void,\n  metric: Metric\n|}; */\n\n/*:: type State = {\n  treemapItems: Array<TreeMapItem>\n}; */\n\nconst HEIGHT = 500;\nconst COLORS = [theme.green, theme.lightGreen, theme.yellow, theme.orange, theme.red];\nconst LEVEL_COLORS = [theme.red, theme.orange, theme.green, theme.gray71];\n\nexport default class TreeMapView extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = { treemapItems: this.getTreemapComponents(props) };\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (nextProps.components !== this.props.components || nextProps.metric !== this.props.metric) {\n      this.setState({ treemapItems: this.getTreemapComponents(nextProps) });\n    }\n  }\n\n  getTreemapComponents = ({ branchLike, components, metric } /*: Props */) => {\n    const colorScale = this.getColorScale(metric);\n    return components\n      .map(component => {\n        const colorMeasure = component.measures.find(measure => measure.metric.key === metric.key);\n        const sizeMeasure = component.measures.find(measure => measure.metric.key !== metric.key);\n        if (sizeMeasure == null) {\n          return null;\n        }\n        const colorValue =\n          colorMeasure && (isDiffMetric(metric.key) ? colorMeasure.leak : colorMeasure.value);\n        const sizeValue = isDiffMetric(sizeMeasure.metric.key)\n          ? sizeMeasure.leak\n          : sizeMeasure.value;\n        if (sizeValue == null) {\n          return null;\n        }\n        return {\n          key: component.refKey || component.key,\n          size: sizeValue,\n          color: colorValue != null ? colorScale(colorValue) : theme.secondFontColor,\n          icon: <QualifierIcon color={theme.baseFontColor} qualifier={component.qualifier} />,\n          tooltip: this.getTooltip(\n            component.name,\n            metric,\n            sizeMeasure.metric,\n            colorValue,\n            sizeValue\n          ),\n          label: component.name,\n          link: getBranchLikeUrl(component.refKey || component.key, branchLike)\n        };\n      })\n      .filter(Boolean);\n  };\n\n  getLevelColorScale = () =>\n    scaleOrdinal()\n      .domain(['ERROR', 'WARN', 'OK', 'NONE'])\n      .range(LEVEL_COLORS);\n\n  getPercentColorScale = (metric /*: Metric */) => {\n    const color = scaleLinear().domain([0, 25, 50, 75, 100]);\n    color.range(metric.direction === 1 ? COLORS.reverse() : COLORS);\n    return color;\n  };\n\n  getRatingColorScale = () =>\n    scaleLinear()\n      .domain([1, 2, 3, 4, 5])\n      .range(COLORS);\n\n  getColorScale = (metric /*: Metric */) => {\n    if (metric.type === 'LEVEL') {\n      return this.getLevelColorScale();\n    }\n    if (metric.type === 'RATING') {\n      return this.getRatingColorScale();\n    }\n    return this.getPercentColorScale(metric);\n  };\n\n  getTooltip = (\n    componentName /*: string */,\n    colorMetric /*: Metric */,\n    sizeMetric /*: Metric */,\n    colorValue /*: ?number */,\n    sizeValue /*: number */\n  ) => {\n    const formatted =\n      colorMetric != null && colorValue != null ? formatMeasure(colorValue, colorMetric.type) : '';\n    return (\n      <div className=\"text-left\">\n        {componentName}\n        <br />\n        {`${getLocalizedMetricName(sizeMetric)}: ${formatMeasure(sizeValue, sizeMetric.type)}`}\n        <br />\n        {`${getLocalizedMetricName(colorMetric)}: ${formatted}`}\n      </div>\n    );\n  };\n\n  renderLegend() {\n    const { metric } = this.props;\n    const colorScale = this.getColorScale(metric);\n    if (['LEVEL', 'RATING'].includes(metric.type)) {\n      return (\n        <ColorBoxLegend\n          className=\"measure-details-treemap-legend color-box-full\"\n          colorScale={colorScale}\n          metricType={metric.type}\n        />\n      );\n    }\n    return (\n      <ColorGradientLegend\n        className=\"measure-details-treemap-legend\"\n        colorScale={colorScale}\n        colorNA={theme.secondFontColor}\n        direction={metric.direction}\n        height={20}\n        width={200}\n      />\n    );\n  }\n\n  render() {\n    const { treemapItems } = this.state;\n    if (treemapItems.length <= 0) {\n      return <EmptyResult />;\n    }\n    const { components, metric } = this.props;\n    const sizeMeasure =\n      components.length > 0\n        ? components[0].measures.find(measure => measure.metric.key !== metric.key)\n        : null;\n    return (\n      <div className=\"measure-details-treemap\">\n        <ul className=\"list-inline note spacer-bottom\">\n          <li>\n            {translateWithParameters(\n              'component_measures.legend.color_x',\n              getLocalizedMetricName(metric)\n            )}\n          </li>\n          <li>\n            {translateWithParameters(\n              'component_measures.legend.size_x',\n              translate(\n                'metric',\n                sizeMeasure && sizeMeasure.metric ? sizeMeasure.metric.key : 'ncloc',\n                'name'\n              )\n            )}\n          </li>\n          <li className=\"pull-right\">{this.renderLegend()}</li>\n        </ul>\n        <AutoSizer disableHeight={true}>\n          {({ width }) => (\n            <TreeMap\n              height={HEIGHT}\n              items={treemapItems}\n              onRectangleClick={this.props.handleSelect}\n              width={width}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport Breadcrumbs from './Breadcrumbs';\nimport MeasureFavoriteContainer from './MeasureFavoriteContainer';\nimport MeasureHeader from './MeasureHeader';\nimport MeasureViewSelect from './MeasureViewSelect';\nimport MetricNotFound from './MetricNotFound';\nimport PageActions from './PageActions';\nimport FilesView from '../drilldown/FilesView';\nimport CodeView from '../drilldown/CodeView';\nimport TreeMapView from '../drilldown/TreeMapView';\nimport { getComponentTree } from '../../../api/components';\nimport { complementary } from '../config/complementary';\nimport { enhanceComponent, isFileType, isViewType } from '../utils';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { isDiffMetric } from '../../../helpers/measures';\nimport { isSameBranchLike, getBranchLikeQuery } from '../../../helpers/branches';\n/*:: import type { Component, ComponentEnhanced, Paging, Period } from '../types'; */\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n// Switching to the following type will make flow crash with :\n// https://github.com/facebook/flow/issues/3147\n// router: { push: ({ pathname: string, query?: RawQuery }) => void }\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  className?: string,\n  component: Component,\n  currentUser: { isLoggedIn: boolean },\n  loading: boolean,\n  leakPeriod?: Period,\n  measure: ?MeasureEnhanced,\n  metric: Metric,\n  metrics: { [string]: Metric },\n  rootComponent: Component,\n  router: Object,\n  secondaryMeasure: ?MeasureEnhanced,\n  updateLoading: ({ [string]: boolean }) => void,\n  updateSelected: string => void,\n  updateView: string => void,\n  view: string\n|}; */\n\n/*:: type State = {\n  bestValue?: string,\n  components: Array<ComponentEnhanced>,\n  metric: ?Metric,\n  paging?: Paging,\n  selected: ?string,\n  view: ?string\n}; */\n\nexport default class MeasureContent extends React.PureComponent {\n  /*:: container: HTMLElement; */\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    components: [],\n    metric: null,\n    paging: null,\n    selected: null,\n    view: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponents(this.props);\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike) ||\n      nextProps.component !== this.props.component ||\n      nextProps.metric !== this.props.metric\n    ) {\n      this.fetchComponents(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getSelectedIndex = () => {\n    const componentKey = isFileType(this.props.component)\n      ? this.props.component.key\n      : this.state.selected;\n    const index = this.state.components.findIndex(component => component.key === componentKey);\n    return index !== -1 ? index : null;\n  };\n\n  getComponentRequestParams = (\n    view /*: string */,\n    metric /*: Metric */,\n    options /*: Object */ = {}\n  ) => {\n    const strategy = view === 'list' ? 'leaves' : 'children';\n    const metricKeys = [metric.key];\n    const opts /*: Object */ = {\n      ...getBranchLikeQuery(this.props.branchLike),\n      additionalFields: 'metrics',\n      metricSortFilter: 'withMeasuresOnly'\n    };\n    const isDiff = isDiffMetric(metric.key);\n    if (isDiff) {\n      opts.metricPeriodSort = 1;\n    }\n    if (view === 'treemap') {\n      const sizeMetric = isDiff ? 'new_lines' : 'ncloc';\n      metricKeys.push(sizeMetric);\n      opts.metricSort = sizeMetric;\n      opts.s = isDiff ? 'metricPeriod' : 'metric';\n      opts.asc = false;\n    } else {\n      metricKeys.push(...(complementary[metric.key] || []));\n      opts.asc = metric.direction === 1;\n      opts.ps = 100;\n      opts.metricSort = metric.key;\n      opts.s = isDiff ? 'metricPeriod' : 'metric';\n    }\n    return { metricKeys, opts: { ...opts, ...options }, strategy };\n  };\n\n  fetchComponents = ({ component, metric, metrics, view } /*: Props */) => {\n    if (isFileType(component)) {\n      return this.setState({ metric: null, view: null });\n    }\n\n    const { metricKeys, opts, strategy } = this.getComponentRequestParams(view, metric);\n    this.props.updateLoading({ components: true });\n    getComponentTree(strategy, component.key, metricKeys, opts).then(\n      r => {\n        if (metric === this.props.metric) {\n          if (this.mounted) {\n            this.setState(({ selected } /*: State */) => ({\n              bestValue: r.metrics[0].bestValue,\n              components: r.components.map(component =>\n                enhanceComponent(component, metric, metrics)\n              ),\n              metric,\n              paging: r.paging,\n              selected:\n                r.components.length > 0 && !r.components.find(c => c.key === selected)\n                  ? r.components[0].key\n                  : selected,\n              view\n            }));\n          }\n          this.props.updateLoading({ components: false });\n        }\n      },\n      () => this.props.updateLoading({ components: false })\n    );\n  };\n\n  fetchMoreComponents = () => {\n    const { component, metric, metrics, view } = this.props;\n    const { paging } = this.state;\n    if (!paging) {\n      return;\n    }\n    const { metricKeys, opts, strategy } = this.getComponentRequestParams(view, metric, {\n      p: paging.pageIndex + 1\n    });\n    this.props.updateLoading({ components: true });\n    getComponentTree(strategy, component.key, metricKeys, opts).then(\n      r => {\n        if (metric === this.props.metric) {\n          if (this.mounted) {\n            this.setState(state => ({\n              bestValue: r.metrics[0].bestValue,\n              components: [\n                ...state.components,\n                ...r.components.map(component => enhanceComponent(component, metric, metrics))\n              ],\n              metric,\n              paging: r.paging,\n              view\n            }));\n          }\n          this.props.updateLoading({ components: false });\n        }\n      },\n      () => this.props.updateLoading({ components: false })\n    );\n  };\n\n  onOpenComponent = (componentKey /*: string */) => {\n    if (isViewType(this.props.rootComponent)) {\n      const component = this.state.components.find(\n        component => component.refKey === componentKey || component.key === componentKey\n      );\n      if (component && component.refKey != null) {\n        if (this.props.view === 'treemap') {\n          this.props.router.push(getProjectUrl(componentKey));\n        }\n        return;\n      }\n    }\n    this.setState({ selected: this.props.component.key });\n    this.props.updateSelected(componentKey);\n    if (this.container) {\n      this.container.focus();\n    }\n  };\n\n  onSelectComponent = (componentKey /*: string */) => this.setState({ selected: componentKey });\n\n  renderCode() {\n    return (\n      <div className=\"measure-details-viewer\">\n        <CodeView\n          branchLike={this.props.branchLike}\n          component={this.props.component}\n          components={this.state.components}\n          leakPeriod={this.props.leakPeriod}\n          metric={this.props.metric}\n          selectedIdx={this.getSelectedIndex()}\n          updateSelected={this.props.updateSelected}\n        />\n      </div>\n    );\n  }\n\n  renderMeasure() {\n    const { metric, view } = this.state;\n    if (metric != null) {\n      if (['list', 'tree'].includes(view)) {\n        const selectedIdx = this.getSelectedIndex();\n        return (\n          <FilesView\n            bestValue={this.state.bestValue}\n            branchLike={this.props.branchLike}\n            components={this.state.components}\n            fetchMore={this.fetchMoreComponents}\n            handleOpen={this.onOpenComponent}\n            handleSelect={this.onSelectComponent}\n            metric={metric}\n            metrics={this.props.metrics}\n            paging={this.state.paging}\n            rootComponent={this.props.rootComponent}\n            selectedIdx={selectedIdx}\n            selectedKey={selectedIdx != null ? this.state.selected : null}\n          />\n        );\n      }\n\n      if (view === 'treemap') {\n        return (\n          <TreeMapView\n            branchLike={this.props.branchLike}\n            components={this.state.components}\n            handleSelect={this.onOpenComponent}\n            metric={metric}\n          />\n        );\n      }\n    }\n\n    return null;\n  }\n\n  render() {\n    const { branchLike, component, currentUser, measure, metric, rootComponent, view } = this.props;\n    const isLoggedIn = currentUser && currentUser.isLoggedIn;\n    const isFile = isFileType(component);\n    const selectedIdx = this.getSelectedIndex();\n    return (\n      <div\n        className={classNames('no-outline', this.props.className)}\n        ref={container => (this.container = container)}\n        tabIndex={0}>\n        <div className=\"layout-page-header-panel layout-page-main-header\">\n          <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n            <div className=\"layout-page-main-inner\">\n              <Breadcrumbs\n                backToFirst={view === 'list'}\n                branchLike={branchLike}\n                className=\"measure-breadcrumbs spacer-right text-ellipsis\"\n                component={component}\n                handleSelect={this.onOpenComponent}\n                rootComponent={rootComponent}\n              />\n              {component.key !== rootComponent.key &&\n                isLoggedIn && (\n                  <MeasureFavoriteContainer\n                    branchLike={branchLike}\n                    component={component.key}\n                    className=\"measure-favorite spacer-right\"\n                  />\n                )}\n              {!isFile && (\n                <MeasureViewSelect\n                  className=\"measure-view-select\"\n                  metric={metric}\n                  handleViewChange={this.props.updateView}\n                  view={view}\n                />\n              )}\n              <PageActions\n                current={selectedIdx != null && view !== 'treemap' ? selectedIdx + 1 : null}\n                loading={this.props.loading}\n                isFile={isFile}\n                paging={this.state.paging}\n                totalLoadedComponents={this.state.components.length}\n                view={view}\n              />\n            </div>\n          </div>\n        </div>\n        {metric == null && (\n          <MetricNotFound className=\"layout-page-main-inner measure-details-content\" />\n        )}\n        {metric != null && (\n          <div className=\"layout-page-main-inner measure-details-content\">\n            <MeasureHeader\n              branchLike={branchLike}\n              component={component}\n              components={this.state.components}\n              leakPeriod={this.props.leakPeriod}\n              // fall back to `undefined` to be compatible with typescript files where we compare with `=== undefined`\n              measure={measure || undefined}\n              metric={metric}\n              secondaryMeasure={this.props.secondaryMeasure}\n            />\n            {isFileType(component) ? this.renderCode() : this.renderMeasure()}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport MeasureContent from './MeasureContent';\n/*:: import type { Component, Period, Query } from '../types'; */\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n/*:: import type { RawQuery } from '../../../helpers/query'; */\n\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  className?: string,\n  currentUser: { isLoggedIn: boolean },\n  rootComponent: Component,\n  fetchMeasures: (\n    component: string,\n    metricsKey: Array<string>,\n    branchLike?: { id?: string; name: string }\n  ) => Promise<{ component: Component, measures: Array<MeasureEnhanced> }>,\n  leakPeriod?: Period,\n  metric: Metric,\n  metrics: { [string]: Metric },\n  router: {\n    push: ({ pathname: string, query?: RawQuery }) => void\n  },\n  selected: ?string,\n  updateQuery: Query => void,\n  view: string\n|}; */\n\n/*:: type State = {\n  component: ?Component,\n  loading: {\n    measure: boolean,\n    components: boolean\n  },\n  measure: ?MeasureEnhanced,\n  secondaryMeasure: ?MeasureEnhanced\n}; */\n\nexport default class MeasureContentContainer extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    component: null,\n    loading: {\n      measure: false,\n      components: false\n    },\n    measure: null,\n    secondaryMeasure: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchMeasure(this.props);\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    const { component } = this.state;\n    const componentChanged =\n      !component ||\n      nextProps.rootComponent.key !== component.key ||\n      nextProps.selected !== component.key;\n    if (componentChanged || nextProps.metric !== this.props.metric) {\n      this.fetchMeasure(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchMeasure = ({ branchLike, rootComponent, fetchMeasures, metric, selected } /*: Props */) => {\n    this.updateLoading({ measure: true });\n\n    const metricKeys = [metric.key];\n    if (metric.key === 'ncloc') {\n      metricKeys.push('ncloc_language_distribution');\n    }\n\n    fetchMeasures(selected || rootComponent.key, metricKeys, branchLike).then(\n      ({ component, measures }) => {\n        if (this.mounted) {\n          const measure = measures.find(measure => measure.metric.key === metric.key);\n          const secondaryMeasure = measures.find(measure => measure.metric.key !== metric.key);\n          this.setState({ component, measure, secondaryMeasure });\n          this.updateLoading({ measure: false });\n        }\n      },\n      () => this.updateLoading({ measure: false })\n    );\n  };\n\n  updateLoading = (loading /*: { [string]: boolean } */) => {\n    if (this.mounted) {\n      this.setState(state => ({ loading: { ...state.loading, ...loading } }));\n    }\n  };\n\n  updateSelected = (component /*: string */) =>\n    this.props.updateQuery({\n      selected: component !== this.props.rootComponent.key ? component : null\n    });\n\n  updateView = (view /*: string */) => this.props.updateQuery({ view });\n\n  render() {\n    if (!this.state.component) {\n      return null;\n    }\n\n    return (\n      <MeasureContent\n        branchLike={this.props.branchLike}\n        className={this.props.className}\n        component={this.state.component}\n        currentUser={this.props.currentUser}\n        loading={this.state.loading.measure || this.state.loading.components}\n        leakPeriod={this.props.leakPeriod}\n        measure={this.state.measure}\n        metric={this.props.metric}\n        metrics={this.props.metrics}\n        rootComponent={this.props.rootComponent}\n        router={this.props.router}\n        secondaryMeasure={this.state.secondaryMeasure}\n        updateLoading={this.updateLoading}\n        updateSelected={this.updateSelected}\n        updateView={this.updateView}\n        view={this.props.view}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport EmptyResult from './EmptyResult';\nimport OriginalBubbleChart from '../../../components/charts/BubbleChart';\nimport ColorRatingsLegend from '../../../components/charts/ColorRatingsLegend';\nimport HelpTooltip from '../../../components/controls/HelpTooltip';\nimport { formatMeasure, isDiffMetric } from '../../../helpers/measures';\nimport {\n  getLocalizedMetricDomain,\n  getLocalizedMetricName,\n  translate,\n  translateWithParameters\n} from '../../../helpers/l10n';\nimport { getBubbleMetrics, getBubbleYDomain, isProjectOverview } from '../utils';\nimport { RATING_COLORS } from '../../../helpers/constants';\n/*:: import type { Component, ComponentEnhanced } from '../types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\nconst HEIGHT = 500;\n\n/*:: type Props = {|\n  component: Component,\n  components: Array<ComponentEnhanced>,\n  domain: string,\n  metrics: { [string]: Metric },\n  updateSelected: string => void\n|}; */\n\nexport default class BubbleChart extends React.PureComponent {\n  /*:: props: Props; */\n\n  getMeasureVal = (component /*: ComponentEnhanced */, metric /*: Metric */) => {\n    const measure = component.measures.find(measure => measure.metric.key === metric.key);\n    if (measure) {\n      return Number(isDiffMetric(metric.key) ? measure.leak : measure.value);\n    }\n  };\n\n  getTooltip(\n    componentName /*: string */,\n    values /*: {\n      x: number,\n      y: number,\n      size: number,\n      colors: ?Array<?number>\n    }*/,\n    metrics /*: {\n      x: Metric ,\n      y: Metric ,\n      size: Metric ,\n      colors: ?Array<Metric>\n    }*/\n  ) {\n    const inner = [\n      componentName,\n      `${metrics.x.name}: ${formatMeasure(values.x, metrics.x.type)}`,\n      `${metrics.y.name}: ${formatMeasure(values.y, metrics.y.type)}`,\n      `${metrics.size.name}: ${formatMeasure(values.size, metrics.size.type)}`\n    ];\n    if (values.colors && metrics.colors) {\n      metrics.colors.forEach((metric, idx) => {\n        // $FlowFixMe colors is always defined at this point\n        const colorValue = values.colors[idx];\n        if (colorValue || colorValue === 0) {\n          inner.push(`${metric.name}: ${formatMeasure(colorValue, metric.type)}`);\n        }\n      });\n    }\n    return (\n      <div className=\"text-left\">\n        {inner.map((line, index) => (\n          <React.Fragment key={index}>\n            {line}\n            {index < inner.length - 1 && <br />}\n          </React.Fragment>\n        ))}\n      </div>\n    );\n  }\n\n  handleBubbleClick = (component /*: ComponentEnhanced */) =>\n    this.props.updateSelected(component.refKey || component.key);\n\n  getDescription(domain /*: string */) {\n    const description = `component_measures.overview.${domain}.description`;\n    const translatedDescription = translate(description);\n    if (description === translatedDescription) {\n      return null;\n    }\n    return translatedDescription;\n  }\n\n  renderBubbleChart(\n    metrics /*: {\n      x: Metric ,\n      y: Metric ,\n      size: Metric ,\n      colors: ?Array<Metric>\n    }*/\n  ) {\n    const items = this.props.components\n      .map(component => {\n        const x = this.getMeasureVal(component, metrics.x);\n        const y = this.getMeasureVal(component, metrics.y);\n        const size = this.getMeasureVal(component, metrics.size);\n        const colors =\n          metrics.colors && metrics.colors.map(metric => this.getMeasureVal(component, metric));\n        if ((!x && x !== 0) || (!y && y !== 0) || (!size && size !== 0)) {\n          return null;\n        }\n        return {\n          x,\n          y,\n          size,\n          color:\n            colors != null ? RATING_COLORS[Math.max(...colors.filter(Boolean)) - 1] : undefined,\n          link: component,\n          tooltip: this.getTooltip(component.name, { x, y, size, colors }, metrics)\n        };\n      })\n      .filter(Boolean);\n\n    const formatXTick = tick => formatMeasure(tick, metrics.x.type);\n    const formatYTick = tick => formatMeasure(tick, metrics.y.type);\n\n    return (\n      <OriginalBubbleChart\n        formatXTick={formatXTick}\n        formatYTick={formatYTick}\n        height={HEIGHT}\n        items={items}\n        onBubbleClick={this.handleBubbleClick}\n        padding={[25, 60, 50, 60]}\n        yDomain={getBubbleYDomain(this.props.domain)}\n      />\n    );\n  }\n\n  renderChartHeader(\n    domain /*: string */,\n    sizeMetric /*: Metric */,\n    colorsMetric /*: ?Array<Metric> */\n  ) {\n    const title = isProjectOverview(domain)\n      ? translate('component_measures.overview', domain, 'title')\n      : translateWithParameters(\n          'component_measures.domain_x_overview',\n          getLocalizedMetricDomain(domain)\n        );\n    return (\n      <div className=\"measure-overview-bubble-chart-header\">\n        <span className=\"measure-overview-bubble-chart-title\">\n          <span className=\"text-middle\">{title}</span>\n          <HelpTooltip className=\"spacer-left\" overlay={this.getDescription(domain)} />\n        </span>\n        <span className=\"measure-overview-bubble-chart-legend\">\n          <span className=\"note\">\n            {colorsMetric && (\n              <span className=\"spacer-right\">\n                {translateWithParameters(\n                  'component_measures.legend.color_x',\n                  colorsMetric.length > 1\n                    ? translateWithParameters(\n                        'component_measures.legend.worse_of_x_y',\n                        ...colorsMetric.map(metric => getLocalizedMetricName(metric))\n                      )\n                    : getLocalizedMetricName(colorsMetric[0])\n                )}\n              </span>\n            )}\n            {translateWithParameters(\n              'component_measures.legend.size_x',\n              getLocalizedMetricName(sizeMetric)\n            )}\n          </span>\n          {colorsMetric && <ColorRatingsLegend className=\"spacer-top\" />}\n        </span>\n      </div>\n    );\n  }\n\n  render() {\n    if (this.props.components.length <= 0) {\n      return <EmptyResult />;\n    }\n    const { domain } = this.props;\n    const metrics = getBubbleMetrics(domain, this.props.metrics);\n\n    return (\n      <div className=\"measure-overview-bubble-chart\">\n        {this.renderChartHeader(domain, metrics.size, metrics.colors)}\n        <div className=\"measure-overview-bubble-chart-content\">\n          {this.renderBubbleChart(metrics)}\n        </div>\n        <div className=\"measure-overview-bubble-chart-axis x\">\n          {getLocalizedMetricName(metrics.x)}\n        </div>\n        <div className=\"measure-overview-bubble-chart-axis y\">\n          {getLocalizedMetricName(metrics.y)}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Breadcrumbs from './Breadcrumbs';\nimport LeakPeriodLegend from './LeakPeriodLegend';\nimport MeasureFavoriteContainer from './MeasureFavoriteContainer';\nimport PageActions from './PageActions';\nimport BubbleChart from '../drilldown/BubbleChart';\nimport SourceViewer from '../../../components/SourceViewer/SourceViewer';\nimport { getComponentLeaves } from '../../../api/components';\nimport { enhanceComponent, getBubbleMetrics, isFileType } from '../utils';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n/*:: import type { Component, ComponentEnhanced, Paging, Period } from '../types'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  className?: string,\n  component: Component,\n  currentUser: { isLoggedIn: boolean },\n  domain: string,\n  leakPeriod: Period,\n  loading: boolean,\n  metrics: { [string]: Metric },\n  rootComponent: Component,\n  updateLoading: ({ [string]: boolean }) => void,\n  updateSelected: string => void\n|}; */\n\n/*:: type State = {\n  components: Array<ComponentEnhanced>,\n  paging?: Paging\n}; */\n\nconst BUBBLES_LIMIT = 500;\n\nexport default class MeasureOverview extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    components: [],\n    paging: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponents(this.props);\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (\n      nextProps.component !== this.props.component ||\n      nextProps.metrics !== this.props.metrics ||\n      nextProps.domain !== this.props.domain\n    ) {\n      this.fetchComponents(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchComponents = (props /*: Props */) => {\n    const { branchLike, component, domain, metrics } = props;\n    if (isFileType(component)) {\n      this.setState({ components: [], paging: null });\n      return;\n    }\n    const { x, y, size, colors } = getBubbleMetrics(domain, metrics);\n    const metricsKey = [x.key, y.key, size.key];\n    if (colors) {\n      metricsKey.push(colors.map(metric => metric.key));\n    }\n    const options = {\n      ...getBranchLikeQuery(branchLike),\n      s: 'metric',\n      metricSort: size.key,\n      asc: false,\n      ps: BUBBLES_LIMIT\n    };\n\n    this.props.updateLoading({ bubbles: true });\n    getComponentLeaves(component.key, metricsKey, options).then(\n      r => {\n        if (domain === this.props.domain) {\n          if (this.mounted) {\n            this.setState({\n              components: r.components.map(component => enhanceComponent(component, null, metrics)),\n              paging: r.paging\n            });\n          }\n          this.props.updateLoading({ bubbles: false });\n        }\n      },\n      () => this.props.updateLoading({ bubbles: false })\n    );\n  };\n\n  renderContent() {\n    const { branchLike, component } = this.props;\n    if (isFileType(component)) {\n      return (\n        <div className=\"measure-details-viewer\">\n          <SourceViewer branchLike={branchLike} component={component.key} />\n        </div>\n      );\n    }\n\n    return (\n      <BubbleChart\n        component={this.props.component}\n        components={this.state.components}\n        domain={this.props.domain}\n        metrics={this.props.metrics}\n        updateSelected={this.props.updateSelected}\n      />\n    );\n  }\n\n  render() {\n    const { branchLike, component, currentUser, leakPeriod, rootComponent } = this.props;\n    const isLoggedIn = currentUser && currentUser.isLoggedIn;\n    const isFile = isFileType(component);\n    return (\n      <div className={this.props.className}>\n        <div className=\"layout-page-header-panel layout-page-main-header\">\n          <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n            <div className=\"layout-page-main-inner\">\n              <Breadcrumbs\n                backToFirst={true}\n                branchLike={branchLike}\n                className=\"measure-breadcrumbs spacer-right text-ellipsis\"\n                component={component}\n                handleSelect={this.props.updateSelected}\n                rootComponent={rootComponent}\n              />\n              {component.key !== rootComponent.key &&\n                isLoggedIn && (\n                  <MeasureFavoriteContainer\n                    className=\"measure-favorite spacer-right\"\n                    component={component.key}\n                  />\n                )}\n              <PageActions\n                current={this.state.components.length}\n                isFile={isFile}\n                loading={this.props.loading}\n                paging={this.state.paging}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"layout-page-main-inner measure-details-content\">\n          <div className=\"clearfix big-spacer-bottom\">\n            {leakPeriod != null && (\n              <LeakPeriodLegend className=\"pull-right\" component={component} period={leakPeriod} />\n            )}\n          </div>\n          {!this.props.loading && this.renderContent()}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport MeasureOverview from './MeasureOverview';\nimport { getComponentShow } from '../../../api/components';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { isViewType } from '../utils';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n/*:: import type { Component, Period, Query } from '../types'; */\n/*:: import type { RawQuery } from '../../../helpers/query'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  className?: string,\n  rootComponent: Component,\n  currentUser: { isLoggedIn: boolean },\n  domain: string,\n  leakPeriod: Period,\n  metrics: { [string]: Metric },\n  router: {\n    push: ({ pathname: string, query?: RawQuery }) => void\n  },\n  selected: ?string,\n  updateQuery: Query => void\n|}; */\n\n/*:: type State = {\n  component: ?Component,\n  loading: {\n    component: boolean,\n    bubbles: boolean\n  }\n}; */\n\nexport default class MeasureOverviewContainer extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  state /*: State */ = {\n    component: null,\n    loading: {\n      component: false,\n      bubbles: false\n    }\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent(this.props);\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    const { component } = this.state;\n    const componentChanged =\n      !component ||\n      nextProps.rootComponent.key !== component.key ||\n      nextProps.selected !== component.key;\n    if (componentChanged || nextProps.domain !== this.props.domain) {\n      this.fetchComponent(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchComponent = ({ branchLike, rootComponent, selected } /*: Props */) => {\n    if (!selected || rootComponent.key === selected) {\n      this.setState({ component: rootComponent });\n      this.updateLoading({ component: false });\n      return;\n    }\n    this.updateLoading({ component: true });\n    getComponentShow({ component: selected, ...getBranchLikeQuery(branchLike) }).then(\n      ({ component }) => {\n        if (this.mounted) {\n          this.setState({ component });\n          this.updateLoading({ component: false });\n        }\n      },\n      () => this.updateLoading({ component: false })\n    );\n  };\n\n  updateLoading = (loading /*: { [string]: boolean } */) => {\n    if (this.mounted) {\n      this.setState(state => ({ loading: { ...state.loading, ...loading } }));\n    }\n  };\n\n  updateSelected = (component /*: string */) => {\n    if (this.state.component && isViewType(this.state.component)) {\n      this.props.router.push(getProjectUrl(component));\n    } else {\n      this.props.updateQuery({\n        selected: component !== this.props.rootComponent.key ? component : null\n      });\n    }\n  };\n\n  render() {\n    if (!this.state.component) {\n      return null;\n    }\n\n    return (\n      <MeasureOverview\n        branchLike={this.props.branchLike}\n        className={this.props.className}\n        component={this.state.component}\n        currentUser={this.props.currentUser}\n        domain={this.props.domain}\n        leakPeriod={this.props.leakPeriod}\n        loading={this.state.loading.component || this.state.loading.bubbles}\n        metrics={this.props.metrics}\n        rootComponent={this.props.rootComponent}\n        updateLoading={this.updateLoading}\n        updateSelected={this.updateSelected}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\n/*:: type Props = {|\n  onChange: (metric: string) => void,\n  selected: string,\n  value: string\n|}; */\n\nexport default function ProjectOverviewFacet({ value, selected, onChange } /*: Props */) {\n  const facetName = translate('component_measures.overview', value, 'facet');\n  return (\n    <FacetBox property={value}>\n      <FacetItemsList>\n        <FacetItem\n          active={value === selected}\n          disabled={false}\n          key={value}\n          name={\n            <strong id={`measure-overview-${value}-name`} title={facetName}>\n              {facetName}\n            </strong>\n          }\n          onClick={onChange}\n          value={value}\n        />\n      </FacetItemsList>\n    </FacetBox>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Measure from '../../../components/measure/Measure';\nimport { isDiffMetric } from '../../../helpers/measures';\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\n\nexport default function FacetMeasureValue({ measure } /*: { measure: MeasureEnhanced } */) {\n  if (isDiffMetric(measure.metric.key)) {\n    return (\n      <div\n        id={`measure-${measure.metric.key}-leak`}\n        className=\"domain-measures-value domain-measures-leak\">\n        <Measure\n          value={measure.leak}\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div id={`measure-${measure.metric.key}-value`} className=\"domain-measures-value\">\n      <Measure\n        value={measure.value}\n        metricKey={measure.metric.key}\n        metricType={measure.metric.type}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport FacetMeasureValue from './FacetMeasureValue';\nimport BubblesIcon from '../../../components/icons-components/BubblesIcon';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport {\n  addMeasureCategories,\n  filterMeasures,\n  hasBubbleChart,\n  hasFacetStat,\n  sortMeasures\n} from '../utils';\nimport {\n  getLocalizedCategoryMetricName,\n  getLocalizedMetricDomain,\n  getLocalizedMetricName,\n  translate\n} from '../../../helpers/l10n';\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\n\n/*:: type Props = {|\n  onChange: (metric: string) => void,\n  onToggle: (property: string) => void,\n  open: boolean,\n  domain: { name: string, measures: Array<MeasureEnhanced> },\n  selected: string\n|}; */\n\nexport default class DomainFacet extends React.PureComponent {\n  /*:: props: Props; */\n\n  handleHeaderClick = () => this.props.onToggle(this.props.domain.name);\n\n  hasFacetSelected = (\n    domain /*: { name: string } */,\n    measures /*: Array<MeasureEnhanced> */,\n    selected /*: string */\n  ) => {\n    const measureSelected = measures.find(measure => measure.metric.key === selected);\n    const overviewSelected = domain.name === selected && hasBubbleChart(domain.name);\n    return measureSelected || overviewSelected;\n  };\n\n  getValues = () => {\n    const { domain, selected } = this.props;\n    const measureSelected = domain.measures.find(measure => measure.metric.key === selected);\n    const overviewSelected = domain.name === selected && hasBubbleChart(domain.name);\n    if (measureSelected) {\n      return [getLocalizedMetricName(measureSelected.metric)];\n    }\n    return overviewSelected ? [translate('component_measures.domain_overview')] : [];\n  };\n\n  renderItemFacetStat = (item /*: MeasureEnhanced */) =>\n    hasFacetStat(item.metric.key) ? <FacetMeasureValue measure={item} /> : null;\n\n  renderItemsFacet = () => {\n    const { domain, selected } = this.props;\n    const items = addMeasureCategories(domain.name, filterMeasures(domain.measures));\n    const hasCategories = items.some(item => typeof item === 'string');\n    const translateMetric = hasCategories ? getLocalizedCategoryMetricName : getLocalizedMetricName;\n    let sortedItems = sortMeasures(domain.name, items);\n\n    sortedItems = sortedItems.filter((item, index) => {\n      return (\n        typeof item !== 'string' ||\n        (index + 1 !== sortedItems.length && typeof sortedItems[index + 1] !== 'string')\n      );\n    });\n\n    return sortedItems.map(\n      item =>\n        typeof item === 'string' ? (\n          <span className=\"facet search-navigator-facet facet-category\" key={item}>\n            <span className=\"facet-name\">\n              {translate('component_measures.facet_category', item)}\n            </span>\n          </span>\n        ) : (\n          <FacetItem\n            active={item.metric.key === selected}\n            disabled={false}\n            key={item.metric.key}\n            name={\n              <span className=\"big-spacer-left\" id={`measure-${item.metric.key}-name`}>\n                {translateMetric(item.metric)}\n              </span>\n            }\n            onClick={this.props.onChange}\n            stat={this.renderItemFacetStat(item)}\n            value={item.metric.key}\n          />\n        )\n    );\n  };\n\n  renderOverviewFacet = () => {\n    const { domain, selected } = this.props;\n    if (!hasBubbleChart(domain.name)) {\n      return null;\n    }\n    return (\n      <FacetItem\n        active={domain.name === selected}\n        disabled={false}\n        key={domain.name}\n        name={\n          <span id={`measure-overview-${domain.name}-name`}>\n            {translate('component_measures.domain_overview')}\n          </span>\n        }\n        onClick={this.props.onChange}\n        stat={<BubblesIcon size={14} />}\n        value={domain.name}\n      />\n    );\n  };\n\n  render() {\n    const { domain } = this.props;\n    const helper = `component_measures.domain_facets.${domain.name}.help`;\n    const translatedHelper = translate(helper);\n    return (\n      <FacetBox property={domain.name}>\n        <FacetHeader\n          helper={helper !== translatedHelper ? translatedHelper : undefined}\n          name={getLocalizedMetricDomain(domain.name)}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && (\n          <FacetItemsList>\n            {this.renderOverviewFacet()}\n            {this.renderItemsFacet()}\n          </FacetItemsList>\n        )}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport ProjectOverviewFacet from './ProjectOverviewFacet';\nimport DomainFacet from './DomainFacet';\nimport { getDefaultView, groupByDomains, KNOWN_DOMAINS, PROJECT_OVERVEW } from '../utils';\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\n/*:: import type { Query } from '../types'; */\n\n/*:: type Props = {|\n  measures: Array<MeasureEnhanced>,\n  selectedMetric: string,\n  updateQuery: Query => void\n|}; */\n\n/*:: type State = {|\n  openFacets: { [string]: boolean }\n|}; */\n\nexport default class Sidebar extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = { openFacets: this.getOpenFacets({}, props) };\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (nextProps.selectedMetric !== this.props.selectedMetric) {\n      this.setState(state => this.getOpenFacets(state.openFacets, nextProps));\n    }\n  }\n\n  getOpenFacets = (\n    openFacets /*: { [string]: boolean } */,\n    { measures, selectedMetric } /*: Props */\n  ) => {\n    const newOpenFacets = { ...openFacets };\n    const measure = measures.find(measure => measure.metric.key === selectedMetric);\n    if (measure && measure.metric && measure.metric.domain) {\n      newOpenFacets[measure.metric.domain] = true;\n    } else if (KNOWN_DOMAINS.includes(selectedMetric)) {\n      newOpenFacets[selectedMetric] = true;\n    }\n    return newOpenFacets;\n  };\n\n  toggleFacet = (name /*: string */) => {\n    this.setState(({ openFacets } /*: State */) => ({\n      openFacets: { ...openFacets, [name]: !openFacets[name] }\n    }));\n  };\n\n  resetSelection = (metric /*: string */) => ({ selected: null, view: getDefaultView(metric) });\n\n  changeMetric = (metric /*: string */) =>\n    this.props.updateQuery({ metric, ...this.resetSelection(metric) });\n\n  render() {\n    return (\n      <div className=\"search-navigator-facets-list\">\n        <ProjectOverviewFacet\n          onChange={this.changeMetric}\n          selected={this.props.selectedMetric}\n          value={PROJECT_OVERVEW}\n        />\n        {groupByDomains(this.props.measures).map(domain => (\n          <DomainFacet\n            domain={domain}\n            key={domain.name}\n            onChange={this.changeMetric}\n            onToggle={this.toggleFacet}\n            open={this.state.openFacets[domain.name] === true}\n            selected={this.props.selectedMetric}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport key from 'keymaster';\nimport MeasureContentContainer from './MeasureContentContainer';\nimport MeasureOverviewContainer from './MeasureOverviewContainer';\nimport Sidebar from '../sidebar/Sidebar';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport { isProjectOverview, hasBubbleChart, parseQuery, serializeQuery } from '../utils';\nimport { isSameBranchLike, getBranchLikeQuery } from '../../../helpers/branches';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport {\n  getLocalizedMetricDomain,\n  translateWithParameters,\n  translate\n} from '../../../helpers/l10n';\nimport { getDisplayMetrics } from '../../../helpers/measures';\n/*:: import type { Component, Query, Period } from '../types'; */\n/*:: import type { RawQuery } from '../../../helpers/query'; */\n/*:: import type { Metric } from '../../../store/metrics/actions'; */\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\nimport '../../../components/search-navigator.css';\nimport '../style.css';\n\n/*:: type Props = {|\n  branchLike?: { id?: string; name: string },\n  component: Component,\n  currentUser: { isLoggedIn: boolean },\n  location: { pathname: string, query: RawQuery },\n  fetchMeasures: (\n    component: string,\n    metricsKey: Array<string>,\n    branchLike?: { id?: string; name: string }\n  ) => Promise<{ component: Component, measures: Array<MeasureEnhanced>, leakPeriod: ?Period }>,\n  fetchMetrics: () => void,\n  metrics: { [string]: Metric },\n  metricsKey: Array<string>,\n  router: {\n    push: ({ pathname: string, query?: RawQuery }) => void\n  }\n|}; */\n\n/*:: type State = {|\n  loading: boolean,\n  measures: Array<MeasureEnhanced>,\n  leakPeriod: ?Period\n|}; */\n\nexport default class App extends React.PureComponent {\n  /*:: mounted: boolean; */\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  constructor(props /*: Props */) {\n    super(props);\n    this.state = {\n      loading: true,\n      measures: [],\n      leakPeriod: null\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    // $FlowFixMe\n    document.body.classList.add('white-page');\n    // $FlowFixMe\n    document.documentElement.classList.add('white-page');\n    this.props.fetchMetrics();\n    this.fetchMeasures(this.props);\n    key.setScope('measures-files');\n    const footer = document.getElementById('footer');\n    if (footer) {\n      footer.classList.add('page-footer-with-sidebar');\n    }\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike) ||\n      nextProps.component.key !== this.props.component.key ||\n      nextProps.metrics !== this.props.metrics\n    ) {\n      this.fetchMeasures(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    // $FlowFixMe\n    document.body.classList.remove('white-page');\n    // $FlowFixMe\n    document.documentElement.classList.remove('white-page');\n    key.deleteScope('measures-files');\n    const footer = document.getElementById('footer');\n    if (footer) {\n      footer.classList.remove('page-footer-with-sidebar');\n    }\n  }\n\n  fetchMeasures = ({ branchLike, component, fetchMeasures, metrics } /*: Props */) => {\n    this.setState({ loading: true });\n    const filteredKeys = getDisplayMetrics(Object.values(metrics)).map(metric => metric.key);\n    fetchMeasures(component.key, filteredKeys, branchLike).then(\n      ({ measures, leakPeriod }) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            leakPeriod,\n            measures: measures.filter(measure => measure.value != null || measure.leak != null)\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  updateQuery = (newQuery /*: Query */) => {\n    const query = serializeQuery({\n      ...parseQuery(this.props.location.query),\n      ...newQuery\n    });\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...query,\n        ...getBranchLikeQuery(this.props.branchLike),\n        id: this.props.component.key\n      }\n    });\n  };\n\n  getHelmetTitle = (\n    metric /*: Metric */,\n    query /*: {metric: string, selected: string, view: string }*/\n  ) => {\n    if (metric == null && hasBubbleChart(query.metric)) {\n      return isProjectOverview(query.metric)\n        ? translate('component_measures.overview.project_overview.facet')\n        : translateWithParameters(\n            'component_measures.domain_x_overview',\n            getLocalizedMetricDomain(query.metric)\n          );\n    }\n    return metric != null ? metric.name : translate('layout.measures');\n  };\n\n  render() {\n    const isLoading = this.state.loading || this.props.metricsKey.length <= 0;\n    if (isLoading) {\n      return <i className=\"spinner spinner-margin\" />;\n    }\n    const { branchLike, component, fetchMeasures, metrics } = this.props;\n    const { leakPeriod } = this.state;\n    const query = parseQuery(this.props.location.query);\n    const metric = metrics[query.metric];\n    return (\n      <div className=\"layout-page\" id=\"component-measures\">\n        <Suggestions suggestions=\"component_measures\" />\n        <Helmet title={this.getHelmetTitle(metric, query)} />\n\n        <ScreenPositionHelper className=\"layout-page-side-outer\">\n          {({ top }) => (\n            <div className=\"layout-page-side\" style={{ top }}>\n              <div className=\"layout-page-side-inner\">\n                <div className=\"layout-page-filters\">\n                  <Sidebar\n                    measures={this.state.measures}\n                    selectedMetric={query.metric}\n                    updateQuery={this.updateQuery}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n        </ScreenPositionHelper>\n\n        {metric != null && (\n          <MeasureContentContainer\n            branchLike={branchLike}\n            className=\"layout-page-main\"\n            currentUser={this.props.currentUser}\n            fetchMeasures={fetchMeasures}\n            leakPeriod={leakPeriod}\n            metric={metric}\n            metrics={metrics}\n            rootComponent={component}\n            router={this.props.router}\n            selected={query.selected}\n            updateQuery={this.updateQuery}\n            view={query.view}\n          />\n        )}\n        {metric == null &&\n          hasBubbleChart(query.metric) && (\n            <MeasureOverviewContainer\n              branchLike={branchLike}\n              className=\"layout-page-main\"\n              currentUser={this.props.currentUser}\n              domain={query.metric}\n              leakPeriod={leakPeriod}\n              metrics={metrics}\n              rootComponent={component}\n              router={this.props.router}\n              selected={query.selected}\n              updateQuery={this.updateQuery}\n            />\n          )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport App from './App';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport { getCurrentUser, getMetrics, getMetricsKey } from '../../../store/rootReducer';\nimport { fetchMetrics } from '../../../store/rootActions';\nimport { getMeasuresAndMeta } from '../../../api/measures';\nimport { getLeakPeriod } from '../../../helpers/periods';\nimport { enhanceMeasure } from '../../../components/measure/utils';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n/*:: import type { Component, Period } from '../types'; */\n/*:: import type { Measure, MeasureEnhanced } from '../../../components/measure/types'; */\n\nconst mapStateToProps = state => ({\n  currentUser: getCurrentUser(state),\n  metrics: getMetrics(state),\n  metricsKey: getMetricsKey(state)\n});\n\nfunction banQualityGate(component /*: Component */) /*: Array<Measure> */ {\n  const bannedMetrics = [];\n  if (!['VW', 'SVW'].includes(component.qualifier)) {\n    bannedMetrics.push('alert_status');\n  }\n  if (component.qualifier === 'APP') {\n    bannedMetrics.push('releasability_rating', 'releasability_effort');\n  }\n  return component.measures.filter(measure => !bannedMetrics.includes(measure.metric));\n}\n\nconst fetchMeasures = (\n  component /*: string */,\n  metricsKey /*: Array<string> */,\n  branchLike /*: { id?: string; name: string } | void */\n) => (dispatch, getState) => {\n  if (metricsKey.length <= 0) {\n    return Promise.resolve({ component: {}, measures: [], leakPeriod: null });\n  }\n\n  return getMeasuresAndMeta(component, metricsKey, {\n    additionalFields: 'periods',\n    ...getBranchLikeQuery(branchLike)\n  }).then(r => {\n    const measures = banQualityGate(r.component).map(measure =>\n      enhanceMeasure(measure, getMetrics(getState()))\n    );\n\n    const newBugs = measures.find(measure => measure.metric.key === 'new_bugs');\n    const applicationPeriods = newBugs ? [{ index: 1 }] : [];\n    const periods = r.component.qualifier === 'APP' ? applicationPeriods : r.periods;\n    return { component: r.component, measures, leakPeriod: getLeakPeriod(periods) };\n  }, throwGlobalError);\n};\n\nconst mapDispatchToProps = { fetchMeasures, fetchMetrics };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default class Suggestions extends React.PureComponent<Props> {\n  context!: { suggestions: SuggestionsContext };\n\n  static contextTypes = {\n    suggestions: PropTypes.object.isRequired\n  };\n\n  componentDidMount() {\n    this.context.suggestions.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.context.suggestions.removeSuggestions(this.props.suggestions);\n      this.context.suggestions.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.context.suggestions.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BugIcon from '../icons-components/BugIcon';\nimport VulnerabilityIcon from '../icons-components/VulnerabilityIcon';\nimport CodeSmellIcon from '../icons-components/CodeSmellIcon';\n\ninterface Props {\n  className?: string;\n  query: string;\n  size?: number;\n}\n\nexport default function IssueTypeIcon({ className, query, size }: Props) {\n  let icon;\n\n  switch (query.toLowerCase()) {\n    case 'bug':\n    case 'bugs':\n    case 'new_bugs':\n      icon = <BugIcon size={size} />;\n      break;\n    case 'vulnerability':\n    case 'vulnerabilities':\n    case 'new_vulnerabilities':\n      icon = <VulnerabilityIcon size={size} />;\n      break;\n    case 'code_smell':\n    case 'code_smells':\n    case 'new_code_smells':\n      icon = <CodeSmellIcon size={size} />;\n      break;\n  }\n\n  if (!icon) {\n    return null;\n  }\n\n  return className ? <span className={className}>{icon}</span> : icon;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  className?: string;\n  children: React.ReactNode;\n  property: string;\n}\n\nexport default function FacetBox(props: Props) {\n  return (\n    <div\n      className={classNames('search-navigator-facet-box', props.className)}\n      data-property={props.property}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { isOnMac } from './utils';\nimport Tooltip from '../controls/Tooltip';\nimport { translate } from '../../helpers/l10n';\n\nexport interface Props {\n  active?: boolean;\n  className?: string;\n  disabled?: boolean;\n  halfWidth?: boolean;\n  loading?: boolean;\n  name: React.ReactNode;\n  onClick: (x: string, multiple?: boolean) => void;\n  stat?: React.ReactNode;\n  tooltip?: boolean;\n  value: string;\n}\n\nexport default class FacetItem extends React.PureComponent<Props> {\n  static defaultProps = {\n    disabled: false,\n    halfWidth: false,\n    loading: false\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.value, event.ctrlKey || event.metaKey);\n  };\n\n  render() {\n    const className = classNames('facet', 'search-navigator-facet', this.props.className, {\n      active: this.props.active,\n      'search-navigator-facet-half': this.props.halfWidth\n    });\n\n    const overlay =\n      this.props.tooltip && !this.props.disabled\n        ? translate(\n            isOnMac()\n              ? 'shortcuts.section.global.facets.multiselection.mac'\n              : 'shortcuts.section.global.facets.multiselection'\n          )\n        : undefined;\n\n    return (\n      <Tooltip overlay={overlay} placement=\"right\">\n        {this.props.disabled ? (\n          <span className={className} data-facet={this.props.value}>\n            <span className=\"facet-name\">{this.props.name}</span>\n            {this.props.stat != null && (\n              <span className=\"facet-stat\">{this.props.loading ? '' : this.props.stat}</span>\n            )}\n          </span>\n        ) : (\n          <a\n            className={className}\n            data-facet={this.props.value}\n            href=\"#\"\n            onClick={this.handleClick}>\n            <span className=\"facet-name\">{this.props.name}</span>\n            {this.props.stat != null && (\n              <span className=\"facet-stat\">{this.props.loading ? '' : this.props.stat}</span>\n            )}\n          </a>\n        )}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nexport function isOnMac() {\n  return navigator.userAgent.indexOf('Mac OS X') !== -1;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport OpenCloseIcon from '../icons-components/OpenCloseIcon';\nimport HelpTooltip from '../controls/HelpTooltip';\nimport { Button } from '../ui/buttons';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  children?: React.ReactNode;\n  helper?: string;\n  name: React.ReactNode;\n  onClear?: () => void;\n  onClick?: () => void;\n  open: boolean;\n  values?: string[];\n}\n\nexport default class FacetHeader extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  renderHelper() {\n    if (!this.props.helper) {\n      return null;\n    }\n    return <HelpTooltip className=\"spacer-left\" overlay={this.props.helper} />;\n  }\n\n  renderValueIndicator() {\n    const { values } = this.props;\n    if (this.props.open || !values || !values.length) {\n      return null;\n    }\n    const value =\n      values.length === 1 ? values[0] : translateWithParameters('x_selected', values.length);\n    return (\n      <span className=\"badge badge-secondary is-rounded text-ellipsis\" title={value}>\n        {value}\n      </span>\n    );\n  }\n\n  render() {\n    const showClearButton =\n      this.props.values != null && this.props.values.length > 0 && this.props.onClear != null;\n\n    return (\n      <div className=\"search-navigator-facet-header-wrapper\">\n        {this.props.onClick ? (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            <a href=\"#\" onClick={this.handleClick}>\n              <OpenCloseIcon className=\"little-spacer-right\" open={this.props.open} />\n              {this.props.name}\n            </a>\n            {this.renderHelper()}\n          </span>\n        ) : (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            {this.props.name}\n            {this.renderHelper()}\n          </span>\n        )}\n\n        {this.props.children}\n\n        <span className=\"search-navigator-facet-header-value spacer-left spacer-right \">\n          {this.renderValueIndicator()}\n        </span>\n\n        {showClearButton && (\n          <Button\n            className=\"search-navigator-facet-header-button button-small button-red\"\n            onClick={this.props.onClear}>\n            {translate('clear')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n}\n\nexport default function FacetItemsList(props: Props) {\n  return <div className=\"search-navigator-facet-list\">{props.children}</div>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function CodeSmellIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 2C4.7 2 2 4.7 2 8s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm-.5 5.5h.9v.9h-.9v-.9zm-3.8.2c-.1 0-.2-.1-.2-.2 0-.4.1-1.2.6-2S5.3 4.2 5.6 4c.2 0 .3 0 .3.1l1.3 2.3c0 .1 0 .2-.1.2-.1.2-.2.3-.3.5-.1.2-.2.4-.2.5 0 .1-.1.2-.2.2l-2.7-.1zM9.9 12c-.3.2-1.1.5-2 .5-.9 0-1.7-.3-2-.5-.1 0-.1-.2-.1-.3l1.3-2.3c0-.1.1-.1.2-.1.2.1.3.1.5.1s.4 0 .5-.1c.1 0 .2 0 .2.1l1.3 2.3c.2.2.2.3.1.3zm2.5-4.1L9.7 8c-.1 0-.2-.1-.2-.2 0-.2-.1-.4-.2-.5 0-.1-.2-.3-.3-.4-.1 0-.1-.1-.1-.2l1.3-2.3c.1-.1.2-.1.3-.1.3.2 1 .7 1.5 1.5s.6 1.6.6 2c0 0-.1.1-.2.1z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function VulnerabilityIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M10.8 5H6V3.9a2.28 2.28 0 0 1 2-2.5 2.22 2.22 0 0 1 1.8 1.2.48.48 0 0 0 .7.2.48.48 0 0 0 .2-.7A3 3 0 0 0 8 .4a3.34 3.34 0 0 0-3 3.5v1.2a2.16 2.16 0 0 0-2 2.1v4.4a2.22 2.22 0 0 0 2.2 2.2h5.6a2.22 2.22 0 0 0 2.2-2.2V7.2A2.22 2.22 0 0 0 10.8 5zm-2.2 5.5v1.2H7.4v-1.2a1.66 1.66 0 0 1-1.1-1.6A1.75 1.75 0 0 1 8 7.2a1.71 1.71 0 0 1 .6 3.3z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BugIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M11 9h1.3l.5.8.8-.5-.8-1.3H11v-.3l2-2.3V3h-1v2l-1 1.2V5c-.1-.8-.7-1.5-1.4-1.9L11 1.8l-.7-.7-1.8 1.6-1.8-1.6-.7.7 1.5 1.3C6.7 3.5 6.1 4.2 6 5v1.1L5 5V3H4v2.3l2 2.3V8H4.2l-.7 1.2.8.5.4-.7H6v.3l-2 1.9V14h1v-2.4l1-1C6 12 7.1 13 8.4 13h.8c.7 0 1.4-.3 1.8-.9.3-.4.3-.9.2-1.4l.9.9V14h1v-2.8l-2-1.9V9zm-2 2H8V6h1v5z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from '../icons-components/SeverityIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  // TODO avoid passing nil values\n  severity: string | undefined | null;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getRatingTooltip } from './utils';\nimport Rating from '../ui/Rating';\nimport Level from '../ui/Level';\nimport Tooltip from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span>{''}</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ChevronRightIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M11.596 8.28l-4.604 4.602a.382.382 0 0 1-.279.118.382.382 0 0 1-.279-.118l-1.03-1.03a.382.382 0 0 1-.117-.278c0-.108.04-.201.117-.28L8.7 8 5.404 4.706a.382.382 0 0 1-.117-.28c0-.108.04-.2.117-.279l1.03-1.03A.382.382 0 0 1 6.714 3c.107 0 .2.04.278.118l4.604 4.603a.382.382 0 0 1 .117.279c0 .108-.04.201-.117.28z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function TagsIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M4.303 5.36a.94.94 0 0 0-.944-.945.94.94 0 0 0-.944.944c0 .524.42.944.944.944a.94.94 0 0 0 .944-.944zm7.866 4.246a.95.95 0 0 1-.273.663l-3.62 3.627a.95.95 0 0 1-1.334 0L1.671 8.618C1.295 8.249 1 7.534 1 7.01V3.944A.95.95 0 0 1 1.944 3H5.01c.523 0 1.238.295 1.614.67l5.271 5.265a.98.98 0 0 1 .273.67zm2.831 0a.95.95 0 0 1-.273.663l-3.62 3.627a.98.98 0 0 1-.67.273c-.384 0-.575-.177-.826-.435l3.465-3.465a.95.95 0 0 0 0-1.334L7.805 3.67C7.429 3.295 6.714 3 6.19 3h1.651c.524 0 1.239.295 1.615.67l5.271 5.265a.98.98 0 0 1 .273.67z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { debounce } from 'lodash';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\ninterface Props {\n  className?: string;\n  severity: string | null | undefined;\n}\n\nconst severityIcons: { [x: string]: (props: IconProps) => React.ReactElement<any> } = {\n  blocker: BlockerSeverityIcon,\n  critical: CriticalSeverityIcon,\n  major: MajorSeverityIcon,\n  minor: MinorSeverityIcon,\n  info: InfoSeverityIcon\n};\n\nexport default function SeverityIcon(props: Props) {\n  if (!props.severity) {\n    return null;\n  }\n\n  const severity = props.severity.toLowerCase();\n  const Icon = severityIcons[severity];\n  return Icon ? <Icon className={props.className} /> : null;\n}\n\nfunction BlockerSeverityIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 14c-3.311 0-6-2.689-6-6s2.689-6 6-6 6 2.689 6 6-2.689 6-6 6zM7 9h2V4H7v5zm0 3h2v-2H7v2z\"\n        style={{ fill: theme.red, fillRule: 'nonzero' }}\n      />\n    </Icon>\n  );\n}\n\nfunction CriticalSeverityIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 2c3.311 0 6 2.689 6 6s-2.689 6-6 6-6-2.689-6-6 2.689-6 6-6zm1 10V7.414l1.893 1.893c.13.124.282.216.457.261a1.006 1.006 0 0 0 1.176-.591 1.01 1.01 0 0 0 .01-.729 1.052 1.052 0 0 0-.229-.355c-1.212-1.212-2.394-2.456-3.638-3.636a1.073 1.073 0 0 0-.169-.123 1.05 1.05 0 0 0-.448-.133h-.104a1.053 1.053 0 0 0-.493.16 1.212 1.212 0 0 0-.162.132C6.08 5.505 4.836 6.687 3.656 7.932a.994.994 0 0 0-.051 1.275c.208.271.548.42.888.389.198-.019.378-.098.535-.218.041-.035.04-.034.079-.071L7 7.414V12h2z\"\n        style={{ fill: theme.red, fillRule: 'nonzero' }}\n      />\n    </Icon>\n  );\n}\n\nfunction MajorSeverityIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 2c3.311 0 6 2.689 6 6s-2.689 6-6 6-6-2.689-6-6 2.689-6 6-6zm.08 2.903c.071.008.14.019.208.039.138.042.26.114.37.205 1.244 1.146 2.426 2.357 3.639 3.536.1.103.181.218.234.352a1.01 1.01 0 0 1 .001.728 1.002 1.002 0 0 1-1.169.609 1.042 1.042 0 0 1-.46-.255L8 7.295l-2.903 2.822c-.039.036-.039.036-.08.07a1.002 1.002 0 0 1-1.604-.947c.032-.196.122-.37.253-.519C4.847 7.51 6.09 6.362 7.303 5.183c.052-.048.106-.093.167-.131a1.041 1.041 0 0 1 .61-.149z\"\n        style={{ fill: theme.red }}\n      />\n    </Icon>\n  );\n}\n\nfunction MinorSeverityIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 2c3.311 0 6 2.689 6 6s-2.689 6-6 6-6-2.689-6-6 2.689-6 6-6zm1 6.586V4H7v4.586L5.107 6.693a1.178 1.178 0 0 0-.165-.134 1.041 1.041 0 0 0-.662-.152 1 1 0 0 0-.587 1.7c1.212 1.212 2.394 2.456 3.638 3.636.094.08.195.146.311.191a1.008 1.008 0 0 0 1.065-.227c1.213-1.212 2.457-2.394 3.637-3.639a.994.994 0 0 0 .051-1.275 1.012 1.012 0 0 0-.888-.389 1.041 1.041 0 0 0-.535.218c-.04.034-.04.034-.079.071L9 8.586z\"\n        style={{ fill: theme.lightGreen }}\n      />\n    </Icon>\n  );\n}\n\nfunction InfoSeverityIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 2c3.311 0 6 2.689 6 6s-2.689 6-6 6-6-2.689-6-6 2.689-6 6-6zm1 5H7v5h2V7zm0-3H7v2h2V4z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ChevronDownIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M7.72 11.596L3.119 6.992A.382.382 0 0 1 3 6.713c0-.108.04-.2.118-.279l1.03-1.03a.382.382 0 0 1 .278-.117c.108 0 .201.04.28.117L8 8.7l3.294-3.295a.382.382 0 0 1 .28-.117c.108 0 .2.04.279.117l1.03 1.03a.382.382 0 0 1 .117.28c0 .107-.04.2-.118.278L8.28 11.596a.382.382 0 0 1-.279.117.382.382 0 0 1-.28-.117z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IconProps } from './Icon';\nimport ChevronDownIcon from './ChevronDownIcon';\nimport ChevronRightIcon from './ChevronRightcon';\n\ninterface Props extends IconProps {\n  open: boolean;\n}\n\nexport default function OpenCloseIcon({ open, ...props }: Props) {\n  return open ? <ChevronDownIcon {...props} /> : <ChevronRightIcon {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  getRatingTooltip as nextGetRatingTooltip,\n  isDiffMetric,\n  Measure,\n  MeasureEnhanced\n} from '../../helpers/measures';\nimport { Metric } from '../../app/types';\n\nconst KNOWN_RATINGS = ['sqale_rating', 'reliability_rating', 'security_rating'];\n\nexport function enhanceMeasure(\n  measure: Measure,\n  metrics: { [key: string]: Metric }\n): MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = measure.periods.find(period => period.index === 1);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".search-navigator.sticky .search-navigator-workspace-header{position:fixed;z-index:50;top:0;left:300px;right:0}.search-navigator.sticky .search-navigator-workspace-details,.search-navigator.sticky .search-navigator-workspace-list{padding-top:43px}.search-navigator-facet-box{background-color:#f3f3f3;font-size:13px}.search-navigator-facet-box.leak-facet-box{background-color:#fbf3d5;border:1px solid #eae3c7}.leak-facet-box:not(.hidden)+.leak-facet-box{border-top:none}.search-navigator-facet-box-forbidden{background-color:transparent;opacity:.5}.search-navigator-facet-box-forbidden .search-navigator-facet-container,.search-navigator-facet-box-forbidden .search-navigator-facet-empty,.search-navigator-facet-box-forbidden .search-navigator-facet-list{display:none}.search-navigator-facet-box-forbidden .search-navigator-facet-header{color:#777}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#4b9fd5}.search-navigator-facet-box-forbidden .search-navigator-facet-header{cursor:default}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#777}.search-navigator-facet{position:relative;display:inline-block;vertical-align:middle;width:100%;margin:0 0 1px;padding:4px 6px;border:none;border-radius:2px;box-sizing:border-box;white-space:normal;overflow:hidden;font-size:0;opacity:.3;cursor:not-allowed;transition:none}a.search-navigator-facet{opacity:1;cursor:pointer}a.search-navigator-facet .facet-name{color:#444}a.search-navigator-facet:focus,a.search-navigator-facet:hover{border:1px solid #4b9fd5;padding:3px 5px}a.search-navigator-facet:focus .facet-stat,a.search-navigator-facet:hover .facet-stat{top:-1px;right:-1px}.search-navigator-facet.facet-category{opacity:1;cursor:default}.search-navigator-facet.facet-category .facet-name{color:#777}.search-navigator-facet .facet-name{line-height:16px;background-color:#f3f3f3;color:#777;font-size:12px;white-space:nowrap}.search-navigator-facet .facet-stat{position:absolute;top:0;right:0;margin-left:5px;padding:5px;background-color:#f3f3f3;color:#777;font-size:12px}.search-navigator-facet .facet-stat:before{content:\\\" \\\";position:absolute;top:0;bottom:0;right:100%;width:10px;background-image:linear-gradient(90deg,hsla(0,0%,95%,0),#f3f3f3 75%)}.search-navigator-facet .facet-toggle{display:none;float:left;height:16px;line-height:16px;margin-top:-1px;padding:0 5px;border-radius:2px;font-size:11px;text-transform:lowercase}.search-navigator-facet .facet-toggle:hover{color:#444}.search-navigator-facet .facet-toggle-active.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet .facet-toggle-active.facet-toggle-red{background-color:#d4333f;color:#fff}.leak-facet-box .search-navigator-facet .facet-name,.leak-facet-box .search-navigator-facet .facet-stat{background-color:#fbf3d5}.leak-facet-box .search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,hsla(47,83%,91%,0),#fbf3d5 75%)}.search-navigator-facet.active{border:1px solid #4b9fd5;padding:3px 5px;background-color:#cae3f2;text-decoration:none}.search-navigator-facet.active .facet-name{background-color:#cae3f2}.search-navigator-facet.active .facet-stat{border-color:#4b9fd5;background-color:#cae3f2;top:-1px;right:-1px}.search-navigator-facet.active .facet-stat:before{background-image:linear-gradient(90deg,rgba(202,227,242,0),#cae3f2 75%)}.search-navigator-facet.active .facet-toggle{display:inline}.search-navigator-facet.compare .facet-toggle{cursor:not-allowed;opacity:.5}.search-navigator-facet.compare .facet-toggle.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet.compare .facet-toggle.facet-toggle-red{background-color:transparent;color:#777}.search-navigator-facet-half{width:45%}.search-navigator-facet-half:nth-child(odd){margin-right:10%}.search-navigator-facet-highlight-under-container{margin-bottom:1px}.search-navigator-facet-highlight-under-container .search-navigator-facet{margin-bottom:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover{border-bottom:none;padding-bottom:4px;border-radius:2px 2px 0 0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet{padding-left:5px;padding-right:5px;border-left:1px solid #4b9fd5;border-right:1px solid #4b9fd5;border-radius:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-stat,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet .facet-stat{right:-1px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet:last-of-type{padding-bottom:3px;border-bottom:1px solid #4b9fd5;border-radius:0 0 2px 2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover:last-of-type{padding-bottom:3px;border-bottom:1px solid #4b9fd5;border-radius:2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet{background-color:#cae3f2;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-name{background-color:#cae3f2}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-stat{border-color:#4b9fd5;background-color:#cae3f2}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(202,227,242,0),#cae3f2 75%)}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet{background-color:#a1cde8;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-name,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-name{background-color:#a1cde8}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-stat,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-stat{border-color:#4b9fd5;background-color:#a1cde8}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-stat:before,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(161,205,232,0),#a1cde8 75%)}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-toggle,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-header{display:block;flex-shrink:0;padding:8px 0;color:#444;font-weight:600;overflow:hidden;white-space:nowrap}.search-navigator-facet-header>a{border-bottom:none;color:#444}.search-navigator-facet-header>a:hover{color:#4b9fd5}.search-navigator-facet-header>.note{font-weight:400}.search-navigator-facet-header-value{display:block;overflow:hidden}.search-navigator-facet-header-value>.badge{display:block}.search-navigator-facet-header-button{flex-shrink:0;margin-left:auto}.search-navigator-facet-header-wrapper{display:flex;align-items:center}.search-navigator-facet-list{padding-bottom:8px;font-size:0}.search-navigator-facet-empty{margin:0;padding:0 10px 10px;color:#444;font-size:12px;white-space:nowrap}.search-navigator-facet-footer{display:block;padding-bottom:8px;border-bottom:none}.search-navigator-facet-container{margin-top:6px;padding:0 10px 16px}.search-navigator-date-facet-selection{position:relative;padding-left:8px;font-size:12px}.search-navigator-date-facet-selection:after,.search-navigator-date-facet-selection:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-date-facet-selection:after{clear:both}.search-navigator-date-facet-selection .date-input-control-input{width:115px!important}.search-navigator-date-facet-selection-dropdown-left{float:left;border-bottom:none}.search-navigator-date-facet-selection-dropdown-right{float:right;border-bottom:none}.search-navigator-date-facet-selection-input-left{position:absolute;left:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection-input-right{position:absolute;right:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection .date-input-control:not(:first-of-type) .date-input-calendar{left:auto;right:0}.search-navigator-filters{position:relative;padding:5px 10px;background-color:#f3f3f3}.search-navigator-filters:after,.search-navigator-filters:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-filters:after{clear:both}.search-navigator-filters-header{margin-bottom:12px;padding-bottom:11px;border-bottom:1px solid #e6e6e6}.search-navigator-intro{width:500px;margin:0 auto;padding-top:100px}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js??ref--6-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!./search-navigator.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--6-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!./search-navigator.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js??ref--6-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!./search-navigator.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DropdownIcon from '../icons-components/DropdownIcon';\nimport TagsIcon from '../icons-components/TagsIcon';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span className={classNames('tags-list', className)} title={tags.join(', ')}>\n      <TagsIcon className=\"text-middle\" />\n      <span className=\"text-ellipsis text-middle\">{tags.join(', ')}</span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function LinkIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <g transform=\"matrix(0.823497,0,0,0.823497,1.47008,1.4122)\">\n        <path\n          d=\"M13.501,11.429C13.501,11.191 13.418,10.989 13.251,10.822L11.394,8.965C11.227,8.798 11.025,8.715 10.787,8.715C10.537,8.715 10.323,8.81 10.144,9.001C10.162,9.019 10.219,9.074 10.314,9.166C10.409,9.258 10.473,9.322 10.506,9.358C10.539,9.394 10.583,9.451 10.64,9.528C10.697,9.605 10.735,9.681 10.756,9.756C10.777,9.831 10.787,9.913 10.787,10.002C10.787,10.24 10.704,10.442 10.537,10.609C10.37,10.776 10.168,10.859 9.93,10.859C9.841,10.859 9.759,10.849 9.684,10.828C9.609,10.807 9.533,10.769 9.456,10.712C9.379,10.655 9.322,10.611 9.286,10.578C9.25,10.545 9.186,10.481 9.094,10.386C9.002,10.291 8.947,10.234 8.929,10.216C8.732,10.401 8.634,10.618 8.634,10.868C8.634,11.106 8.717,11.308 8.884,11.475L10.723,13.323C10.884,13.484 11.086,13.564 11.33,13.564C11.568,13.564 11.77,13.487 11.937,13.332L13.25,12.028C13.417,11.861 13.5,11.662 13.5,11.43L13.501,11.429ZM7.224,5.134C7.224,4.896 7.141,4.694 6.974,4.527L5.135,2.679C4.968,2.512 4.766,2.429 4.528,2.429C4.296,2.429 4.094,2.509 3.921,2.67L2.608,3.974C2.441,4.141 2.358,4.34 2.358,4.572C2.358,4.81 2.441,5.012 2.608,5.179L4.465,7.036C4.626,7.197 4.828,7.277 5.072,7.277C5.322,7.277 5.536,7.185 5.715,7C5.697,6.982 5.64,6.927 5.545,6.835C5.45,6.743 5.386,6.679 5.353,6.643C5.32,6.607 5.276,6.55 5.219,6.473C5.162,6.396 5.124,6.32 5.103,6.245C5.082,6.17 5.072,6.088 5.072,5.999C5.072,5.761 5.155,5.559 5.322,5.392C5.489,5.225 5.691,5.142 5.929,5.142C6.018,5.142 6.1,5.152 6.175,5.173C6.25,5.194 6.326,5.232 6.403,5.289C6.48,5.346 6.537,5.39 6.573,5.423C6.609,5.456 6.673,5.52 6.765,5.615C6.857,5.71 6.912,5.767 6.93,5.785C7.127,5.6 7.225,5.383 7.225,5.133L7.224,5.134ZM15.215,11.429C15.215,12.143 14.962,12.747 14.456,13.242L13.143,14.546C12.649,15.04 12.045,15.287 11.33,15.287C10.61,15.287 10.003,15.034 9.509,14.528L7.67,12.68C7.176,12.186 6.929,11.582 6.929,10.867C6.929,10.135 7.191,9.513 7.715,9.001L6.929,8.215C6.417,8.739 5.798,9.001 5.072,9.001C4.358,9.001 3.751,8.751 3.251,8.251L1.394,6.394C0.894,5.894 0.644,5.287 0.644,4.573C0.644,3.859 0.897,3.255 1.403,2.76L2.716,1.456C3.21,0.962 3.814,0.715 4.529,0.715C5.249,0.715 5.856,0.968 6.35,1.474L8.189,3.322C8.683,3.816 8.93,4.42 8.93,5.135C8.93,5.867 8.668,6.489 8.144,7.001L8.93,7.787C9.442,7.263 10.061,7.001 10.787,7.001C11.501,7.001 12.108,7.251 12.608,7.751L14.465,9.608C14.965,10.108 15.215,10.715 15.215,11.429L15.215,11.429Z\"\n          style={{ fill }}\n        />\n      </g>\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BubblesIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size} style={{ fillRule: 'nonzero' }}>\n      <path\n        d=\"M4.1 10.2c1 0 1.9.8 1.9 1.9S5.1 14 4.1 14s-1.9-.8-1.9-1.9.8-1.9 1.9-1.9m0-2C2 8.2.2 9.9.2 12.1S1.9 16 4.1 16 8 14.3 8 12.1 6.2 8.2 4.1 8.2zM10.3 2c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7-3.8-1.6-3.8-3.7S8.2 2 10.3 2m0-2C7.1 0 4.5 2.6 4.5 5.7s2.6 5.7 5.7 5.7S16 8.9 16 5.7 13.4 0 10.3 0z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (elem: string) => void;\n  onSelectChange: (elem: string, selected: boolean) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default class MultiSelectOption extends React.PureComponent<Props> {\n  handleSelect = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.currentTarget.blur();\n\n    if (!this.props.disabled) {\n      this.props.onSelectChange(this.props.element, !this.props.selected);\n    }\n  };\n\n  handleHover = () => this.props.onHover(this.props.element);\n\n  render() {\n    const { selected, disabled } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': selected,\n      'icon-checkbox-invisible': disabled\n    });\n    const activeClass = classNames({ active: this.props.active, disabled });\n\n    return (\n      <li>\n        <a\n          className={activeClass}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          <i className={className} /> {this.props.custom && '+ '}\n          {this.props.renderLabel(this.props.element)}\n        </a>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport MultiSelectOption from './MultiSelectOption';\nimport SearchBox from '../controls/SearchBox';\nimport { translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (item: string, selected: boolean) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement &&\n            selectedElements.length < 1 &&\n            unselectedElements.length < 1 && (\n              <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n            )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Metric } from '../../../app/types';\nimport Measure from '../../measure/Measure';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport { getLocalizedMetricName } from '../../../helpers/l10n';\n\nexport interface MeasureWithMetric {\n  metric: Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {['bugs', 'vulnerabilities', 'code_smells'].includes(measure.metric.key) && (\n          <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />\n        )}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getCoveredFiles } from '../../../api/tests';\nimport { TestCase, CoveredFile } from '../../../app/types';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport DeferredSpinner from '../../common/DeferredSpinner';\n\ninterface Props {\n  testCase: TestCase;\n}\n\ninterface State {\n  coveredFiles?: CoveredFile[];\n  loading: boolean;\n}\n\nexport default class MeasuresOverlayCoveredFiles extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchCoveredFiles();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.testCase.id !== prevProps.testCase.id) {\n      this.fetchCoveredFiles();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchCoveredFiles = () => {\n    this.setState({ loading: true });\n    getCoveredFiles({ testId: this.props.testCase.id }).then(\n      coveredFiles => {\n        if (this.mounted) {\n          this.setState({ coveredFiles, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { testCase } = this.props;\n    const { loading, coveredFiles } = this.state;\n\n    return (\n      <div className=\"source-viewer-measures-section source-viewer-measures-section-big js-selected-test\">\n        <DeferredSpinner loading={loading}>\n          <div className=\"source-viewer-measures-card source-viewer-measures-card-fixed-height\">\n            {testCase.status !== 'ERROR' &&\n              testCase.status !== 'FAILURE' &&\n              coveredFiles !== undefined && (\n                <>\n                  <h6 className=\"spacer-bottom\">\n                    {translate('component_viewer.transition.covers')}\n                  </h6>\n                  {coveredFiles.length > 0\n                    ? coveredFiles.map(coveredFile => (\n                        <div className=\"spacer-top\" key={coveredFile.key}>\n                          <Link to={getProjectUrl(coveredFile.key)}>{coveredFile.longName}</Link>\n                          <span className=\"note spacer-left\">\n                            {translateWithParameters(\n                              'component_viewer.x_lines_are_covered',\n                              coveredFile.coveredLines\n                            )}\n                          </span>\n                        </div>\n                      ))\n                    : translate('none')}\n                </>\n              )}\n\n            {testCase.status !== 'OK' && (\n              <>\n                <h6 className=\"spacer-bottom\">{translate('component_viewer.details')}</h6>\n                {testCase.message && <pre>{testCase.message}</pre>}\n                <pre>{testCase.stacktrace}</pre>\n              </>\n            )}\n          </div>\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Paging, TestCase, CoveredFile, BranchParameters } from '../app/types';\nimport { getJSON } from '../helpers/request';\n\nexport function getTests(\n  parameters: {\n    p?: number;\n    ps?: number;\n    sourceFileKey?: string;\n    sourceFileLineNumber?: number;\n    testFileKey: string;\n    testId?: string;\n  } & BranchParameters\n): Promise<{ paging: Paging; tests: TestCase[] }> {\n  return getJSON('/api/tests/list', parameters).catch(throwGlobalError);\n}\n\nexport function getCoveredFiles(data: { testId: string }): Promise<CoveredFile[]> {\n  return getJSON('/api/tests/covered_files', data).then(r => r.files, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\ninterface Props {\n  className?: string;\n  status: string;\n}\n\nconst statusIcons: { [x: string]: (props: IconProps) => React.ReactElement<any> } = {\n  ok: OkTestStatusIcon,\n  failure: FailureTestStatusIcon,\n  error: ErrorTestStatusIcon,\n  skipped: SkippedTestStatusIcon\n};\n\nexport default function TestStatusIcon(props: Props) {\n  const status = props.status.toLowerCase();\n  const Icon = statusIcons[status];\n  return Icon ? <Icon className={props.className} /> : null;\n}\n\nfunction OkTestStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M12.03 6.734a.49.49 0 0 0-.14-.36l-.71-.702a.48.48 0 0 0-.352-.15.474.474 0 0 0-.35.15l-3.19 3.18-1.765-1.766a.479.479 0 0 0-.35-.15.479.479 0 0 0-.353.15l-.71.703a.482.482 0 0 0-.14.358c0 .14.046.258.14.352l2.828 2.828c.098.1.216.15.35.15.142 0 .26-.05.36-.15l4.243-4.242a.475.475 0 0 0 .14-.352l-.001.001zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.green }}\n      />\n    </Icon>\n  );\n}\n\nfunction FailureTestStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 14c-3.311 0-6-2.689-6-6s2.689-6 6-6 6 2.689 6 6-2.689 6-6 6zM7 9h2V4H7v5zm0 3h2v-2H7v2z\"\n        style={{ fill: theme.orange, fillRule: 'nonzero' }}\n      />\n    </Icon>\n  );\n}\n\nfunction ErrorTestStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M10.977 9.766a.497.497 0 0 0-.149-.352L9.414 8l1.414-1.414a.497.497 0 0 0 0-.711l-.703-.703a.497.497 0 0 0-.71 0L8 6.586 6.586 5.172a.497.497 0 0 0-.711 0l-.703.703a.497.497 0 0 0 0 .71L6.586 8 5.172 9.414a.497.497 0 0 0 0 .711l.703.703a.497.497 0 0 0 .71 0L8 9.414l1.414 1.414a.497.497 0 0 0 .711 0l.703-.703a.515.515 0 0 0 .149-.36zM14 8c0 3.313-2.688 6-6 6-3.313 0-6-2.688-6-6 0-3.313 2.688-6 6-6 3.313 0 6 2.688 6 6z\"\n        style={{ fill: theme.red, fillRule: 'nonzero' }}\n      />\n    </Icon>\n  );\n}\n\nfunction SkippedTestStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M11.5 8.5v-1c0-.273-.227-.5-.5-.5H5c-.273 0-.5.227-.5.5v1c0 .273.227.5.5.5h6c.273 0 .5-.227.5-.5zM14 8c0 3.313-2.688 6-6 6-3.313 0-6-2.688-6-6 0-3.313 2.688-6 6-6 3.313 0 6 2.688 6 6z\"\n        style={{ fill: theme.gray71, fillRule: 'nonzero' }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { TestCase } from '../../../app/types';\nimport TestStatusIcon from '../../icons-components/TestStatusIcon';\n\ninterface Props {\n  onClick: (testId: string) => void;\n  testCase: TestCase;\n}\n\nexport default class MeasuresOverlayTestCase extends React.PureComponent<Props> {\n  handleTestCaseClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.testCase.id);\n  };\n\n  render() {\n    const { testCase } = this.props;\n    const { status } = testCase;\n    const hasAdditionalData = status !== 'OK' || (status === 'OK' && testCase.coveredLines);\n\n    return (\n      <tr>\n        <td className=\"source-viewer-test-status\">\n          <TestStatusIcon status={status} />\n        </td>\n        <td className=\"source-viewer-test-duration note\">\n          {status !== 'SKIPPED' && `${testCase.durationInMs}ms`}\n        </td>\n        <td className=\"source-viewer-test-name\">\n          {hasAdditionalData ? (\n            <a className=\"js-show-test\" href=\"#\" onClick={this.handleTestCaseClick}>\n              {testCase.name}\n            </a>\n          ) : (\n            testCase.name\n          )}\n        </td>\n        <td className=\"source-viewer-test-covered-lines note\">{testCase.coveredLines}</td>\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { orderBy } from 'lodash';\nimport MeasuresOverlayCoveredFiles from './MeasuresOverlayCoveredFiles';\nimport MeasuresOverlayTestCase from './MeasuresOverlayTestCase';\nimport { getTests } from '../../../api/tests';\nimport { TestCase, BranchLike } from '../../../app/types';\nimport { translate } from '../../../helpers/l10n';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n}\n\ninterface State {\n  loading: boolean;\n  selectedTestId?: string;\n  sort?: string;\n  sortAsc?: boolean;\n  testCases?: TestCase[];\n}\n\nexport default class MeasuresOverlayTestCases extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchTests();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.branchLike !== this.props.branchLike ||\n      prevProps.componentKey !== this.props.componentKey\n    ) {\n      this.fetchTests();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchTests = () => {\n    // TODO implement pagination one day...\n    this.setState({ loading: true });\n    getTests({\n      ps: 500,\n      testFileKey: this.props.componentKey,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      ({ tests: testCases }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, testCases });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleTestCasesSortClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { sort } = event.currentTarget.dataset;\n    if (sort) {\n      this.setState((state: State) => ({\n        sort,\n        sortAsc: sort === state.sort ? !state.sortAsc : true\n      }));\n    }\n  };\n\n  handleTestCaseClick = (selectedTestId: string) => {\n    this.setState({ selectedTestId });\n  };\n\n  render() {\n    const { selectedTestId, sort = 'name', sortAsc = true, testCases } = this.state;\n\n    if (!testCases) {\n      return null;\n    }\n\n    const selectedTest = testCases.find(test => test.id === selectedTestId);\n\n    return (\n      <div className=\"source-viewer-measures\">\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          <div className=\"source-viewer-measures-card source-viewer-measures-card-fixed-height js-test-list\">\n            <div className=\"measures\">\n              <table className=\"source-viewer-tests-list\">\n                <tbody>\n                  <tr>\n                    <td className=\"source-viewer-test-status note\" colSpan={3}>\n                      {translate('component_viewer.measure_section.unit_tests')}\n                      <br />\n                      <span className=\"spacer-right\">\n                        {translate('component_viewer.tests.ordered_by')}\n                      </span>\n                      <a\n                        className={classNames('js-sort-tests-by-duration', {\n                          'active-link': sort === 'duration'\n                        })}\n                        data-sort=\"duration\"\n                        href=\"#\"\n                        onClick={this.handleTestCasesSortClick}>\n                        {translate('component_viewer.tests.duration')}\n                      </a>\n                      <span className=\"slash-separator\" />\n                      <a\n                        className={classNames('js-sort-tests-by-name', {\n                          'active-link': sort === 'name'\n                        })}\n                        data-sort=\"name\"\n                        href=\"#\"\n                        onClick={this.handleTestCasesSortClick}>\n                        {translate('component_viewer.tests.test_name')}\n                      </a>\n                      <span className=\"slash-separator\" />\n                      <a\n                        className={classNames('js-sort-tests-by-status', {\n                          'active-link': sort === 'status'\n                        })}\n                        data-sort=\"status\"\n                        href=\"#\"\n                        onClick={this.handleTestCasesSortClick}>\n                        {translate('component_viewer.tests.status')}\n                      </a>\n                    </td>\n                    <td className=\"source-viewer-test-covered-lines note\">\n                      {translate('component_viewer.covered_lines')}\n                    </td>\n                  </tr>\n                  {sortTestCases(testCases, sort, sortAsc).map(testCase => (\n                    <MeasuresOverlayTestCase\n                      key={testCase.id}\n                      onClick={this.handleTestCaseClick}\n                      testCase={testCase}\n                    />\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        {selectedTest && <MeasuresOverlayCoveredFiles testCase={selectedTest} />}\n      </div>\n    );\n  }\n}\n\nfunction sortTestCases(testCases: TestCase[], sort: string, sortAsc: boolean) {\n  const mainOrder = sortAsc ? 'asc' : 'desc';\n  if (sort === 'duration') {\n    return orderBy(testCases, ['durationInMs', 'name'], [mainOrder, 'asc']);\n  } else if (sort === 'status') {\n    return orderBy(testCases, ['status', 'name'], [mainOrder, 'asc']);\n  } else {\n    return orderBy(testCases, ['name'], [mainOrder]);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { keyBy, sortBy, groupBy } from 'lodash';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\nimport MeasuresOverlayTestCases from './MeasuresOverlayTestCases';\nimport { Button } from '../../../components/ui/buttons';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport { FacetValue, SourceViewerFile, BranchLike } from '../../../app/types';\nimport Modal from '../../controls/Modal';\nimport Measure from '../../measure/Measure';\nimport QualifierIcon from '../../icons-components/QualifierIcon';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport DuplicationsRating from '../../ui/DuplicationsRating';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport { SEVERITIES, TYPES } from '../../../helpers/constants';\nimport { translate, getLocalizedMetricName } from '../../../helpers/l10n';\nimport {\n  formatMeasure,\n  MeasureEnhanced,\n  getDisplayMetrics,\n  enhanceMeasuresWithMetrics\n} from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport TagsIcon from '../../icons-components/TagsIcon';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: FacetValue[];\n  typesFacet?: FacetValue[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        componentKey: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && typesFacet.values\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.lines)}\n              {this.renderMeasure(measures.ncloc)}\n              {this.renderMeasure(measures.comment_lines)}\n              {this.renderMeasure(measures.comment_lines_density)}\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.cognitive_complexity)}\n              {this.renderMeasure(measures.complexity)}\n              {this.renderMeasure(measures.function_complexity)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations &&\n            !!measures.violations.value && (\n              <>\n                {typesFacet && (\n                  <div className=\"measures\">\n                    <div className=\"measures-list\">\n                      {sortBy(typesFacet, f => TYPES.indexOf(f.val)).map(f => (\n                        <div className=\"measure measure-one-line\" key={f.val}>\n                          <span className=\"measure-name\">\n                            <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                            {translate('issue.type', f.val)}\n                          </span>\n                          <span className=\"measure-value\">\n                            {formatMeasure(f.count, 'SHORT_INT')}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {severitiesFacet && (\n                  <div className=\"measures\">\n                    <div className=\"measures-list\">\n                      {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                        <div className=\"measure measure-one-line\" key={f.val}>\n                          <span className=\"measure-name\">\n                            <SeverityHelper severity={f.val} />\n                          </span>\n                          <span className=\"measure-value\">\n                            {formatMeasure(f.count, 'SHORT_INT')}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {tagsFacet && (\n                  <div className=\"measures\">\n                    <div className=\"measures-list\">\n                      {tagsFacet.map(f => (\n                        <div className=\"measure measure-one-line\" key={f.val}>\n                          <span className=\"measure-name\">\n                            <TagsIcon className=\"little-spacer-right\" />\n                            {f.val}\n                          </span>\n                          <span className=\"measure-value\">\n                            {formatMeasure(f.count, 'SHORT_INT')}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </>\n            )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.uncovered_lines)}\n              {this.renderMeasure(this.state.measures.lines_to_cover)}\n              {this.renderMeasure(this.state.measures.uncovered_conditions)}\n              {this.renderMeasure(this.state.measures.conditions_to_cover)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.duplicated_blocks)}\n              {this.renderMeasure(this.state.measures.duplicated_lines)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"source-viewer-measures\">\n        <div className=\"source-viewer-measures-section\">\n          <div className=\"source-viewer-measures-card\">\n            <div className=\"measures\">\n              <div className=\"measures-list\">\n                {this.renderMeasure(measures.tests)}\n                {this.renderMeasure(measures.test_success_density)}\n                {this.renderMeasure(measures.test_failures)}\n                {this.renderMeasure(measures.test_errors)}\n                {this.renderMeasure(measures.skipped_tests)}\n                {this.renderMeasure(measures.test_execution_time)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: MeasureEnhanced[]) => {\n    return (\n      <div className=\"source-viewer-measures-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measures-list\">\n            <div className=\"measure measure-one-line measure-big\">\n              <span className=\"measure-name\">{domain}</span>\n            </div>\n            {sortBy(measures.filter(measure => measure.value !== undefined), measure =>\n              getLocalizedMetricName(measure.metric)\n            ).map(measure => this.renderMeasure(measure))}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"source-viewer-measures source-viewer-measures-secondary js-all-measures\">\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    return (\n      <Modal contentLabel=\"\" large={true} onRequestClose={this.props.onClose}>\n        <div className=\"modal-container source-viewer-measures-modal\">\n          <div className=\"source-viewer-header-component source-viewer-measures-component\">\n            <div className=\"source-viewer-header-component-project\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  <Link to={getBranchLikeUrl(sourceViewerFile.subProject, branchLike)}>\n                    {sourceViewerFile.subProjectName}\n                  </Link>\n                </>\n              )}\n            </div>\n\n            <div className=\"source-viewer-header-component-name\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                <>\n                  {this.renderTests()}\n                  <MeasuresOverlayTestCases\n                    branchLike={branchLike}\n                    componentKey={sourceViewerFile.key}\n                  />\n                </>\n              ) : (\n                <div className=\"source-viewer-measures\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <Button className=\"button-link\" onClick={this.props.onClose}>\n            {translate('close')}\n          </Button>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport * as PropTypes from 'prop-types';\nimport MeasuresOverlay from './components/MeasuresOverlay';\nimport { SourceViewerFile, BranchLike } from '../../app/types';\nimport QualifierIcon from '../icons-components/QualifierIcon';\nimport Dropdown from '../controls/Dropdown';\nimport FavoriteContainer from '../controls/FavoriteContainer';\nimport ListIcon from '../icons-components/ListIcon';\nimport { ButtonIcon } from '../ui/buttons';\nimport { PopupPlacement } from '../ui/popups';\nimport { WorkspaceContext } from '../workspace/context';\nimport {\n  getPathUrlAsString,\n  getBranchLikeUrl,\n  getComponentIssuesUrl,\n  getBaseUrl\n} from '../../helpers/urls';\nimport { collapsedDirFromPath, fileFromPath } from '../../helpers/path';\nimport { translate } from '../../helpers/l10n';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branches';\nimport { formatMeasure } from '../../helpers/measures';\nimport { omitNil } from '../../helpers/request';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  sourceViewerFile: SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  context!: { workspace: WorkspaceContext };\n\n  static contextTypes = {\n    workspace: PropTypes.object.isRequired\n  };\n\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.context.workspace.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  render() {\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName,\n      uuid\n    } = this.props.sourceViewerFile;\n    const isUnitTest = q === 'UTS';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header\">\n        <div className=\"source-viewer-header-component\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject != null && (\n              <div className=\"component-name-parent\">\n                <a\n                  className=\"link-with-icon\"\n                  href={getPathUrlAsString(getBranchLikeUrl(subProject, this.props.branchLike))}>\n                  <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n                </a>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              {this.props.sourceViewerFile.canMarkAsFavorite &&\n                (!this.props.branchLike || isMainBranch(this.props.branchLike)) && (\n                  <FavoriteContainer className=\"component-name-favorite\" componentKey={key} />\n                )}\n            </div>\n          </div>\n        </div>\n\n        <Dropdown\n          className=\"source-viewer-header-actions\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <a\n                  className=\"js-new-window\"\n                  href={getPathUrlAsString({\n                    pathname: '/component',\n                    query: { id: key, ...getBranchLikeQuery(this.props.branchLike) }\n                  })}\n                  target=\"_blank\">\n                  {translate('component_viewer.new_window')}\n                </a>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a className=\"js-raw-source\" href={rawSourcesLink} target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        <div className=\"source-viewer-header-measures\">\n          {isUnitTest && (\n            <div className=\"source-viewer-header-measure\">\n              <span className=\"source-viewer-header-measure-value\">\n                {formatMeasure(measures.tests, 'SHORT_INT')}\n              </span>\n              <span className=\"source-viewer-header-measure-label\">\n                {translate('metric.tests.name')}\n              </span>\n            </div>\n          )}\n\n          {!isUnitTest && (\n            <div className=\"source-viewer-header-measure\">\n              <span className=\"source-viewer-header-measure-value\">\n                {formatMeasure(measures.lines, 'SHORT_INT')}\n              </span>\n              <span className=\"source-viewer-header-measure-label\">\n                {translate('metric.lines.name')}\n              </span>\n            </div>\n          )}\n\n          <div className=\"source-viewer-header-measure\">\n            <span className=\"source-viewer-header-measure-value\">\n              <Link\n                to={getComponentIssuesUrl(project, {\n                  resolved: 'false',\n                  fileUuids: uuid,\n                  ...getBranchLikeQuery(this.props.branchLike)\n                })}>\n                {measures.issues != null ? formatMeasure(measures.issues, 'SHORT_INT') : 0}\n              </Link>\n            </span>\n            <span className=\"source-viewer-header-measure-label\">\n              {translate('metric.violations.name')}\n            </span>\n          </div>\n\n          {measures.coverage != null && (\n            <div className=\"source-viewer-header-measure\">\n              <span className=\"source-viewer-header-measure-value\">\n                {formatMeasure(measures.coverage, 'PERCENT')}\n              </span>\n              <span className=\"source-viewer-header-measure-label\">\n                {translate('metric.coverage.name')}\n              </span>\n            </div>\n          )}\n\n          {measures.duplicationDensity != null && (\n            <div className=\"source-viewer-header-measure\">\n              <span className=\"source-viewer-header-measure-value\">\n                {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n              </span>\n              <span className=\"source-viewer-header-measure-label\">\n                {translate('duplications')}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { BranchLike, SourceLine } from '../../../app/types';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\nimport { translate } from '../../../helpers/l10n';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  line: SourceLine;\n}\n\nexport default function LineOptionsPopup({ branchLike, componentKey, line }: Props) {\n  const permalink = {\n    pathname: '/component',\n    query: { id: componentKey, line: line.line, ...getBranchLikeQuery(branchLike) }\n  };\n  return (\n    <DropdownOverlay placement={PopupPlacement.RightTop}>\n      <div className=\"source-viewer-bubble-popup nowrap\">\n        <Link className=\"js-get-permalink\" to={permalink}>\n          {translate('component_viewer.get_permalink')}\n        </Link>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport LineOptionsPopup from './LineOptionsPopup';\nimport { BranchLike, SourceLine } from '../../../app/types';\nimport Toggler from '../../controls/Toggler';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  line: SourceLine;\n  onPopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  popupOpen: boolean;\n}\n\nexport default class LineNumber extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { branchLike, componentKey, line, popupOpen } = this.props;\n    const { line: lineNumber } = line;\n    const hasLineNumber = !!lineNumber;\n    return hasLineNumber ? (\n      <td\n        className=\"source-meta source-line-number\"\n        data-line-number={lineNumber}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={\n            <LineOptionsPopup branchLike={branchLike} componentKey={componentKey} line={line} />\n          }\n        />\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-number\" />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SourceLine } from '../../../app/types';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport DateFormatter from '../../intl/DateFormatter';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  line: SourceLine;\n}\n\nexport default function SCMPopup({ line }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.RightTop}>\n      <div className=\"source-viewer-bubble-popup abs-width-400\">\n        <div>{line.scmAuthor}</div>\n        {line.scmDate && (\n          <div className=\"spacer-top\">\n            <DateFormatter date={line.scmDate} />\n          </div>\n        )}\n        {line.scmRevision && <div className=\"spacer-top\">{line.scmRevision}</div>}\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SCMPopup from './SCMPopup';\nimport { SourceLine } from '../../../app/types';\nimport Toggler from '../../controls/Toggler';\n\ninterface Props {\n  line: SourceLine;\n  onPopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  popupOpen: boolean;\n  previousLine: SourceLine | undefined;\n}\n\nexport default class LineSCM extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen, previousLine } = this.props;\n    const hasPopup = !!line.line;\n    const cell = isSCMChanged(line, previousLine) && (\n      <div className=\"source-line-scm-inner\" data-author={line.scmAuthor} />\n    );\n    return hasPopup ? (\n      <td\n        className=\"source-meta source-line-scm\"\n        data-line-number={line.line}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<SCMPopup line={line} />}>\n          {cell}\n        </Toggler>\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: SourceLine, p: SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmAuthor != null && p.scmAuthor != null) {\n    changed = s.scmAuthor !== p.scmAuthor || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { groupBy } from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport { getTests } from '../../../api/components';\nimport { BranchLike, SourceLine, TestCase } from '../../../app/types';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport TestStatusIcon from '../../icons-components/TestStatusIcon';\nimport { PopupPlacement } from '../../ui/popups';\nimport { WorkspaceContext } from '../../workspace/context';\nimport { isSameBranchLike, getBranchLikeQuery } from '../../../helpers/branches';\nimport { translate } from '../../../helpers/l10n';\nimport { collapsePath } from '../../../helpers/path';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  line: SourceLine;\n  onClose: () => void;\n}\n\ninterface State {\n  loading: boolean;\n  testCases: TestCase[];\n}\n\nexport default class CoveragePopup extends React.PureComponent<Props, State> {\n  context!: { workspace: WorkspaceContext };\n  mounted = false;\n\n  static contextTypes = {\n    workspace: PropTypes.object.isRequired\n  };\n\n  state: State = { loading: true, testCases: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchTests();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike) ||\n      prevProps.componentKey !== this.props.componentKey ||\n      prevProps.line.line !== this.props.line.line\n    ) {\n      this.fetchTests();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchTests = () => {\n    this.setState({ loading: true });\n    getTests({\n      sourceFileKey: this.props.componentKey,\n      sourceFileLineNumber: this.props.line.line,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      testCases => {\n        if (this.mounted) {\n          this.setState({ loading: false, testCases });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleTestClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { key } = event.currentTarget.dataset;\n    if (key) {\n      this.context.workspace.openComponent({ branchLike: this.props.branchLike, key });\n    }\n    this.props.onClose();\n  };\n\n  render() {\n    const { line } = this.props;\n    const testCasesByFile = groupBy(this.state.testCases || [], 'fileKey');\n    const testFiles = Object.keys(testCasesByFile).map(fileKey => {\n      const testSet = testCasesByFile[fileKey];\n      const test = testSet[0];\n      return {\n        file: { key: test.fileKey, longName: test.fileName },\n        tests: testSet\n      };\n    });\n\n    return (\n      <DropdownOverlay placement={PopupPlacement.RightTop}>\n        <div className=\"abs-width-400\">\n          <h6 className=\"spacer-bottom\">\n            {translate('source_viewer.covered')}\n            {!!line.conditions && (\n              <div>\n                {'('}\n                {line.coveredConditions || '0'}\n                {' of '}\n                {line.conditions} {translate('source_viewer.conditions')}\n                {')'}\n              </div>\n            )}\n          </h6>\n          {this.state.loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {testFiles.length === 0 &&\n                translate('source_viewer.tooltip.no_information_about_tests')}\n              {testFiles.map(testFile => (\n                <div className=\"spacer-top text-ellipsis\" key={testFile.file.key}>\n                  <a\n                    data-key={testFile.file.key}\n                    href=\"#\"\n                    onClick={this.handleTestClick}\n                    title={testFile.file.longName}>\n                    <span>{collapsePath(testFile.file.longName)}</span>\n                  </a>\n                  <ul>\n                    {testFile.tests.map(testCase => (\n                      <li\n                        className=\"display-flex-center little-spacer-top\"\n                        key={testCase.id}\n                        title={testCase.name}>\n                        <TestStatusIcon className=\"spacer-right\" status={testCase.status} />\n                        <div className=\"display-inline-block text-ellipsis\">{testCase.name}</div>\n                        {testCase.status !== 'SKIPPED' && (\n                          <span className=\"spacer-left note\">{testCase.durationInMs}ms</span>\n                        )}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CoveragePopup from './CoveragePopup';\nimport { BranchLike, SourceLine } from '../../../app/types';\nimport Tooltip from '../../controls/Tooltip';\nimport Toggler from '../../controls/Toggler';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  line: SourceLine;\n  onPopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  popupOpen: boolean;\n}\n\nexport default class LineCoverage extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'coverage' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'coverage', open });\n  };\n\n  closePopup = () => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'coverage', open: false });\n  };\n\n  render() {\n    const { branchLike, componentKey, line, popupOpen } = this.props;\n\n    const className =\n      'source-meta source-line-coverage' +\n      (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n\n    const hasPopup =\n      line.coverageStatus === 'covered' || line.coverageStatus === 'partially-covered';\n\n    const cell = line.coverageStatus ? (\n      <Tooltip\n        overlay={popupOpen ? undefined : translate('source_viewer.tooltip', line.coverageStatus)}\n        placement=\"right\">\n        <div className=\"source-line-bar\" />\n      </Tooltip>\n    ) : (\n      <div className=\"source-line-bar\" />\n    );\n\n    if (hasPopup) {\n      return (\n        <td\n          className={className}\n          data-line-number={line.line}\n          onClick={this.handleClick}\n          // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n          role=\"button\"\n          tabIndex={0}>\n          <Toggler\n            onRequestClose={this.closePopup}\n            open={popupOpen}\n            overlay={\n              <CoveragePopup\n                branchLike={branchLike}\n                componentKey={componentKey}\n                line={line}\n                onClose={this.closePopup}\n              />\n            }>\n            {cell}\n          </Toggler>\n        </td>\n      );\n    }\n\n    return (\n      <td className={className} data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { SourceLine } from '../../../app/types';\nimport Tooltip from '../../controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  line: SourceLine;\n  onClick: (line: SourceLine) => void;\n}\n\nexport default class LineDuplications extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick(this.props.line);\n  };\n\n  render() {\n    const { line } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications', {\n      'source-line-duplicated': line.duplicated\n    });\n\n    const cell = (\n      <td\n        className={className}\n        onClick={line.duplicated ? this.handleClick : undefined}\n        role={line.duplicated ? 'button' : undefined}\n        tabIndex={line.duplicated ? 0 : undefined}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n\n    return line.duplicated ? (\n      <Tooltip overlay={translate('source_viewer.tooltip.duplicated_line')} placement=\"right\">\n        {cell}\n      </Tooltip>\n    ) : (\n      cell\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { SourceLine } from '../../../app/types';\nimport Tooltip from '../../controls/Tooltip';\nimport Toggler from '../../controls/Toggler';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  duplicated: boolean;\n  index: number;\n  line: SourceLine;\n  onPopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  popupOpen: boolean;\n  renderDuplicationPopup: (index: number, line: number) => JSX.Element;\n}\n\nexport default class LineDuplicationBlock extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications'\n    });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications',\n      open\n    });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { duplicated, index, line, popupOpen } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications-extra', {\n      'source-line-duplicated': duplicated\n    });\n\n    const cell = <div className=\"source-line-bar\" />;\n\n    return duplicated ? (\n      <td\n        className={className}\n        data-index={index}\n        data-line-number={line.line}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={this.props.renderDuplicationPopup(index, line.line)}>\n          <Tooltip overlay={translate('source_viewer.tooltip.duplicated_block')} placement=\"right\">\n            {cell}\n          </Tooltip>\n        </Toggler>\n      </td>\n    ) : (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport SeverityIcon from '../../icons-components/SeverityIcon';\nimport { sortBySeverity } from '../../../helpers/issues';\nimport { Issue, SourceLine } from '../../../app/types';\n\ninterface Props {\n  issues: Issue[];\n  line: SourceLine;\n  onClick: () => void;\n}\n\nexport default class LineIssuesIndicator extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick();\n  };\n\n  render() {\n    const { issues, line } = this.props;\n    const hasIssues = issues.length > 0;\n    const className = classNames('source-meta', 'source-line-issues', {\n      'source-line-with-issues': hasIssues\n    });\n    const mostImportantIssue = hasIssues ? sortBySeverity(issues)[0] : null;\n\n    return (\n      <td\n        className={className}\n        data-line-number={line.line}\n        onClick={hasIssues ? this.handleClick : undefined}\n        role={hasIssues ? 'button' : undefined}\n        tabIndex={hasIssues ? 0 : undefined}>\n        {mostImportantIssue != null && <SeverityIcon severity={mostImportantIssue.severity} />}\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike, Issue as IssueType } from '../../../app/types';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: IssueType[];\n  onIssueChange: (issue: IssueType) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport { LinearIssueLocation } from '../../../app/types';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(\n    token =>\n      symbolRegExp.test(token.className)\n        ? { ...token, className: `${token.className} highlighted` }\n        : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport LineIssuesList from './LineIssuesList';\nimport { BranchLike, Issue, LinearIssueLocation, SourceLine } from '../../../app/types';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: Issue[];\n  line: SourceLine;\n  onIssueChange: (issue: Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: Array<{\n    from: number;\n    to: number;\n    line: number;\n    index: number;\n    startLine: number;\n  }>;\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      prevProps.highlightedLocationMessage !== this.props.highlightedLocationMessage &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const message = selected ? highlightedLocationMessage!.text : undefined;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    return (\n      <td className={className} data-line-number={line.line}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues &&\n          issues.length > 0 && (\n            <LineIssuesList\n              branchLike={this.props.branchLike}\n              displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n              displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n              issuePopup={this.props.issuePopup}\n              issues={issues}\n              onIssueChange={this.props.onIssueChange}\n              onIssueClick={onIssueSelect}\n              onIssuePopupToggle={this.props.onIssuePopupToggle}\n              selectedIssue={selectedIssue}\n            />\n          )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\nimport LineCoverage from './LineCoverage';\nimport LineDuplications from './LineDuplications';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineCode from './LineCode';\nimport { BranchLike, Issue, LinearIssueLocation, SourceLine } from '../../../app/types';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  filtered: boolean | undefined;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: Issue[];\n  last: boolean;\n  line: SourceLine;\n  linePopup: { index?: number; line: number; name: string } | undefined;\n  loadDuplications: (line: SourceLine) => void;\n  onLinePopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  onIssueChange: (issue: Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => JSX.Element;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: Array<{\n    from: number;\n    to: number;\n    line: number;\n    index: number;\n    startLine: number;\n  }>;\n  selectedIssue: string | undefined;\n}\n\nexport default class Line extends React.PureComponent<Props> {\n  isPopupOpen = (name: string, index?: number) => {\n    const { line, linePopup } = this.props;\n    return (\n      linePopup !== undefined &&\n      linePopup.index === index &&\n      linePopup.line === line.line &&\n      linePopup.name === name\n    );\n  };\n\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const {\n      displayCoverage,\n      duplications,\n      duplicationsCount,\n      filtered,\n      issuePopup,\n      line\n    } = this.props;\n    const className = classNames('source-line', {\n      'source-line-highlighted': this.props.highlighted,\n      'source-line-filtered': filtered === true,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': this.props.last\n    });\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber\n          branchLike={this.props.branchLike}\n          componentKey={this.props.componentKey}\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('line-number')}\n        />\n\n        <LineSCM\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('scm')}\n          previousLine={this.props.previousLine}\n        />\n\n        {this.props.displayCoverage && (\n          <LineCoverage\n            branchLike={this.props.branchLike}\n            componentKey={this.props.componentKey}\n            line={line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('coverage')}\n          />\n        )}\n\n        {this.props.displayDuplications && (\n          <LineDuplications line={line} onClick={this.props.loadDuplications} />\n        )}\n\n        {times(duplicationsCount, index => (\n          <LineDuplicationBlock\n            duplicated={duplications.includes(index)}\n            index={index}\n            key={index}\n            line={this.props.line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('duplications', index)}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        ))}\n\n        {this.props.displayIssues &&\n          !this.props.displayAllIssues && (\n            <LineIssuesIndicator\n              issues={this.props.issues}\n              line={line}\n              onClick={this.handleIssuesIndicatorClick}\n            />\n          )}\n\n        <LineCode\n          branchLike={this.props.branchLike}\n          displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n          displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n          displayLocationMarkers={this.props.displayLocationMarkers}\n          highlightedLocationMessage={this.props.highlightedLocationMessage}\n          highlightedSymbols={this.props.highlightedSymbols}\n          issueLocations={this.props.issueLocations}\n          issuePopup={issuePopup}\n          issues={this.props.issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={this.props.secondaryIssueLocations}\n          selectedIssue={this.props.selectedIssue}\n          showIssues={this.props.openIssues || this.props.displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { LinearIssueLocation, TextRange } from '../../../app/types';\n\nexport function getLinearLocations(textRange: TextRange | undefined): LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { intersection } from 'lodash';\nimport Line from './components/Line';\nimport { getLinearLocations } from './helpers/issueLocations';\nimport {\n  BranchLike,\n  Duplication,\n  FlowLocation,\n  Issue,\n  LinearIssueLocation,\n  SourceLine\n} from '../../app/types';\nimport { translate } from '../../helpers/l10n';\nimport { Button } from '../ui/buttons';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  filterLine?: (line: SourceLine) => boolean;\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: Issue[] | undefined;\n  issuesByLine: { [line: number]: Issue[] };\n  linePopup: { index?: number; line: number; name: string } | undefined;\n  loadDuplications: (line: SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLinePopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => JSX.Element;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue: string | undefined;\n  sources: SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  getDuplicationsForLine = (line: SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: SourceLine): Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: SourceLine): LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getSecondaryIssueLocationsForLine = (line: SourceLine): LinearIssueLocation[] => {\n    const { highlightedLocations } = this.props;\n    if (!highlightedLocations) {\n      return EMPTY_ARRAY;\n    }\n    return highlightedLocations.reduce((locations, location, index) => {\n      const linearLocations: LinearIssueLocation[] = location\n        ? getLinearLocations(location.textRange)\n            .filter(l => l.line === line.line)\n            .map(l => ({ ...l, startLine: location.textRange.startLine, index }))\n        : [];\n      return [...locations, ...linearLocations];\n    }, []);\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const { filterLine, highlightedLocationMessage, selectedIssue, sources } = this.props;\n    const filtered = filterLine && filterLine(line);\n\n    const secondaryIssueLocations = this.getSecondaryIssueLocationsForLine(line);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n\n    // for the following properties pass null if the line for sure is not impacted\n    const symbolsForLine = this.props.symbolsByLine[line.line] || [];\n    const { highlightedSymbols } = this.props;\n    let optimizedHighlightedSymbols: string[] | undefined = intersection(\n      symbolsForLine,\n      highlightedSymbols\n    );\n    if (!optimizedHighlightedSymbols.length) {\n      optimizedHighlightedSymbols = undefined;\n    }\n\n    const optimizedSelectedIssue =\n      selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n        ? selectedIssue\n        : undefined;\n\n    const optimizedSecondaryIssueLocations =\n      secondaryIssueLocations.length > 0 ? secondaryIssueLocations : EMPTY_ARRAY;\n\n    const optimizedLocationMessage =\n      highlightedLocationMessage != null &&\n      optimizedSecondaryIssueLocations.some(\n        location => location.index === highlightedLocationMessage.index\n      )\n        ? highlightedLocationMessage\n        : undefined;\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        componentKey={this.props.componentKey}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        filtered={filtered}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizedLocationMessage}\n        highlightedSymbols={optimizedHighlightedSymbols}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLinePopupToggle={this.props.onLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        secondaryIssueLocations={optimizedSecondaryIssueLocations}\n        selectedIssue={optimizedSelectedIssue}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div>\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport * as PropTypes from 'prop-types';\nimport { groupBy, sortBy } from 'lodash';\nimport { BranchLike, DuplicatedFile, DuplicationBlock, SourceViewerFile } from '../../../app/types';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport QualifierIcon from '../../icons-components/QualifierIcon';\nimport { PopupPlacement } from '../../ui/popups';\nimport { WorkspaceContext } from '../../workspace/context';\nimport { translate } from '../../../helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from '../../../helpers/path';\nimport { getProjectUrl } from '../../../helpers/urls';\n\ninterface Props {\n  blocks: DuplicationBlock[];\n  branchLike: BranchLike | undefined;\n  duplicatedFiles?: { [ref: string]: DuplicatedFile };\n  inRemovedComponent: boolean;\n  onClose: () => void;\n  popupPosition?: any;\n  sourceViewerFile: SourceViewerFile;\n}\n\nexport default class DuplicationPopup extends React.PureComponent<Props> {\n  context!: { workspace: WorkspaceContext };\n\n  static contextTypes = {\n    workspace: PropTypes.object.isRequired\n  };\n\n  isDifferentComponent = (\n    a: { project: string; subProject?: string },\n    b: { project: string; subProject?: string }\n  ) => {\n    return Boolean(a && b && (a.project !== b.project || a.subProject !== b.subProject));\n  };\n\n  handleFileClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { key, line } = event.currentTarget.dataset;\n    if (key) {\n      this.context.workspace.openComponent({\n        branchLike: this.props.branchLike,\n        key,\n        line: line ? Number(line) : undefined\n      });\n    }\n    this.props.onClose();\n  };\n\n  render() {\n    const { duplicatedFiles = {}, sourceViewerFile } = this.props;\n\n    const groupedBlocks = groupBy(this.props.blocks, '_ref');\n    let duplications = Object.keys(groupedBlocks).map(fileRef => {\n      return {\n        blocks: groupedBlocks[fileRef],\n        file: duplicatedFiles[fileRef]\n      };\n    });\n\n    // first duplications in the same file\n    // then duplications in the same sub-project\n    // then duplications in the same project\n    // then duplications in other projects\n    duplications = sortBy(\n      duplications,\n      d => d.file.projectName !== sourceViewerFile.projectName,\n      d => d.file.subProjectName !== sourceViewerFile.subProjectName,\n      d => d.file.key !== sourceViewerFile.key\n    );\n\n    return (\n      <DropdownOverlay placement={PopupPlacement.RightTop}>\n        <div className=\"source-viewer-bubble-popup abs-width-400\">\n          {this.props.inRemovedComponent && (\n            <div className=\"alert alert-warning\">\n              {translate('duplications.dups_found_on_deleted_resource')}\n            </div>\n          )}\n          {duplications.length > 0 && (\n            <>\n              <h6 className=\"spacer-bottom\">\n                {translate('component_viewer.transition.duplication')}\n              </h6>\n              {duplications.map(duplication => (\n                <div className=\"spacer-top text-ellipsis\" key={duplication.file.key}>\n                  <div className=\"component-name\">\n                    {this.isDifferentComponent(duplication.file, this.props.sourceViewerFile) && (\n                      <>\n                        <div className=\"component-name-parent\">\n                          <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n                          <Link to={getProjectUrl(duplication.file.project)}>\n                            {duplication.file.projectName}\n                          </Link>\n                        </div>\n                        {duplication.file.subProject &&\n                          duplication.file.subProjectName && (\n                            <div className=\"component-name-parent\">\n                              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n                              <Link to={getProjectUrl(duplication.file.subProject)}>\n                                {duplication.file.subProjectName}\n                              </Link>\n                            </div>\n                          )}\n                      </>\n                    )}\n\n                    {duplication.file.key !== this.props.sourceViewerFile.key && (\n                      <div className=\"component-name-path\">\n                        <a\n                          className=\"link-action\"\n                          data-key={duplication.file.key}\n                          href=\"#\"\n                          onClick={this.handleFileClick}\n                          title={duplication.file.name}>\n                          <span>{collapsedDirFromPath(duplication.file.name)}</span>\n                          <span className=\"component-name-file\">\n                            {fileFromPath(duplication.file.name)}\n                          </span>\n                        </a>\n                      </div>\n                    )}\n\n                    <div className=\"component-name-path\">\n                      {'Lines: '}\n                      {duplication.blocks.map((block, index) => (\n                        <React.Fragment key={index}>\n                          <a\n                            data-key={duplication.file.key}\n                            data-line={block.from}\n                            href=\"#\"\n                            onClick={this.handleFileClick}>\n                            {block.from}\n                            {'  '}\n                            {block.from + block.size - 1}\n                          </a>\n                          {index < duplication.blocks.length - 1 && ', '}\n                        </React.Fragment>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { BranchLike, Issue } from '../../../app/types';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { RawQuery } from '../../../helpers/query';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(query: RawQuery, page: number, pageSize = PAGE_SIZE): Promise<Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: BranchLike | undefined\n): Promise<Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\nimport { Duplication, Issue, LinearIssueLocation, SourceLine } from '../../../app/types';\n\nexport function issuesByLine(issues: Issue[]) {\n  const index: { [line: number]: Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function locationsByLine(issues: Issue[]) {\n  const index: { [line: number]: LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { intersection, uniqBy } from 'lodash';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerCode from './SourceViewerCode';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport {\n  BranchLike,\n  DuplicatedFile,\n  Duplication,\n  FlowLocation,\n  Issue,\n  LinearIssueLocation,\n  SourceLine,\n  SourceViewerFile\n} from '../../app/types';\nimport { isSameBranchLike, getBranchLikeQuery } from '../../helpers/branches';\nimport { parseDate } from '../../helpers/dates';\nimport { translate } from '../../helpers/l10n';\nimport './styles.css';\n\n// TODO react-virtualized\n\ninterface Props {\n  aroundLine?: number;\n  branchLike: BranchLike | undefined;\n  component: string;\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent?: (\n    component: string,\n    branchLike: BranchLike | undefined\n  ) => Promise<SourceViewerFile>;\n  loadIssues?: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<Issue[]>;\n  loadSources?: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<SourceLine[]>;\n  onLoaded?: (component: SourceViewerFile, sources: SourceLine[], issues: Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  onReceiveComponent: (component: SourceViewerFile) => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n}\n\ninterface State {\n  component?: SourceViewerFile;\n  displayDuplications: boolean;\n  duplicatedFiles?: { [ref: string]: DuplicatedFile };\n  duplications?: Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: Issue[];\n  issuesByLine: { [line: number]: Issue[] };\n  linePopup?: { index?: number; line: number; name: string };\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayIssueLocationsCount: true,\n    displayIssueLocationsLink: true,\n    displayLocationMarkers: true\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      displayDuplications: false,\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  // react typings do not take `defaultProps` into account,\n  // so use these getters to get type-safe methods\n\n  get safeLoadComponent() {\n    return this.props.loadComponent || defaultLoadComponent;\n  }\n\n  get safeLoadIssues() {\n    return this.props.loadIssues || defaultLoadIssues;\n  }\n\n  get safeLoadSources() {\n    return this.props.loadSources || defaultLoadSources;\n  }\n\n  computeCoverageStatus(lines: SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    } else {\n      return true;\n    }\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n    const loadIssues = (component: SourceViewerFile, sources: SourceLine[]) => {\n      this.safeLoadIssues(this.props.component, 1, LINES, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                displayDuplications: false,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                linePopup: undefined,\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = ({ response }: { response: Response }) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: SourceViewerFile) => {\n      this.props.onReceiveComponent(component);\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.safeLoadComponent(this.props.component, this.props.branchLike).then(\n      onResolve,\n      onFailLoadComponent\n    );\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.safeLoadIssues(\n      this.props.component,\n      firstSourceLine && firstSourceLine.line,\n      lastSourceLine && lastSourceLine.line,\n      this.props.branchLike\n    ).then(\n      issues => {\n        if (this.mounted) {\n          this.setState({\n            issues,\n            issuesByLine: issuesByLine(issues),\n            issueLocationsByLine: locationsByLine(issues)\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  loadSources = (): Promise<SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = ({ response }: { response: Response }) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      return this.safeLoadSources(this.props.component, from, to, this.props.branchLike).then(\n        sources => resolve(sources),\n        onFailLoadSources\n      );\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    this.safeLoadSources(\n      this.props.component,\n      from,\n      firstSourceLine.line - 1,\n      this.props.branchLike\n    ).then(\n      sources => {\n        this.safeLoadIssues(\n          this.props.component,\n          from,\n          firstSourceLine.line - 1,\n          this.props.branchLike\n        ).then(\n          issues => {\n            if (this.mounted) {\n              this.setState(prevState => {\n                const nextIssues = uniqBy(\n                  [...issues, ...(prevState.issues || [])],\n                  issue => issue.key\n                );\n                return {\n                  issues: nextIssues,\n                  issuesByLine: issuesByLine(nextIssues),\n                  issueLocationsByLine: locationsByLine(nextIssues),\n                  loadingSourcesBefore: false,\n                  sources: [...this.computeCoverageStatus(sources), ...(prevState.sources || [])],\n                  symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n                };\n              });\n            }\n          },\n          () => {\n            // TODO\n          }\n        );\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    this.safeLoadSources(this.props.component, fromLine, toLine, this.props.branchLike).then(\n      sources => {\n        this.safeLoadIssues(this.props.component, fromLine, toLine, this.props.branchLike).then(\n          issues => {\n            if (this.mounted) {\n              this.setState(prevState => {\n                const nextIssues = uniqBy(\n                  [...(prevState.issues || []), ...issues],\n                  issue => issue.key\n                );\n                return {\n                  issues: nextIssues,\n                  issuesByLine: issuesByLine(nextIssues),\n                  issueLocationsByLine: locationsByLine(nextIssues),\n                  hasSourcesAfter: sources.length > LINES,\n                  loadingSourcesAfter: false,\n                  sources: [\n                    ...(prevState.sources || []),\n                    ...this.computeCoverageStatus(sources.slice(0, LINES))\n                  ],\n                  symbolsByLine: {\n                    ...prevState.symbolsByLine,\n                    ...symbolsByLine(sources.slice(0, LINES))\n                  }\n                };\n              });\n            }\n          },\n          () => {\n            // TODO\n          }\n        );\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = (line: SourceLine) => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState(() => {\n            const changes: Partial<State> = {\n              displayDuplications: true,\n              duplications: r.duplications,\n              duplicationsByLine: duplicationsByLine(r.duplications),\n              duplicatedFiles: r.files\n            };\n            if (r.duplications.length === 1) {\n              changes.linePopup = { index: 0, line: line.line, name: 'duplications' };\n            }\n            return changes;\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleLinePopupToggle = ({\n    index,\n    line,\n    name,\n    open\n  }: {\n    index?: number;\n    line: number;\n    name: string;\n    open?: boolean;\n  }) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.name === name &&\n        state.linePopup.line === line &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: { index, line, name } };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  closeLinePopup = () => {\n    this.setState({ linePopup: undefined });\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  handleFilterLine = (line: SourceLine) => {\n    const { component } = this.state;\n    const leakPeriodDate = component && component.leakPeriodDate;\n    return leakPeriodDate\n      ? line.scmDate !== undefined && parseDate(line.scmDate) > parseDate(leakPeriodDate)\n      : false;\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) return <></>;\n\n    const duplication = duplications && duplications[index];\n    let blocks = (duplication && duplication.blocks) || [];\n    /* eslint-disable no-underscore-dangle */\n    const inRemovedComponent = blocks.some(b => b._ref === undefined);\n    let foundOne = false;\n    blocks = blocks.filter(b => {\n      const outOfBounds = b.from > line || b.from + b.size < line;\n      const currentFile = b._ref === '1';\n      const shouldDisplayForCurrentFile = outOfBounds || foundOne;\n      const shouldDisplay = !currentFile || shouldDisplayForCurrentFile;\n      const isOk = b._ref !== undefined && shouldDisplay;\n      if (b._ref === '1' && !outOfBounds) {\n        foundOne = true;\n      }\n      return isOk;\n    });\n    /* eslint-enable no-underscore-dangle */\n\n    return (\n      <DuplicationPopup\n        blocks={blocks}\n        branchLike={this.props.branchLike}\n        duplicatedFiles={duplicatedFiles}\n        inRemovedComponent={inRemovedComponent}\n        onClose={this.closeLinePopup}\n        sourceViewerFile={component}\n      />\n    );\n  };\n\n  renderCode(sources: SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        filterLine={this.handleFilterLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        linePopup={this.state.linePopup}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <div className=\"alert alert-warning spacer-top\">\n          {translate('component_viewer.no_component')}\n        </div>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <div className=\"alert alert-warning spacer-top\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </div>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    const className = classNames('source-viewer', {\n      'source-duplications-expanded': this.state.displayDuplications\n    });\n\n    return (\n      <div className={className} ref={node => (this.node = node)}>\n        {this.state.component && (\n          <SourceViewerHeader\n            branchLike={this.props.branchLike}\n            sourceViewerFile={this.state.component}\n          />\n        )}\n        {sourceRemoved && (\n          <div className=\"alert alert-warning spacer-top\">\n            {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n          </div>\n        )}\n        {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n      </div>\n    );\n  }\n}\n\nfunction defaultLoadComponent(key: string, branchLike: BranchLike | undefined) {\n  return Promise.all([\n    getComponentForSourceViewer({ component: key, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component: key, ...getBranchLikeQuery(branchLike) })\n  ]).then(([component, data]) => ({\n    ...component,\n    leakPeriodDate: data.leakPeriodDate && parseDate(data.leakPeriodDate)\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { SourceLine } from '../../../app/types';\n\nexport default function getCoverageStatus(s: SourceLine): string | undefined {\n  let status: string | undefined;\n  if (s.lineHits != null && s.lineHits > 0) {\n    status = 'partially-covered';\n  }\n  if (s.lineHits != null && s.lineHits > 0 && s.conditions === s.coveredConditions) {\n    status = 'covered';\n  }\n  if (s.lineHits === 0 || s.coveredConditions === 0) {\n    status = 'uncovered';\n  }\n  return status;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport SourceViewerBase from './SourceViewerBase';\nimport { SourceViewerFile } from '../../app/types';\nimport { receiveFavorites } from '../../store/favorites/duck';\n\nconst mapStateToProps = null;\n\ninterface DispatchProps {\n  onReceiveComponent: (component: SourceViewerFile) => void;\n}\n\nconst onReceiveComponent = (component: SourceViewerFile) => (dispatch: Dispatch<any>) => {\n  if (component.canMarkAsFavorite) {\n    const favorites = [];\n    const notFavorites = [];\n    if (component.fav) {\n      favorites.push({ key: component.key });\n    } else {\n      notFavorites.push({ key: component.key });\n    }\n    dispatch(receiveFavorites(favorites, notFavorites));\n  }\n};\n\nconst mapDispatchToProps: DispatchProps = { onReceiveComponent };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceViewerBase);\n"],"sourceRoot":""}