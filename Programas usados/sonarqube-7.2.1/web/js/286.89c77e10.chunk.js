(window.webpackJsonp=window.webpackJsonp||[]).push([[286],{1608:function(t,e,n){"use strict";n.r(e),n.d(e,"UnconnectedOrganizationEdit",function(){return b});var a,r=n(74),i=n.n(r),o=n(0),c=n.n(o),u=n(212),l=n.n(u),s=n(15),d=n(1),g=n(952),m=n(34),f=(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e){var n=t.call(this,e)||this;return n.handleAvatarInputChange=function(t){var e=t.target.value;n.setState({avatar:e}),n.changeAvatarImage(e)},n.changeAvatarImage=function(t){n.setState({avatarImage:t})},n.handleSubmit=function(t){t.preventDefault();var e={avatar:n.state.avatar,description:n.state.description,name:n.state.name,url:n.state.url};n.setState({loading:!0}),n.props.updateOrganization(n.props.organization.key,e).then(function(){n.mounted&&n.setState({loading:!1})})},n.state={loading:!1,avatar:e.organization.avatar||"",avatarImage:e.organization.avatar||"",description:e.organization.description||"",name:e.organization.name,url:e.organization.url||""},n.changeAvatarImage=i()(n.changeAvatarImage,500),n}return f(e,t),e.prototype.componentDidMount=function(){this.mounted=!0},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.render=function(){var t=this,e=Object(d.l)("organization.edit");return c.a.createElement("div",{className:"page page-limited"},c.a.createElement(l.a,{title:e}),c.a.createElement("header",{className:"page-header"},c.a.createElement("h1",{className:"page-title"},e)),c.a.createElement("div",{className:"boxed-group boxed-group-inner"},c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("div",{className:"modal-field"},c.a.createElement("label",{htmlFor:"organization-name"},Object(d.l)("organization.name"),c.a.createElement("em",{className:"mandatory"},"*")),c.a.createElement("input",{disabled:this.state.loading,id:"organization-name",maxLength:"64",name:"name",onChange:function(e){return t.setState({name:e.target.value})},required:!0,type:"text",value:this.state.name}),c.a.createElement("div",{className:"modal-field-description"},Object(d.l)("organization.name.description"))),c.a.createElement("div",{className:"modal-field"},c.a.createElement("label",{htmlFor:"organization-avatar"},Object(d.l)("organization.avatar")),c.a.createElement("input",{disabled:this.state.loading,id:"organization-avatar",maxLength:"256",name:"avatar",onChange:this.handleAvatarInputChange,type:"text",value:this.state.avatar}),c.a.createElement("div",{className:"modal-field-description"},Object(d.l)("organization.avatar.description")),!!this.state.avatarImage&&c.a.createElement("div",{className:"spacer-top spacer-bottom"},c.a.createElement("div",{className:"little-spacer-bottom"},Object(d.l)("organization.avatar.preview"),":"),c.a.createElement("img",{alt:"",height:30,src:this.state.avatarImage}))),c.a.createElement("div",{className:"modal-field"},c.a.createElement("label",{htmlFor:"organization-description"},Object(d.l)("description")),c.a.createElement("textarea",{disabled:this.state.loading,id:"organization-description",maxLength:"256",name:"description",onChange:function(e){return t.setState({description:e.target.value})},rows:"3",value:this.state.description}),c.a.createElement("div",{className:"modal-field-description"},Object(d.l)("organization.description.description"))),c.a.createElement("div",{className:"modal-field"},c.a.createElement("label",{htmlFor:"organization-url"},Object(d.l)("organization.url")),c.a.createElement("input",{disabled:this.state.loading,id:"organization-url",maxLength:"256",name:"url",onChange:function(e){return t.setState({url:e.target.value})},type:"text",value:this.state.url}),c.a.createElement("div",{className:"modal-field-description"},Object(d.l)("organization.url.description"))),c.a.createElement("div",{className:"modal-field"},c.a.createElement(m.f,{disabled:this.state.loading},Object(d.l)("save")),this.state.loading&&c.a.createElement("i",{className:"spinner spacer-left"})))))},e}(c.a.PureComponent),h={updateOrganization:g.i};e.default=Object(s.connect)(null,h)(p);var b=p},918:function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return c}),n.d(e,"e",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"g",function(){return s}),n.d(e,"c",function(){return d});var a=n(5),r=n(10);function i(t){return Object(a.getJSON)("/api/user_groups/search",t).catch(r.a)}function o(t){return Object(a.getJSON)("/api/user_groups/users",t).catch(r.a)}function c(t){return Object(a.post)("/api/user_groups/add_user",t).catch(r.a)}function u(t){return Object(a.post)("/api/user_groups/remove_user",t).catch(r.a)}function l(t){return Object(a.postJSON)("/api/user_groups/create",t).then(function(t){return t.group},r.a)}function s(t){return Object(a.post)("/api/user_groups/update",t).catch(r.a)}function d(t){return Object(a.post)("/api/user_groups/delete",t).catch(r.a)}},952:function(t,e,n){"use strict";n.d(e,"e",function(){return m}),n.d(e,"f",function(){return f}),n.d(e,"b",function(){return p}),n.d(e,"i",function(){return h}),n.d(e,"c",function(){return b}),n.d(e,"g",function(){return O}),n.d(e,"d",function(){return j}),n.d(e,"a",function(){return z}),n.d(e,"h",function(){return E}),n.d(e,"j",function(){return N});var a=n(53),r=n(49),i=n(30),o=n(918),c=n(39),u=n(116),l=n(13),s=n(22),d=n(1),g=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},m=function(t){return function(e){return Promise.all([a.e(t),a.g(t)]).then(function(t){var n=t[0],a=t[1];if(n){var i=g({},n,a);e(r.i([i]))}},Object(u.g)(e))}},f=function(t){return function(e){return Object(o.f)({organization:t}).then(function(n){e(r.h(t,n.groups))},Object(u.g)(e))}},p=function(t){return function(e){return a.c(t).then(function(t){return e(r.a(t)),e(Object(s.b)(Object(d.m)("organization.created",t.name))),t},function(t){return function(e){return Object(u.g)(t)(e),Promise.reject()}}(e))}},h=function(t,e){return function(n){return a.k(t,e).then(function(){n(r.j(t,e)),n(Object(s.b)(Object(d.l)("organization.updated")))},Object(u.g)(n))}},b=function(t){return function(e){return a.d(t).then(function(){e(r.c(t)),e(Object(s.b)(Object(d.l)("organization.deleted")))},Object(u.g)(e))}},v=function(t,e,n,r,o){t(i.f(n,{loading:!0}));var c={organization:n,ps:50};return null!=o&&(c.p=o),r&&(c.q=r),a.j(c).then(function(a){t(e(n,a.users,{loading:!1,total:a.paging.total,pageIndex:a.paging.pageIndex,query:r||null}))},function(t,e){return function(n){Object(u.g)(e)(n),e(i.f(t,{loading:!1}))}}(n,t))},O=function(t,e){return function(n){return v(n,i.c,t,e)}},j=function(t,e){return function(n,a){return v(n,i.d,t,e,Object(l.getOrganizationMembersState)(a(),t).pageIndex+1)}},z=function(t,e){return function(n){return a.a({login:e.login,organization:t}).then(function(e){return n(i.b(t,e))},Object(u.g)(n))}},E=function(t,e){return function(n){return n(i.e(t,e)),a.i({login:e.login,organization:t}).catch(function(a){Object(u.g)(n)(a),n(i.b(t,e))})}},N=function(t,e,n,a){return function(r){r(Object(c.f)(g({},e,{groupCount:(e.groupCount||0)+n.length-a.length})));var i=n.map(function(n){return Object(o.a)({name:n,login:e.login,organization:t.key})}).concat(a.map(function(n){return Object(o.e)({name:n,login:e.login,organization:t.key})}));return Promise.all(i).catch(function(t){r(Object(c.f)(e)),Object(u.g)(r)(t)})}}}}]);
//# sourceMappingURL=286.89c77e10.chunk.js.map