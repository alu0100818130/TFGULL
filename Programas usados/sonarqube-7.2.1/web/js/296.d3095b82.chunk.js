(window.webpackJsonp=window.webpackJsonp||[]).push([[296],{1545:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n(212),i=n.n(a),r=n(898),s=n(1);function u(){return o.createElement("header",{className:"page-header"},o.createElement("div",{className:"page-title display-flex-center"},o.createElement("h1",null,Object(s.l)("project_quality_gate.page")),o.createElement(r.a,{className:"spacer-left",doc:"quality-gates/quality-gate-projects"})),o.createElement("div",{className:"page-description"},Object(s.l)("project_quality_gate.page.description")))}var c,l=n(213),p=(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mounted=!1,e.state={loading:!1},e.stopLoading=function(){e.mounted&&e.setState({loading:!1})},e.handleChange=function(t){var n=e.props.gate,o=null==n&&null!=t.value,a=null!=n&&null==t.value,i=null!=n&&n.id!==Number(t.value);(o||a||i)&&(e.setState({loading:!0}),e.props.onChange(n&&n.id,Number(t.value)).then(e.stopLoading,e.stopLoading))},e.renderGateName=function(t){return t.isDefault?o.createElement("span",null,o.createElement("strong",null,Object(s.l)("default")),": ",t.label):o.createElement("span",null,t.label)},e}return p(e,t),e.prototype.componentDidMount=function(){this.mounted=!0},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.renderSelect=function(){var t=this.props,e=t.gate,n=t.allGates.map(function(t){return{value:String(t.id),label:t.name,isDefault:t.isDefault}});return o.createElement(l.c,{clearable:!1,disabled:this.state.loading,onChange:this.handleChange,optionRenderer:this.renderGateName,options:n,style:{width:300},value:e&&String(e.id),valueRenderer:this.renderGateName})},e.prototype.render=function(){return o.createElement("div",null,this.renderSelect(),this.state.loading&&o.createElement("i",{className:"spinner spacer-left"}))},e}(o.PureComponent),f=n(949),g=n(896),m=n(254),h=n(969),y=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mounted=!1,e.state={loading:!0},e.handleChangeGate=function(t,n){var o=e.state.allGates;if(!t&&!n||!o)return Promise.resolve();var a=e.props.component,i={gateId:n||t,organization:a.organization,projectKey:a.key};return(n?Object(f.a)(i):Object(f.g)(i)).then(function(){if(e.mounted)if(Object(m.a)(Object(s.l)("project_quality_gate.successfully_updated")),n){var t=o.find(function(t){return t.id===n});t&&(e.setState({gate:t}),e.props.onComponentChange({qualityGate:t}))}else e.setState({gate:void 0})})},e}return y(e,t),e.prototype.componentDidMount=function(){this.mounted=!0,this.checkPermissions()?this.fetchQualityGates():Object(h.a)()},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.checkPermissions=function(){var t=this.props.component.configuration;return!!(t&&t.showQualityGates)},e.prototype.fetchQualityGates=function(){var t=this,e=this.props.component;this.setState({loading:!0}),Promise.all([Object(f.i)({organization:e.organization}),Object(f.k)({organization:e.organization,project:e.key})]).then(function(e){var n=e[0].qualitygates,o=e[1];t.mounted&&t.setState({allGates:n,gate:o,loading:!1})},function(){t.mounted&&t.setState({loading:!1})})},e.prototype.render=function(){if(!this.checkPermissions())return null;var t=this.state,e=t.allGates,n=t.gate,a=t.loading;return o.createElement("div",{className:"page page-limited",id:"project-quality-gate"},o.createElement(g.a,{suggestions:"project_quality_gate"}),o.createElement(i.a,{title:Object(s.l)("project_quality_gate.page")}),o.createElement(u,null),a?o.createElement("i",{className:"spinner"}):e&&o.createElement(d,{allGates:e,gate:n,onChange:this.handleChangeGate}))},e}(o.PureComponent);e.default=b},896:function(t,e,n){"use strict";var o,a=n(0),i=n(4),r=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.componentDidMount=function(){this.context.suggestions.addSuggestions(this.props.suggestions)},e.prototype.componentDidUpdate=function(t){t.suggestions!==this.props.suggestions&&(this.context.suggestions.removeSuggestions(this.props.suggestions),this.context.suggestions.addSuggestions(t.suggestions))},e.prototype.componentWillUnmount=function(){this.context.suggestions.removeSuggestions(this.props.suggestions)},e.prototype.render=function(){return null},e.contextTypes={suggestions:i.object.isRequired},e}(a.PureComponent);e.a=s},898:function(t,e,n){"use strict";var o,a=n(0),i=n(214),r=n(3),s=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=Object(r.a)(function(){return Promise.all([n.e(8),n.e(380)]).then(n.bind(null,919))}),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mounted=!1,e.state={loading:!1,open:!1},e.fetchContent=function(){e.setState({loading:!0}),n(903)("./"+e.props.doc+".md").then(function(t){var n=t.default;e.mounted&&e.setState({content:n,loading:!1})},function(){e.mounted&&e.setState({loading:!1})})},e.close=function(){e.setState({open:!1})},e}return s(e,t),e.prototype.componentDidMount=function(){this.mounted=!0,document.addEventListener("scroll",this.close,!0)},e.prototype.componentWillReceiveProps=function(t){t.doc!==this.props.doc&&this.setState({content:void 0,loading:!1,open:!1})},e.prototype.componentWillUnmount=function(){this.mounted=!1,document.removeEventListener("scroll",this.close,!0)},e.prototype.renderOverlay=function(){return a.createElement("div",{className:"abs-width-300"},this.state.loading?a.createElement("i",{className:"spinner"}):a.createElement(u,{className:"cut-margins",content:this.state.content,isTooltip:!0}))},e.prototype.render=function(){return a.createElement(i.a,{className:this.props.className,onShow:this.fetchContent,overlay:this.renderOverlay()},this.props.children)},e}(a.PureComponent);e.a=c},903:function(t,e,n){var o={"./branches/no-branch-support.md":[947,358],"./branches/single-branch.md":[946,357],"./editions/datacenter.md":[945,356],"./editions/developer.md":[944,355],"./editions/enterprise.md":[943,354],"./organizations/add-organization-member.md":[942,353],"./organizations/organization.md":[941,352],"./quality-gates/built-in-quality-gate.md":[940,351],"./quality-gates/default-quality-gate.md":[939,350],"./quality-gates/project-homepage-quality-gate.md":[938,349],"./quality-gates/quality-gate-conditions.md":[937,348],"./quality-gates/quality-gate-projects.md":[936,347],"./quality-gates/quality-gate.md":[935,346],"./quality-profiles/built-in-quality-profile.md":[934,345],"./quality-profiles/default-quality-profile.md":[933,344],"./quality-profiles/quality-profile-projects.md":[932,343],"./rules/custom-rule-removal.md":[931,342],"./rules/custom-rules.md":[930,341],"./rules/rule-templates.md":[929,340],"./rules/rules-quality-profiles.md":[928,339]};function a(t){var e=o[t];return e?n.e(e[1]).then(function(){var t=n(e[0]);return"object"==typeof t&&t&&t.__esModule?t:Object.assign({},"object"==typeof t&&t,{default:t})}):Promise.resolve().then(function(){var e=new Error('Cannot find module "'+t+'".');throw e.code="MODULE_NOT_FOUND",e})}a.keys=function(){return Object.keys(o)},a.id=903,t.exports=a},949:function(t,e,n){"use strict";n.d(e,"i",function(){return r}),n.d(e,"h",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"l",function(){return l}),n.d(e,"b",function(){return p}),n.d(e,"n",function(){return d}),n.d(e,"c",function(){return f}),n.d(e,"o",function(){return g}),n.d(e,"e",function(){return m}),n.d(e,"k",function(){return h}),n.d(e,"m",function(){return y}),n.d(e,"a",function(){return b}),n.d(e,"g",function(){return O}),n.d(e,"j",function(){return j});var o=n(5),a=n(10),i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t};function r(t){return Object(o.getJSON)("/api/qualitygates/list",t).catch(a.a)}function s(t){return Object(o.getJSON)("/api/qualitygates/show",t).catch(a.a)}function u(t){return Object(o.postJSON)("/api/qualitygates/create",t).catch(a.a)}function c(t){return Object(o.post)("/api/qualitygates/destroy",t).catch(a.a)}function l(t){return Object(o.post)("/api/qualitygates/rename",t).catch(a.a)}function p(t){return Object(o.postJSON)("/api/qualitygates/copy",t).catch(a.a)}function d(t){return Object(o.post)("/api/qualitygates/set_as_default",t).catch(a.a)}function f(t){return Object(o.postJSON)("/api/qualitygates/create_condition",t)}function g(t){return Object(o.postJSON)("/api/qualitygates/update_condition",t)}function m(t){return Object(o.post)("/api/qualitygates/delete_condition",t)}function h(t){return Object(o.getJSON)("/api/qualitygates/get_by_project",t).then(function(t){var e=t.qualityGate;return e&&i({},e,{isDefault:e.default})},a.a)}function y(t){return Object(o.getJSON)("/api/qualitygates/search",t).catch(a.a)}function b(t){return Object(o.post)("/api/qualitygates/select",t).catch(a.a)}function O(t){return Object(o.post)("/api/qualitygates/deselect",t).catch(a.a)}function j(t){return Object(o.getJSON)("/api/qualitygates/application_status",t).catch(a.a)}},969:function(t,e,n){"use strict";var o=n(75),a=n(139),i=n(136);e.a=function(){var t=Object(o.default)(),e=Object(a.a)(),n=window.location.pathname+window.location.search+window.location.hash;t.dispatch(Object(i.c)()),e.replace({pathname:"/sessions/new",query:{return_to:n}})}}}]);
//# sourceMappingURL=296.d3095b82.chunk.js.map