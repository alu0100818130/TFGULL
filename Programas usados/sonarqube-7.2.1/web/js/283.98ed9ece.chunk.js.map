{"version":3,"sources":["webpack:///./src/main/js/components/icons-components/ChartLegendIcon.tsx","webpack:///./src/main/js/components/charts/LineChart.css?1665","webpack:///./src/main/js/components/charts/BarChart.css","webpack:///./src/main/js/components/charts/BarChart.css?f378","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/charts/Histogram.tsx","webpack:///./src/main/js/components/charts/LanguageDistribution.tsx","webpack:///./src/main/js/components/charts/LanguageDistributionContainer.tsx","webpack:///./src/main/js/components/icons-components/BugTrackerIcon.tsx","webpack:///./src/main/js/components/icons-components/HouseIcon.tsx","webpack:///./src/main/js/components/icons-components/ContinuousIntegrationIcon.tsx","webpack:///./src/main/js/components/icons-components/SCMIcon.tsx","webpack:///./src/main/js/components/icons-components/ProjectLinkIcon.tsx","webpack:///./src/main/js/api/time-machine.ts","webpack:///./src/main/js/components/charts/AdvancedTimeline.css","webpack:///./src/main/js/components/charts/AdvancedTimeline.css?bebb","webpack:///./src/main/js/components/charts/AdvancedTimeline.js","webpack:///./src/main/js/apps/project-admin/links/utils.js","webpack:///./src/main/js/components/charts/LineChart.css","webpack:///./src/main/js/components/charts/Histogram.css","webpack:///./src/main/js/components/charts/Histogram.css?9e83","webpack:///./src/main/js/components/icons-components/HistoryIcon.tsx","webpack:///./src/main/js/components/common/CodeSnippet.css","webpack:///./src/main/js/components/common/CodeSnippet.css?73fa","webpack:///./src/main/js/api/web-api.ts","webpack:///./src/main/js/components/intl/DateTooltipFormatter.tsx","webpack:///./src/main/js/components/ui/SizeRating.tsx","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltipsContent.js","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltips.js","webpack:///./src/main/js/components/preview-graph/PreviewGraph.js","webpack:///./src/main/js/api/projectActivity.ts","webpack:///./src/main/js/components/ui/SizeRating.css","webpack:///./src/main/js/components/ui/SizeRating.css?5a28","webpack:///./src/main/js/apps/overview/styles.css","webpack:///./src/main/js/apps/overview/styles.css?53ac","webpack:///./src/main/js/apps/overview/badges/styles.css","webpack:///./src/main/js/apps/overview/badges/styles.css?7390","webpack:///./src/main/js/apps/overview/qualityGate/ApplicationQualityGateProject.css","webpack:///./src/main/js/apps/overview/qualityGate/ApplicationQualityGateProject.css?2f87","webpack:///./src/main/js/components/shared/DrilldownLink.tsx","webpack:///./src/main/js/apps/overview/qualityGate/QualityGateCondition.js","webpack:///./src/main/js/apps/overview/propTypes.js","webpack:///./src/main/js/apps/overview/qualityGate/QualityGateConditions.js","webpack:///./src/main/js/apps/overview/qualityGate/EmptyQualityGate.js","webpack:///./src/main/js/apps/overview/qualityGate/QualityGate.js","webpack:///./src/main/js/apps/overview/qualityGate/ApplicationQualityGateProject.tsx","webpack:///./src/main/js/apps/overview/qualityGate/ApplicationQualityGate.tsx","webpack:///./src/main/js/components/charts/LineChart.tsx","webpack:///./src/main/js/apps/overview/components/Timeline.tsx","webpack:///./src/main/js/apps/overview/main/enhance.tsx","webpack:///./src/main/js/apps/overview/components/ApplicationLeakPeriodLegend.tsx","webpack:///./src/main/js/api/application.ts","webpack:///./src/main/js/apps/overview/components/LeakPeriodLegend.js","webpack:///./src/main/js/apps/overview/helpers/metrics.js","webpack:///./src/main/js/apps/overview/main/BugsAndVulnerabilities.tsx","webpack:///./src/main/js/apps/overview/main/CodeSmells.tsx","webpack:///./src/main/js/apps/overview/main/Coverage.tsx","webpack:///./src/main/js/apps/overview/main/Duplications.tsx","webpack:///./src/main/js/apps/overview/meta/MetaKey.tsx","webpack:///./src/main/js/apps/overview/meta/MetaOrganizationKey.tsx","webpack:///./src/main/js/apps/overview/meta/MetaLink.tsx","webpack:///./src/main/js/apps/overview/meta/MetaLinks.tsx","webpack:///./src/main/js/apps/overview/meta/MetaQualityGate.tsx","webpack:///./src/main/js/apps/overview/badges/utils.ts","webpack:///./src/main/js/apps/overview/meta/MetaQualityProfiles.tsx","webpack:///./src/main/js/apps/overview/meta/MetaSize.tsx","webpack:///./src/main/js/apps/overview/meta/MetaTagsSelector.tsx","webpack:///./src/main/js/apps/overview/meta/MetaTags.tsx","webpack:///./src/main/js/apps/overview/badges/BadgeButton.tsx","webpack:///./src/main/js/apps/overview/badges/BadgeParams.tsx","webpack:///./src/main/js/apps/overview/badges/BadgesModal.tsx","webpack:///./src/main/js/apps/overview/events/Event.tsx","webpack:///./src/main/js/apps/overview/events/Analysis.tsx","webpack:///./src/main/js/apps/overview/events/AnalysesList.tsx","webpack:///./src/main/js/apps/overview/meta/Meta.tsx","webpack:///./src/main/js/apps/overview/utils.js","webpack:///./src/main/js/apps/overview/components/OverviewApp.tsx","webpack:///./src/main/js/apps/overview/components/EmptyOverview.tsx","webpack:///./src/main/js/apps/overview/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///../sonar-docs/src/tooltips lazy ^\\.\\/.*\\.md$ namespace object","webpack:///./src/main/js/components/ui/IssueTypeIcon.tsx","webpack:///./src/main/js/components/icons-components/CodeSmellIcon.tsx","webpack:///./src/main/js/components/icons-components/VulnerabilityIcon.tsx","webpack:///./src/main/js/components/icons-components/BugIcon.tsx","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/icons-components/TagsIcon.tsx","webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/components/icons-components/DetachIcon.tsx","webpack:///./src/main/js/apps/projectActivity/utils.js","webpack:///./src/main/js/api/quality-gates.ts","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/controls/ClipboardButton.tsx","webpack:///./src/main/js/components/tags/TagsList.css?c8ad","webpack:///./src/main/js/components/common/CodeSnippet.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/icons-components/BubblesIcon.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx"],"names":["ChartLegendIcon","_a","className","_b","fill","size","react__WEBPACK_IMPORTED_MODULE_0__","_Icon__WEBPACK_IMPORTED_MODULE_1__","d","style","content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","getLeakPeriod","periods","index","Array","isArray","find","period","getPeriod","getPeriodLabel","parameter","modeParam","mode","Object","_l10n__WEBPACK_IMPORTED_MODULE_0__","getPeriodDate","date","_dates__WEBPACK_IMPORTED_MODULE_1__","TagsSelector","props","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_1__","elements","tags","listSize","onSearch","onSelect","onUnselect","placeholder","_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","selectedElements","selectedTags","validateSearchInput","validateTag","value","toLowerCase","replace","DEFAULT_PADDING","_super","Histogram","__extends","prototype","renderBar","xScale","yScale","this","alignTicks","padding","width","Math","round","x","range","y","bandwidth","index_js_exposed","height","renderValue","yValues","BAR_HEIGHT","Tooltip","overlay","yTooltips","dx","dy","renderTick","yTicks","tick","historyTickClass","renderBars","_this","bars","map","key","render","availableWidth","d3_scale","domain","d3_array","availableHeight","_","rangeRound","cutLanguageName","name","length","substr","__webpack_exports__","es","state","languages","rootReducer","distribution","split","point","tokens","language","lines","parseInt","data","sortBy_default","langKey","l10n","lang","find_default","getLanguageName","measures","components_charts_Histogram","BugTrackerIcon","Icon","HouseIcon","ContinuousIntegrationIcon","SCMIcon","ProjectLinkIcon","type","__rest","__assign","DetachIcon","getAllTimeMachineData","prev","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","catch","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","getTimeMachineData","ps","then","r","result","measure","idx","history","concat","paging","pageIndex","pageSize","total","p","AdvancedTimeline","call","getRatingScale","d3_scale__WEBPACK_IMPORTED_MODULE_8__","getLevelScale","getYScale","flatData","metricType","d3_array__WEBPACK_IMPORTED_MODULE_7__","nice","getXScale","startDate","endDate","dateRange","start","end","lodash_sortBy__WEBPACK_IMPORTED_MODULE_2___default","clamp","maxXRange","getScales","lodash_flatten__WEBPACK_IMPORTED_MODULE_4___default","series","serie","getSelectedDatePos","selectedDate","firstSerie","findIndex","valueOf","xRange","sort","xPos","selectedDateXPos","selectedDateIdx","getEventMarker","half","getMouseOverlayPos","target","mouseOverlayPos","pos","getBoundingClientRect","setState","handleWheel","evt","preventDefault","parentBbox","mouseXPos","pageX","left","speed","deltaMode","zoomSpeed","leftPos","deltaY","rightPos","invert","handleZoomUpdate","updateZoom","handleMouseMove","updateTooltipPos","handleMouseEnter","mouseOver","handleMouseOut","updateTooltip","handleClick","updateSelectedDate","bisectX","right","previousPoint","nextPoint","xPos_1","renderHorizontalGrid","formatYTick","ticks","maxYTicksCount","formattedTicks","lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","textAnchor","x1","x2","y1","y2","renderXAxisTicks","format","tickFormat","slice","nextTick","renderLeak","yRange","leakWidth","leakPeriodDate","_app_theme__WEBPACK_IMPORTED_MODULE_10__","renderLines","lineGenerator","d3_shape__WEBPACK_IMPORTED_MODULE_9__","defined","basisCurve","curve","classnames__WEBPACK_IMPORTED_MODULE_6___default","renderAreas","areaGenerator","y0","renderEvents","events","eventSize","inRangeEvents","filter","event","offset","getTime","renderSelectedDate","cx","cy","renderClipPath","id","renderMouseEventsOverlay","zoomEnabled","mouseEvents","onWheel","onMouseEnter","onMouseMove","onMouseOut","onClick","scales","selectedDatePos","lodash_throttle__WEBPACK_IMPORTED_MODULE_1___default","componentWillReceiveProps","nextProps","lodash_isEqual__WEBPACK_IMPORTED_MODULE_3___default","disableZoom","isZoomed","chart-zoomed","hideGrid","hideXAxis","showAreas","showEventMarkers","defaultProps","PureComponent","PROVIDED_TYPES","isProvided","link","includes","orderLinks","links","lodash_partition__WEBPACK_IMPORTED_MODULE_1___default","provided","unknown","lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default","indexOf","getLinkName","HistoryIcon","fetchWebApi","showInternal","include_internals","webServices","deprecated","actions","action","deprecatedSince","internal","fetchResponseExample","controller","DateTooltipFormatter","parsedDate","_helpers_dates__WEBPACK_IMPORTED_MODULE_4__","_DateFormatter__WEBPACK_IMPORTED_MODULE_1__","long","formattedDate","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_3__","mouseEnterDelay","_DateTimeFormatter__WEBPACK_IMPORTED_MODULE_2__","dateTime","toISOString","SizeRating","letter","small","_c","muted","react__WEBPACK_IMPORTED_MODULE_1__","lodash_inRange__WEBPACK_IMPORTED_MODULE_0___default","classnames__WEBPACK_IMPORTED_MODULE_2__","size-rating-small","size-rating-muted","PreviewGraphTooltipsContent","translatedName","index_js_exposed_default","PreviewGraphTooltips","tooltipIdx","tooltipPos","placement","popups","RightTop","graphWidth","LeftTop","top","DateFormatter","toString","formatValue","GRAPH_PADDING","MAX_GRAPH_NB","MAX_SERIES_PER_GRAPH","PreviewGraph_PreviewGraph","PreviewGraph","utils","getDisplayedMetrics","graph","customMetrics","metrics","getSeries","myHistory","displayedMetrics","firstValid","minBy_default","metric","measureHistory","context","router","pathname","query","project","branches","branchLike","tooltipXPos","customGraphs","storage","PreviewGraph_extends","renderTimeline","AutoSizer_default","disableHeight","interpolate","preview_graph_PreviewGraphTooltips","tabIndex","role","renderWhenEmpty","contextTypes","prop_types","getProjectActivity","createEvent","analysis","category","description","deleteEvent","changeEvent","deleteAnalysis","ISSUE_MEASURES","DrilldownLink","apply","arguments","isIssueMeasure","propsToIssueParams","params","sinceLeakPeriod","assign","resolved","severities","statuses","resolutions","types","renderIssuesLink","url","urls","component","react_router_es","to","children","componentKey","QualityGateCondition","getIssuesUrl","customQuery","QualityGateCondition_assign","QualityGateCondition_extends","getDecimalsNumber","threshold","delta","abs","toFixed","match","getUrlForCodeSmells","getUrlForBugsOrVulnerabilities","condition","level","error","warning","Number","getUrlForType","wrapWithLink","classnames_default","overview-quality-gate-condition-leak","metricKey","RATING_METRICS_MAPPING","reliability_rating","new_reliability_rating","security_rating","new_security_rating","sqale_rating","new_maintainability_rating","shared_DrilldownLink","isDiff","helpers_measures","actual","operator","op","decimals","parseFloat","Measure","IssueTypeIcon","ComponentType","isRequired","MetricType","MeasureType","ConditionType","EnhancedConditionType","ConditionsListType","PeriodType","text","LEVEL_ORDER","QualityGateConditions","loading","QualityGateConditions_extends","componentDidMount","mounted","loadFailedMeasures","componentDidUpdate","prevProps","conditions","componentWillUnmount","failedConditions","c","api_measures","QualityGateConditions_assign","additionalFields","enhanceConditions","sortedConditions","qualityGate_QualityGateCondition","propTypes","prop_types_default","object","qualityGate_EmptyQualityGate","QualityGate","statusMeasure","detailsMeasure","qualifier","QualityGate_isProject","rawDetails","ignoredConditions","details","JSON","parse","DocTooltip","doc","Level","HelpTooltip","qualityGate_QualityGateConditions","ApplicationQualityGateProject","renderCondition","metricName","errorThreshold","warningThreshold","classnames","is-on-leak","onLeak","text-danger","status","text-warning","comparator","ApplicationQualityGateProject_extends","ApplicationQualityGate","fetchDetails","quality_gates","application","organization","projects","keyBy_default","ApplicationQualityGate_extends","overview_qualityGate_ApplicationQualityGateProject","LineChart","renderChart","maxY","renderVerticalGrid","renderBackdrop","renderLine","renderPoints","renderXTicks","renderXValues","LineChart_extends","displayBackdrop","area","d3_shape","backdropConstraints","c_1","displayPoints","points","displayVerticalGrid","xTicks","xValues","AutoSizer","Timeline","Timeline_extends","filterSnapshots","before","after","s","matchBefore","matchAfter","snapshots","snapshot","components_charts_LineChart","enhance","ComposedComponent","class_1","getValue","leakPeriod","renderHeader","label","BubblesIcon","renderMeasure","renderHistoryLink","renderRating","title","Rating","renderIssues","enhance_assign","helpers_periods","components_Timeline","enhance_extends","displayName","ApplicationLeakPeriodLegend","fetchLeaks","leaks","request","throwGlobalError","Date","renderOverlay","leak","projectName","ApplicationLeakPeriodLegend_extends","overview-legend-spaced-line","DateFromNow","fromNow","LeakPeriodLegend","leakPeriodLabel","tooltip","formattedLeakPeriodDate","getMetricName","main_BugsAndVulnerabilities","BugsAndVulnerabilities","BugsAndVulnerabilities_extends","components_ApplicationLeakPeriodLegend","marginLeft","BugIcon","VulnerabilityIcon","renderNutshell","main_CodeSmells","CodeSmells","CodeSmells_extends","renderDebt","CodeSmells_assign","facetMode","renderTimelineStartDate","historyStartDate","displayDate","CodeSmellIcon","main_Coverage","Coverage","Coverage_extends","getCoverage","renderTests","renderCoverage","coverage","CoverageRating","renderNewCoverage","newCoverageMeasure","newCoverageValue","formattedValue","newLinesToCover","newLinesToCoverValue","main_Duplications","Duplications","Duplications_extends","renderDuplicatedBlocks","renderDuplications","duplications","DuplicationsRating","renderNewDuplications","newDuplicationsMeasure","newDuplicationsValue","newLinesMeasure","newLinesValue","MetaKey","readOnly","ClipboardButton","copyValue","MetaOrganizationKey","MetaLink","href","rel","MetaLinks","loadLinks","projectLinks","MetaLinks_extends","orderedLinks","MetaQualityGate","qualityGate","isDefault","BadgeType","MetaQualityProfiles_MetaQualityProfiles","MetaQualityProfiles","deprecatedByKey","MetaQualityProfiles_extends","loadDeprecatedRules","requests","profiles","profile","loadDeprecatedRulesForProfile","Promise","all","responses","deprecatedByKey_1","forEach","count","profileKey","activation","qprofile","rules","getDeprecatedRulesCount","renderProfile","languageFromStore","languageName","path","inner","headerClassName","meta_MetaQualityProfiles","MetaSize","renderLoC","ncloc","is-half-width","renderLoCDistribution","languageDistribution","LanguageDistributionContainer","renderProjects","MetaSize_extends","LIST_SIZE","MetaTagsSelector","searchResult","components","q","min","tag","setProjectTags","without_default","MetaTagsSelector_extends","availableTags","difference_default","MetaTags","canUpdateTags","configuration","showSettings","getPopupPos","eltPos","containerPos","handleSetProjectTags","values","join","onComponentChange","MetaTags_extends","ref","card","Dropdown","closeOnClick","closeOnClickOutside","meta_MetaTagsSelector","overlayPlacement","BottomLeft","buttons","innerRef","tagsList","stopPropagation","TagsList","allowUpdate","getBadgeUrl","branch","color","pullRequest","marketing","querystring_es3","BadgeButton","BadgeButton_extends","selected","alt","src","BadgeParams","badgeMetrics","getColorOptions","getMetricOptions","handleColorChange","updateOptions","handleMetricChange","BadgeParams_extends","fetchBadgeMetrics","web_api","webservices","ws","param","possibleValues","htmlFor","Select","clearable","onChange","searchable","BadgesModal","open","selectedType","badgeOptions","handleClose","handleOpen","handleSelectBadge","handleUpdateOptions","BadgesModal_assign","BadgesModal_extends","header","fullBadgeOptions","badges","system","Modal","contentLabel","onRequestClose","badges_BadgeButton","badges_BadgeParams","CodeSnippet","isOneLine","snippet","Event","Analysis","sortedEvents","PAGE_SIZE","AnalysesList","analyses","getTopLevelComponent","current","breadcrumbs","fetchData","projectActivity","AnalysesList_assign","AnalysesList_extends","renderList","Meta","Meta_extends","organizationsEnabled","qualityProfiles","isProject","isApp","isPrivate","visibility","Private","meta_MetaTags","meta_MetaSize","events_AnalysesList","meta_MetaLinks","badges_BadgesModal","METRICS","HISTORY_METRICS_LIST","OverviewApp_OverviewApp","OverviewApp","loadHistory","projectActivity_utils","graphMetrics","uniq_default","time_machine","OverviewApp_assign","history_1","dates","getApplicationLeakPeriod","isEmpty","OverviewApp_extends","fetchMetrics","loadMeasures","renderLoading","renderEmpty","renderMain","domainProps","qualityGate_ApplicationQualityGate","Suggestions","suggestions","Helmet","meta_Meta","mapDispatchToProps","rootActions","components_OverviewApp","EmptyOverview","hasBranches","showWarning","rawMessage","head","tail","index_es","defaultMessage","App_App","App","isPortfolio","isFile","App_extends","branchLikes","analysisDate","isPending","isInProgress","addSuggestions","removeSuggestions","prop_types__WEBPACK_IMPORTED_MODULE_1__","DocMarkdownBlock","_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","e","bind","fetchContent","default","close","document","addEventListener","removeEventListener","isTooltip","_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1__","onShow","./branches/no-branch-support.md","./branches/single-branch.md","./editions/datacenter.md","./editions/developer.md","./editions/enterprise.md","./organizations/add-organization-member.md","./organizations/organization.md","./quality-gates/built-in-quality-gate.md","./quality-gates/default-quality-gate.md","./quality-gates/project-homepage-quality-gate.md","./quality-gates/quality-gate-conditions.md","./quality-gates/quality-gate-projects.md","./quality-gates/quality-gate.md","./quality-profiles/built-in-quality-profile.md","./quality-profiles/default-quality-profile.md","./quality-profiles/quality-profile-projects.md","./rules/custom-rule-removal.md","./rules/custom-rules.md","./rules/rule-templates.md","./rules/rules-quality-profiles.md","webpackAsyncContext","req","ids","__esModule","resolve","Error","code","keys","icon","_icons_components_BugIcon__WEBPACK_IMPORTED_MODULE_1__","_icons_components_VulnerabilityIcon__WEBPACK_IMPORTED_MODULE_2__","_icons_components_CodeSmellIcon__WEBPACK_IMPORTED_MODULE_3__","_ui_Level__WEBPACK_IMPORTED_MODULE_3__","_helpers_measures__WEBPACK_IMPORTED_MODULE_5__","_utils__WEBPACK_IMPORTED_MODULE_1__","rating","_ui_Rating__WEBPACK_IMPORTED_MODULE_2__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_4__","TagsIcon","getRulesApp","searchRules","takeFacet","response","property","facet","facets","getRuleDetails","parameters","getRuleTags","createRule","rule","reject","deleteRule","updateRule","EVENT_TYPES","APPLICATION_EVENT_TYPES","DEFAULT_GRAPH","GRAPH_TYPES","GRAPHS_METRICS_DISPLAYED","issues","GRAPHS_METRICS","PROJECT_ACTIVITY_GRAPH","PROJECT_ACTIVITY_GRAPH_CUSTOM","datesQueryChanged","prevQuery","nextQuery","lodash_isEqual__WEBPACK_IMPORTED_MODULE_1___default","from","activityQueryChanged","customMetricsChanged","hasDataValues","some","hasHistoryData","hasHistoryDataValue","historyQueryChanged","isCustomGraph","selectedDateQueryChanged","generateCoveredLinesMetric","uncoveredLines","measuresHistory","linesToCover","_helpers_l10n__WEBPACK_IMPORTED_MODULE_7__","generateSeries","findMetric","splitSeriesInGraphs","maxGraph","maxSeries","lodash_flatMap__WEBPACK_IMPORTED_MODULE_3___default","lodash_groupBy__WEBPACK_IMPORTED_MODULE_2___default","lodash_chunk__WEBPACK_IMPORTED_MODULE_4___default","getSeriesMetricType","getAnalysesByVersionByDay","reduce","acc","currentVersion","versionEvent","newVersion","version","byDay","day","_helpers_dates__WEBPACK_IMPORTED_MODULE_6__","matchFilters","isAfterFrom","isBeforeTo","hasSelectedCategoryEvents","getDisplayedHistoryMetrics","getHistoryMetrics","parseGraph","_helpers_query__WEBPACK_IMPORTED_MODULE_5__","serializeGraph","parseQuery","urlQuery","serializeQuery","serializeUrlQuery","custom_metrics","selected_date","fetchQualityGates","fetchQualityGate","createQualityGate","deleteQualityGate","renameQualityGate","copyQualityGate","setQualityGateAsDefault","createCondition","updateCondition","deleteCondition","getGateForProject","searchGates","associateGateWithProject","dissociateGateWithProject","getApplicationQualityGate","KNOWN_RATINGS","enhanceMeasure","getLeakValue","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","tooltipShown","showTooltip","setTimeout","copyButton","clipboard","clipboard__WEBPACK_IMPORTED_MODULE_2__","on","destroy","_Tooltip__WEBPACK_IMPORTED_MODULE_3__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_5__","visible","_ui_buttons__WEBPACK_IMPORTED_MODULE_4__","classnames__WEBPACK_IMPORTED_MODULE_1__","data-clipboard-text","node","noCopy","snippetArray","line","finalSnippet","code-snippet-oneline","_controls_ClipboardButton__WEBPACK_IMPORTED_MODULE_2__","_icons_components_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","_icons_components_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","fillRule","MultiSelectOption","handleSelect","currentTarget","blur","disabled","onSelectChange","element","handleHover","onHover","icon-checkbox-checked","icon-checkbox-invisible","activeClass","active","onFocus","onMouseOver","custom","renderLabel","MultiSelect_MultiSelect","MultiSelect","handleSelectChange","item","onSelectItem","onUnselectItem","handleSearchChange","onSearchQuery","handleElementHover","prevState","activeIdx","getAllElements","handleKeyboard","keyCode","selectNextElement","selectPreviousElement","toggleSelect","stopLoading","isNewElement","elem","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","MultiSelect_extends","container","totalElements","searchInput","focus","allowSelection","allowNewElements","_d","footerNode","_e","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","Boolean","div","SearchBox","autoFocus","common_MultiSelectOption"],"mappings":"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","file":"js/283.98ed9ece.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ChartLegendIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.325 7.143v1.714q0 0.357-0.25 0.607t-0.607 0.25h-10.857q-0.357 0-0.607-0.25t-0.25-0.607v-1.714q0-0.357 0.25-0.607t0.607-0.25h10.857q0.357 0 0.607 0.25t0.25 0.607z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LineChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LineChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./LineChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".bar-chart-bar{fill:#4b9fd5}.bar-chart-tick{fill:#777;font-size:12px;text-anchor:middle}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BarChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BarChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./BarChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tags-list{white-space:nowrap}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from './l10n';\nimport { parseDate } from './dates';\n\nexport interface Period {\n  date: string;\n  index: number;\n  mode: string;\n  modeParam?: string;\n  parameter: string;\n}\n\nexport function getPeriod(periods: Period[] | undefined, index: number): Period | undefined {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod(periods: Period[] | undefined): Period | undefined {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(period: Period | undefined): string | undefined {\n  if (!period) {\n    return undefined;\n  }\n\n  const parameter = period.modeParam || period.parameter;\n\n  if (period.mode === 'previous_version' && !parameter) {\n    return translate('overview.period.previous_version_only_date');\n  }\n\n  return translateWithParameters(`overview.period.${period.mode}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n\nexport function getLeakPeriodLabel(periods: Period[]): string | undefined {\n  return getPeriodLabel(getLeakPeriod(periods));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport MultiSelect from '../common/MultiSelect';\nimport { translate } from '../../helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { max } from 'd3-array';\nimport { scaleLinear, scaleBand, ScaleLinear, ScaleBand } from 'd3-scale';\nimport Tooltip from '../controls/Tooltip';\nimport './BarChart.css';\nimport './Histogram.css';\n\ninterface Props {\n  alignTicks?: boolean;\n  bars: number[];\n  height: number;\n  padding?: [number, number, number, number];\n  yTicks?: string[];\n  yTooltips?: string[];\n  yValues?: string[];\n  width: number;\n}\n\nconst BAR_HEIGHT = 10;\nconst DEFAULT_PADDING = [10, 10, 10, 10];\n\ntype XScale = ScaleLinear<number, number>;\ntype YScale = ScaleBand<number>;\n\nexport default class Histogram extends React.PureComponent<Props> {\n  renderBar(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING } = this.props;\n\n    const width = Math.round(xScale(d)) + /* minimum bar width */ 1;\n    const x = xScale.range()[0] + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2);\n\n    return <rect className=\"bar-chart-bar\" x={x} y={y} width={width} height={BAR_HEIGHT} />;\n  }\n\n  renderValue(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING, yValues } = this.props;\n\n    const value = yValues && yValues[index];\n\n    if (!value) {\n      return null;\n    }\n\n    const x = xScale(d) + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n\n    return (\n      <Tooltip overlay={this.props.yTooltips && this.props.yTooltips[index]}>\n        <text className=\"bar-chart-tick histogram-value\" x={x} y={y} dx=\"1em\" dy=\"0.3em\">\n          {value}\n        </text>\n      </Tooltip>\n    );\n  }\n\n  renderTick(index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, yTicks } = this.props;\n\n    const tick = yTicks && yTicks[index];\n\n    if (!tick) {\n      return null;\n    }\n\n    const x = xScale.range()[0];\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n    const historyTickClass = alignTicks ? 'histogram-tick-start' : 'histogram-tick';\n\n    return (\n      <text\n        className={'bar-chart-tick ' + historyTickClass}\n        x={x}\n        y={y}\n        dx={alignTicks ? 0 : '-1em'}\n        dy=\"0.3em\">\n        {tick}\n      </text>\n    );\n  }\n\n  renderBars(xScale: XScale, yScale: YScale) {\n    return (\n      <g>\n        {this.props.bars.map((d, index) => {\n          return (\n            <g key={index}>\n              {this.renderBar(d, index, xScale, yScale)}\n              {this.renderValue(d, index, xScale, yScale)}\n              {this.renderTick(index, xScale, yScale)}\n            </g>\n          );\n        })}\n      </g>\n    );\n  }\n\n  render() {\n    const { bars, width, height, padding = DEFAULT_PADDING } = this.props;\n\n    const availableWidth = width - padding[1] - padding[3];\n    const xScale: XScale = scaleLinear()\n      .domain([0, max(bars)!])\n      .range([0, availableWidth]);\n\n    const availableHeight = height - padding[0] - padding[2];\n    const yScale: YScale = scaleBand<number>()\n      .domain(bars.map((_, index) => index))\n      .rangeRound([0, availableHeight]);\n\n    return (\n      <svg className=\"bar-chart\" width={this.props.width} height={this.props.height}>\n        <g transform={`translate(${this.props.alignTicks ? 4 : padding[3]}, ${padding[0]})`}>\n          {this.renderBars(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { find, sortBy } from 'lodash';\nimport Histogram from './Histogram';\nimport { formatMeasure } from '../../helpers/measures';\nimport { Language } from '../../api/languages';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  alignTicks?: boolean;\n  distribution: string;\n  languages?: Language[];\n  width: number;\n}\n\nexport default function LanguageDistribution(props: Props) {\n  let distribution = props.distribution.split(';').map(point => {\n    const tokens = point.split('=');\n    return { language: tokens[0], lines: parseInt(tokens[1], 10) };\n  });\n\n  distribution = sortBy(distribution, d => -d.lines);\n\n  const data = distribution.map(d => d.lines);\n  const yTicks = distribution.map(d => getLanguageName(d.language)).map(cutLanguageName);\n  const yTooltips = distribution.map(d => (d.lines > 1000 ? formatMeasure(d.lines, 'INT') : ''));\n  const yValues = distribution.map(d => formatMeasure(d.lines, 'SHORT_INT'));\n\n  return (\n    <Histogram\n      alignTicks={props.alignTicks}\n      bars={data}\n      height={distribution.length * 25}\n      padding={[0, 60, 0, 80]}\n      yTicks={yTicks}\n      yTooltips={yTooltips}\n      yValues={yValues}\n      width={props.width}\n    />\n  );\n\n  function getLanguageName(langKey: string) {\n    if (langKey === '<null>') {\n      return translate('unknown');\n    }\n    const lang = find(props.languages, { key: langKey });\n    return lang ? lang.name : langKey;\n  }\n}\n\nfunction cutLanguageName(name: string) {\n  return name.length > 10 ? `${name.substr(0, 7)}...` : name;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport LanguageDistribution from './LanguageDistribution';\nimport { getLanguages } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: any) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect<any, any, any>(mapStateToProps)(LanguageDistribution);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BugTrackerIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M13.5 9.5c1.003.033 1.466 1.952 0 2h-2.618L9.685 9.107 8 14.162 6.096 8.45l-.832 3.05-2.829-.002c-.984-.097-1.369-1.951.065-1.998h1.236l2.168-7.95L8 7.838l1.315-3.945L12.118 9.5H13.5z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function HouseIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M13.002 8.848v4.168a.56.56 0 0 1-.556.555H9.11v-3.334H6.89v3.334H3.554a.56.56 0 0 1-.556-.555V8.848c0-.018.01-.035.01-.052L8 4.68l4.993 4.116c.009.017.009.034.009.052zm1.936-.6l-.538.643a.289.289 0 0 1-.183.096h-.026a.273.273 0 0 1-.182-.061L8 3.916l-6.009 5.01a.297.297 0 0 1-.208.06.289.289 0 0 1-.183-.095l-.538-.642a.285.285 0 0 1 .035-.391L7.34 2.656a1.07 1.07 0 0 1 1.32 0l2.119 1.772V2.735c0-.157.121-.278.278-.278h1.667c.156 0 .278.121.278.278v3.542l1.901 1.58c.113.096.13.279.035.392z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ContinuousIntegrationIcon({\n  className,\n  fill = 'currentColor',\n  size\n}: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M13.805 9.25c0 .016 0 .04-.008.055C13.133 12.07 10.852 14 7.969 14c-1.524 0-3-.602-4.11-1.656l-1.007 1.008a.497.497 0 0 1-.352.148.504.504 0 0 1-.5-.5V9.5c0-.273.227-.5.5-.5H6c.273 0 .5.227.5.5a.497.497 0 0 1-.148.352l-1.07 1.07a3.988 3.988 0 0 0 6.125-.828c.187-.305.28-.602.413-.914.04-.11.117-.18.235-.18h1.5c.14 0 .25.117.25.25zM14 3v3.5c0 .273-.227.5-.5.5H10a.504.504 0 0 1-.5-.5c0-.133.055-.258.148-.352l1.079-1.078A4.019 4.019 0 0 0 8 4c-1.39 0-2.68.719-3.406 1.906-.188.305-.282.602-.414.914-.04.11-.117.18-.235.18H2.391a.252.252 0 0 1-.25-.25v-.055C2.812 3.922 5.117 2 8 2c1.531 0 3.023.61 4.133 1.656l1.015-1.008A.497.497 0 0 1 13.5 2.5c.273 0 .5.227.5.5z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function SCMIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M12.557 4.545c.241.247.443.743.443 1.098v7.714c0 .355-.28.643-.625.643h-8.75A.634.634 0 0 1 3 13.357V2.643C3 2.288 3.28 2 3.625 2h5.833c.345 0 .827.208 1.068.455l2.031 2.09zM9.667 2.91v2.518h2.448a.86.86 0 0 0-.144-.275L9.934 3.058a.823.823 0 0 0-.267-.147zm2.5 10.232V6.286H9.458a.634.634 0 0 1-.625-.643V2.857h-5v10.286h8.334z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IconProps } from './Icon';\nimport BugTrackerIcon from './BugTrackerIcon';\nimport HouseIcon from './HouseIcon';\nimport ContinuousIntegrationIcon from './ContinuousIntegrationIcon';\nimport SCMIcon from './SCMIcon';\nimport DetachIcon from './DetachIcon';\n\ninterface ProjectLinkIconProps {\n  type: string;\n}\n\nexport default function ProjectLinkIcon({ type, ...props }: IconProps & ProjectLinkIconProps) {\n  switch (type) {\n    case 'issue':\n      return <BugTrackerIcon {...props} />;\n    case 'homepage':\n      return <HouseIcon {...props} />;\n    case 'ci':\n      return <ContinuousIntegrationIcon {...props} />;\n    case 'scm':\n      return <SCMIcon {...props} />;\n    default:\n      return <DetachIcon {...props} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from '../helpers/request';\nimport { Paging, BranchParameters } from '../app/types';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface HistoryItem {\n  date: Date;\n  value?: string;\n}\n\nexport interface History {\n  [metric: string]: HistoryItem[];\n}\n\ninterface TimeMachineResponse {\n  measures: {\n    metric: string;\n    history: HistoryItem[];\n  }[];\n  paging: Paging;\n}\n\nexport function getTimeMachineData(\n  data: {\n    component: string;\n    from?: string;\n    metrics: string;\n    p?: number;\n    ps?: number;\n    to?: string;\n  } & BranchParameters\n): Promise<TimeMachineResponse> {\n  return getJSON('/api/measures/search_history', data).catch(throwGlobalError);\n}\n\nexport function getAllTimeMachineData(\n  data: {\n    component: string;\n    metrics: string;\n    from?: string;\n    p?: number;\n    to?: string;\n  } & BranchParameters,\n  prev?: TimeMachineResponse\n): Promise<TimeMachineResponse> {\n  return getTimeMachineData({ ...data, ps: 1000 }).then(r => {\n    const result = prev\n      ? {\n          measures: prev.measures.map((measure, idx) => ({\n            ...measure,\n            history: measure.history.concat(r.measures[idx].history)\n          })),\n          paging: r.paging\n        }\n      : r;\n\n    if (result.paging.pageIndex * result.paging.pageSize >= result.paging.total) {\n      return result;\n    }\n    return getAllTimeMachineData({ ...data, p: result.paging.pageIndex + 1 }, result);\n  });\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".line-tooltip{fill:none;stroke:#777;stroke-width:1px;shape-rendering:crispEdges}.chart-mouse-events-overlay{fill:none;stroke:none;pointer-events:all}.chart-zoomed .leak-chart-rect,.chart-zoomed .line-chart-area,.chart-zoomed .line-chart-path{-webkit-clip-path:url(#chart-clip);clip-path:url(#chart-clip)}.line-chart-dot{fill:#4b9fd5}.line-chart-dot.line-chart-dot-1{fill:#236a97}.line-chart-dot.line-chart-dot-2{fill:#24c6e0}.line-chart-event{fill:#fff;stroke:#4b9fd5;stroke-width:2px}.line-chart-event.VERSION{stroke:#4b9fd5}.line-chart-event.QUALITY_GATE{stroke:#0a0}.line-chart-event.QUALITY_PROFILE{stroke:#ed7d20}.line-chart-event.OTHER{stroke:#9139d4}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./AdvancedTimeline.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./AdvancedTimeline.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./AdvancedTimeline.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport { flatten, isEqual, sortBy, throttle, uniq } from 'lodash';\nimport { bisector, extent, max } from 'd3-array';\nimport { scaleLinear, scalePoint, scaleTime } from 'd3-scale';\nimport { line as d3Line, area, curveBasis } from 'd3-shape';\nimport * as theme from '../../app/theme';\nimport './LineChart.css';\nimport './AdvancedTimeline.css';\n\n/*::\ntype Event = { className?: string, name: string, date: Date };\n*/\n/*::\nexport type Point = { x: Date, y: number | string };\n*/\n/*::\nexport type Serie = { name: string, data: Array<Point>, type: string };\n*/\n/*::\ntype Scale = Function;\n*/\n\n/*::\ntype Props = {\n  basisCurve?: boolean,\n  endDate: ?Date,\n  events?: Array<Event>,\n  eventSize?: number,\n  disableZoom?: boolean,\n  formatYTick?: number => string,\n  hideGrid?: boolean,\n  hideXAxis?: boolean,\n  height: number,\n  width: number,\n  leakPeriodDate?: Date,\n  // used to avoid same y ticks labels\n  maxYTicksCount?: number,\n  metricType: string,\n  padding: Array<number>,\n  selectedDate?: Date,\n  series: Array<Serie>,\n  showAreas?: boolean,\n  showEventMarkers?: boolean,\n  startDate: ?Date,\n  updateSelectedDate?: (selectedDate: ?Date) => void,\n  updateTooltip?: (selectedDate: ?Date, tooltipXPos: ?number, tooltipIdx: ?number) => void,\n  updateZoom?: (start: ?Date, endDate: ?Date) => void,\n  zoomSpeed: number\n};\n*/\n\n/*::\ntype State = {\n  maxXRange: Array<number>,\n  mouseOver?: boolean,\n  mouseOverlayPos?: { [string]: number },\n  selectedDate: ?Date,\n  selectedDateXPos: ?number,\n  selectedDateIdx: ?number,\n  yScale: Scale,\n  xScale: Scale\n};\n*/\n\nexport default class AdvancedTimeline extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  static defaultProps = {\n    eventSize: 8,\n    maxYTicksCount: 4,\n    padding: [10, 10, 30, 60],\n    zoomSpeed: 1\n  };\n\n  constructor(props /*: Props */) {\n    super(props);\n    const scales = this.getScales(props);\n    const selectedDatePos = this.getSelectedDatePos(scales.xScale, props.selectedDate);\n    this.state = { ...scales, ...selectedDatePos };\n    this.updateTooltipPos = throttle(this.updateTooltipPos, 40);\n    this.handleZoomUpdate = throttle(this.handleZoomUpdate, 40);\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    let scales;\n    let selectedDatePos;\n    if (\n      nextProps.metricType !== this.props.metricType ||\n      nextProps.startDate !== this.props.startDate ||\n      nextProps.endDate !== this.props.endDate ||\n      nextProps.width !== this.props.width ||\n      nextProps.padding !== this.props.padding ||\n      nextProps.height !== this.props.height ||\n      nextProps.series !== this.props.series\n    ) {\n      scales = this.getScales(nextProps);\n      if (this.state.selectedDate != null) {\n        selectedDatePos = this.getSelectedDatePos(scales.xScale, this.state.selectedDate);\n      }\n    }\n\n    if (!isEqual(nextProps.selectedDate, this.props.selectedDate)) {\n      const xScale = scales ? scales.xScale : this.state.xScale;\n      selectedDatePos = this.getSelectedDatePos(xScale, nextProps.selectedDate);\n    }\n\n    if (scales || selectedDatePos) {\n      this.setState({ ...(scales || {}), ...(selectedDatePos || {}) });\n\n      if (selectedDatePos && nextProps.updateTooltip) {\n        nextProps.updateTooltip(\n          selectedDatePos.selectedDate,\n          selectedDatePos.selectedDateXPos,\n          selectedDatePos.selectedDateIdx\n        );\n      }\n    }\n  }\n\n  getRatingScale = (availableHeight /*: number */) =>\n    scalePoint()\n      .domain([5, 4, 3, 2, 1])\n      .range([availableHeight, 0]);\n\n  getLevelScale = (availableHeight /*: number */) =>\n    scalePoint()\n      .domain(['ERROR', 'WARN', 'OK'])\n      .range([availableHeight, 0]);\n\n  getYScale = (props /*: Props */, availableHeight /*: number */, flatData /*: Array<Point> */) => {\n    if (props.metricType === 'RATING') {\n      return this.getRatingScale(availableHeight);\n    } else if (props.metricType === 'LEVEL') {\n      return this.getLevelScale(availableHeight);\n    } else {\n      return scaleLinear()\n        .range([availableHeight, 0])\n        .domain([0, max(flatData, d => d.y) || 1])\n        .nice();\n    }\n  };\n\n  getXScale = (\n    { startDate, endDate } /*: Props */,\n    availableWidth /*: number */,\n    flatData /*: Array<Point> */\n  ) => {\n    const dateRange = extent(flatData, d => d.x);\n    const start = startDate && startDate > dateRange[0] ? startDate : dateRange[0];\n    const end = endDate && endDate < dateRange[1] ? endDate : dateRange[1];\n    const xScale = scaleTime()\n      .domain(sortBy([start, end]))\n      .range([0, availableWidth])\n      .clamp(false);\n    return {\n      xScale,\n      maxXRange: dateRange.map(xScale)\n    };\n  };\n\n  getScales = (props /*: Props */) => {\n    const availableWidth = props.width - props.padding[1] - props.padding[3];\n    const availableHeight = props.height - props.padding[0] - props.padding[2];\n    const flatData = flatten(props.series.map((serie /*: Serie */) => serie.data));\n    return {\n      ...this.getXScale(props, availableWidth, flatData),\n      yScale: this.getYScale(props, availableHeight, flatData)\n    };\n  };\n\n  getSelectedDatePos = (xScale /*: Scale */, selectedDate /*: ?Date */) => {\n    const firstSerie = this.props.series[0];\n    if (selectedDate && firstSerie) {\n      const idx = firstSerie.data.findIndex(\n        // $FlowFixMe selectedDate can't be null there\n        p => p.x.valueOf() === selectedDate.valueOf()\n      );\n      const xRange = xScale.range().sort();\n      const xPos = xScale(selectedDate);\n      if (idx >= 0 && xPos >= xRange[0] && xPos <= xRange[1]) {\n        return {\n          selectedDate,\n          selectedDateXPos: xScale(selectedDate),\n          selectedDateIdx: idx\n        };\n      }\n    }\n    return { selectedDate: null, selectedDateXPos: null, selectedDateIdx: null };\n  };\n\n  getEventMarker = (size /*: number */) => {\n    const half = size / 2;\n    return `M${half} 0 L${size} ${half} L ${half} ${size} L0 ${half} L${half} 0 L${size} ${half}`;\n  };\n\n  getMouseOverlayPos = (target /*: HTMLElement */) => {\n    if (this.state.mouseOverlayPos) {\n      return this.state.mouseOverlayPos;\n    }\n    const pos = target.getBoundingClientRect();\n    this.setState({ mouseOverlayPos: pos });\n    return pos;\n  };\n\n  handleWheel = (evt /*: WheelEvent & { target: HTMLElement } */) => {\n    evt.preventDefault();\n    const { maxXRange, xScale } = this.state;\n    const parentBbox = this.getMouseOverlayPos(evt.target);\n    const mouseXPos = (evt.pageX - parentBbox.left) / parentBbox.width;\n    const xRange = xScale.range();\n    const speed = evt.deltaMode ? 25 / evt.deltaMode * this.props.zoomSpeed : this.props.zoomSpeed;\n    const leftPos = xRange[0] - Math.round(speed * evt.deltaY * mouseXPos);\n    const rightPos = xRange[1] + Math.round(speed * evt.deltaY * (1 - mouseXPos));\n    const startDate = leftPos > maxXRange[0] ? xScale.invert(leftPos) : null;\n    const endDate = rightPos < maxXRange[1] ? xScale.invert(rightPos) : null;\n    this.handleZoomUpdate(startDate, endDate);\n  };\n\n  handleZoomUpdate = (startDate /*: ?Date */, endDate /*: ?Date */) => {\n    if (this.props.updateZoom) {\n      this.props.updateZoom(startDate, endDate);\n    }\n  };\n\n  handleMouseMove = (evt /*: MouseEvent & { target: HTMLElement } */) => {\n    const parentBbox = this.getMouseOverlayPos(evt.target);\n    this.updateTooltipPos(evt.pageX - parentBbox.left);\n  };\n\n  handleMouseEnter = () => this.setState({ mouseOver: true });\n\n  handleMouseOut = (evt /*: Event & { relatedTarget: HTMLElement } */) => {\n    const { updateTooltip } = this.props;\n    if (updateTooltip) {\n      this.setState({\n        mouseOver: false,\n        selectedDate: null,\n        selectedDateXPos: null,\n        selectedDateIdx: null\n      });\n      updateTooltip(null, null, null);\n    }\n  };\n\n  handleClick = () => {\n    const { updateSelectedDate } = this.props;\n    if (updateSelectedDate) {\n      updateSelectedDate(this.state.selectedDate);\n    }\n  };\n\n  updateTooltipPos = (xPos /*: number */) => {\n    const firstSerie = this.props.series[0];\n    if (this.state.mouseOver && firstSerie) {\n      const { updateTooltip } = this.props;\n      const date = this.state.xScale.invert(xPos);\n      const bisectX = bisector(d => d.x).right;\n      let idx = bisectX(firstSerie.data, date);\n      if (idx >= 0) {\n        const previousPoint = firstSerie.data[idx - 1];\n        const nextPoint = firstSerie.data[idx];\n        if (!nextPoint || (previousPoint && date - previousPoint.x <= nextPoint.x - date)) {\n          idx--;\n        }\n        const selectedDate = firstSerie.data[idx].x;\n        const xPos = this.state.xScale(selectedDate);\n        this.setState({ selectedDate, selectedDateXPos: xPos, selectedDateIdx: idx });\n        if (updateTooltip) {\n          updateTooltip(selectedDate, xPos, idx);\n        }\n      }\n    }\n  };\n\n  renderHorizontalGrid = () => {\n    const { formatYTick } = this.props;\n    const { xScale, yScale } = this.state;\n    const hasTicks = typeof yScale.ticks === 'function';\n    let ticks = hasTicks ? yScale.ticks(this.props.maxYTicksCount) : yScale.domain();\n\n    if (!ticks.length) {\n      ticks.push(yScale.domain()[1]);\n    }\n\n    // if there are duplicated ticks, that means 4 ticks are too much for this data\n    // so let's just use the domain values (min and max)\n    if (formatYTick) {\n      const formattedTicks = ticks.map(tick => formatYTick(tick));\n      if (ticks.length > uniq(formattedTicks).length) {\n        ticks = yScale.domain();\n      }\n    }\n\n    return (\n      <g>\n        {ticks.map(tick => (\n          <g key={tick}>\n            {formatYTick != null && (\n              <text\n                className=\"line-chart-tick line-chart-tick-x\"\n                dx=\"-1em\"\n                dy=\"0.3em\"\n                textAnchor=\"end\"\n                x={xScale.range()[0]}\n                y={yScale(tick)}>\n                {formatYTick(tick)}\n              </text>\n            )}\n            <line\n              className=\"line-chart-grid\"\n              x1={xScale.range()[0]}\n              x2={xScale.range()[1]}\n              y1={yScale(tick)}\n              y2={yScale(tick)}\n            />\n          </g>\n        ))}\n      </g>\n    );\n  };\n\n  renderXAxisTicks = () => {\n    const { xScale, yScale } = this.state;\n    const format = xScale.tickFormat(7);\n    const ticks = xScale.ticks(7);\n    const y = yScale.range()[0];\n    return (\n      <g>\n        {ticks.slice(0, -1).map((tick, index) => {\n          const nextTick = index + 1 < ticks.length ? ticks[index + 1] : xScale.domain()[1];\n          const x = (xScale(tick) + xScale(nextTick)) / 2;\n          return (\n            <text key={index} className=\"line-chart-tick\" x={x} y={y} dy=\"1.5em\">\n              {format(tick)}\n            </text>\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderLeak = () => {\n    const yRange = this.state.yScale.range();\n    const xRange = this.state.xScale.range();\n    const leakWidth = xRange[xRange.length - 1] - this.state.xScale(this.props.leakPeriodDate);\n    if (leakWidth < 0) {\n      return null;\n    }\n    return (\n      <rect\n        className=\"leak-chart-rect\"\n        x={this.state.xScale(this.props.leakPeriodDate)}\n        y={yRange[yRange.length - 1]}\n        width={leakWidth}\n        height={yRange[0] - yRange[yRange.length - 1]}\n        fill={theme.leakColor}\n      />\n    );\n  };\n\n  renderLines = () => {\n    const lineGenerator = d3Line()\n      .defined(d => d.y || d.y === 0)\n      .x(d => this.state.xScale(d.x))\n      .y(d => this.state.yScale(d.y));\n    if (this.props.basisCurve) {\n      lineGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            key={serie.name}\n            className={classNames('line-chart-path', 'line-chart-path-' + idx)}\n            d={lineGenerator(serie.data)}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderAreas = () => {\n    const areaGenerator = area()\n      .defined(d => d.y || d.y === 0)\n      .x(d => this.state.xScale(d.x))\n      .y1(d => this.state.yScale(d.y))\n      .y0(this.state.yScale(0));\n    if (this.props.basisCurve) {\n      areaGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            key={serie.name}\n            className={classNames('line-chart-area', 'line-chart-area-' + idx)}\n            d={areaGenerator(serie.data)}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderEvents = () => {\n    const { events, eventSize } = this.props;\n    if (!events || !eventSize) {\n      return null;\n    }\n    const { xScale, yScale } = this.state;\n    const inRangeEvents = events.filter(\n      event => event.date >= xScale.domain()[0] && event.date <= xScale.domain()[1]\n    );\n    const offset = eventSize / 2;\n    return (\n      <g>\n        {inRangeEvents.map((event, idx) => (\n          <path\n            d={this.getEventMarker(eventSize)}\n            className={classNames('line-chart-event', event.className)}\n            key={`${idx}-${event.date.getTime()}`}\n            transform={`translate(${xScale(event.date) - offset}, ${yScale.range()[0] + offset})`}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderSelectedDate = () => {\n    const { selectedDateIdx, selectedDateXPos, yScale } = this.state;\n    const firstSerie = this.props.series[0];\n    if (selectedDateIdx == null || selectedDateXPos == null || !firstSerie) {\n      return null;\n    }\n\n    return (\n      <g>\n        <line\n          className=\"line-tooltip\"\n          x1={selectedDateXPos}\n          x2={selectedDateXPos}\n          y1={yScale.range()[0]}\n          y2={yScale.range()[1]}\n        />\n        {this.props.series.map((serie, idx) => {\n          const point = serie.data[selectedDateIdx];\n          if (!point || (!point.y && point.y !== 0)) {\n            return null;\n          }\n          return (\n            <circle\n              key={serie.name}\n              cx={selectedDateXPos}\n              cy={yScale(point.y)}\n              r=\"4\"\n              className={classNames('line-chart-dot', 'line-chart-dot-' + idx)}\n            />\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderClipPath = () => {\n    return (\n      <defs>\n        <clipPath id=\"chart-clip\">\n          <rect\n            width={this.state.xScale.range()[1]}\n            height={this.state.yScale.range()[0] + 10}\n            transform=\"translate(0,-5)\"\n          />\n        </clipPath>\n      </defs>\n    );\n  };\n\n  renderMouseEventsOverlay = (zoomEnabled /*: boolean */) => {\n    const mouseEvents = {};\n    if (zoomEnabled) {\n      mouseEvents.onWheel = this.handleWheel;\n    }\n    if (this.props.updateTooltip) {\n      mouseEvents.onMouseEnter = this.handleMouseEnter;\n      mouseEvents.onMouseMove = this.handleMouseMove;\n      mouseEvents.onMouseOut = this.handleMouseOut;\n    }\n    if (this.props.updateSelectedDate) {\n      mouseEvents.onClick = this.handleClick;\n    }\n    return (\n      <rect\n        className=\"chart-mouse-events-overlay\"\n        width={this.state.xScale.range()[1]}\n        height={this.state.yScale.range()[0]}\n        {...mouseEvents}\n      />\n    );\n  };\n\n  render() {\n    if (!this.props.width || !this.props.height) {\n      return <div />;\n    }\n    const zoomEnabled = !this.props.disableZoom && this.props.updateZoom != null;\n    const isZoomed = this.props.startDate || this.props.endDate;\n    return (\n      <svg\n        className={classNames('line-chart', { 'chart-zoomed': isZoomed })}\n        width={this.props.width}\n        height={this.props.height}>\n        {zoomEnabled && this.renderClipPath()}\n        <g transform={`translate(${this.props.padding[3]}, ${this.props.padding[0]})`}>\n          {this.props.leakPeriodDate != null && this.renderLeak()}\n          {!this.props.hideGrid && this.renderHorizontalGrid()}\n          {!this.props.hideXAxis && this.renderXAxisTicks()}\n          {this.props.showAreas && this.renderAreas()}\n          {this.renderLines()}\n          {this.props.showEventMarkers && this.renderEvents()}\n          {this.renderSelectedDate()}\n          {this.renderMouseEventsOverlay(zoomEnabled)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { partition, sortBy } from 'lodash';\nimport { translate } from '../../../helpers/l10n';\n\nconst PROVIDED_TYPES = ['homepage', 'ci', 'issue', 'scm', 'scm_dev'];\n\nexport function isProvided(link) {\n  return PROVIDED_TYPES.includes(link.type);\n}\n\nexport function orderLinks(links) {\n  const [provided, unknown] = partition(links, isProvided);\n  return [\n    ...sortBy(provided, link => PROVIDED_TYPES.indexOf(link.type)),\n    ...sortBy(unknown, link => link.name.toLowerCase())\n  ];\n}\n\nexport function getLinkName(link) {\n  return isProvided(link) ? translate('project_links', link.type) : link.name;\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".line-chart-path{fill:none;stroke:#4b9fd5;stroke-width:2px}.line-chart-path.line-chart-path-1{stroke:#236a97}.line-chart-path.line-chart-path-2{stroke:#24c6e0}.line-chart-area{fill:rgba(75,159,213,.3);stroke-width:0}.line-chart-area.line-chart-area-1{fill:rgba(35,106,151,.3)}.line-chart-area.line-chart-area-2{fill:rgba(36,198,224,.3)}.line-chart-point{fill:#fff;stroke:#4b9fd5;stroke-width:2px}.line-chart-tick{fill:#777;font-size:12px;text-anchor:middle}.line-chart-tick-x{text-anchor:end}.line-chart-tick-x-right{text-anchor:start}.line-chart-grid{shape-rendering:crispedges;stroke:#eee}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".histogram-tick{text-anchor:end}.histogram-tick-start,.histogram-value{text-anchor:start}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Histogram.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Histogram.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./Histogram.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function HistoryIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.7 3.4v3.3c0 .1 0 .2-.1.2s-.2 0-.3-.1l-.9-.9-4.8 4.8c-.1.1-.1.1-.2.1s-.1 0-.2-.1L6.4 9l-3.2 3.2-1.5-1.5 4.5-4.5c.1-.1.1-.1.2-.1s.1 0 .2.1L8.4 8l3.5-3.5-.9-1c-.1-.1-.1-.2-.1-.3s.1-.1.2-.1h3.3c.1 0 .1 0 .2.1.1 0 .1.1.1.2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".code-snippet{position:relative;margin:8px 0;background:#404040;color:#f0f0f0;border-radius:3px}.code-snippet pre{padding:16px;overflow:auto}.code-snippet button{position:absolute;top:16px;right:16px;line-height:18px;border:1px solid #fff;color:#fff;font-size:11px;font-weight:400;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.code-snippet button:active,.code-snippet button:focus,.code-snippet button:hover{background-color:#fff;color:#404040}.code-snippet-oneline pre{padding-bottom:40px}.code-snippet-oneline button{top:auto;top:40px}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./CodeSnippet.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./CodeSnippet.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./CodeSnippet.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface Changelog {\n  description: string;\n  version: string;\n}\n\nexport interface Param {\n  key: string;\n  defaultValue?: string;\n  description: string;\n  deprecatedKey?: string;\n  deprecatedKeySince?: string;\n  deprecatedSince?: string;\n  exampleValue?: string;\n  internal: boolean;\n  maxValuesAllowed?: number;\n  possibleValues?: string[];\n  required: boolean;\n  since?: string;\n}\n\nexport interface Action {\n  key: string;\n  changelog: Changelog[];\n  description: string;\n  deprecatedSince?: string;\n  hasResponseExample: boolean;\n  internal: boolean;\n  params?: Param[];\n  post: boolean;\n  since?: string;\n}\n\nexport interface Domain {\n  actions: Action[];\n  description: string;\n  deprecated: boolean;\n  internal: boolean;\n  path: string;\n  since?: string;\n}\n\nexport interface Example {\n  example: string;\n  format: string;\n}\n\nexport function fetchWebApi(showInternal = true): Promise<Domain[]> {\n  return getJSON('/api/webservices/list', { include_internals: showInternal })\n    .then(r =>\n      r.webServices.map((domain: any) => {\n        const deprecated = !domain.actions.find((action: any) => !action.deprecatedSince);\n        const internal = !domain.actions.find((action: any) => !action.internal);\n        return { ...domain, deprecated, internal };\n      })\n    )\n    .catch(throwGlobalError);\n}\n\nexport function fetchResponseExample(domain: string, action: string): Promise<Example> {\n  return getJSON('/api/webservices/response_example', { controller: domain, action }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DateFormatter from './DateFormatter';\nimport DateTimeFormatter from './DateTimeFormatter';\nimport Tooltip from '../controls/Tooltip';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  className?: string;\n  date: Date | string | number;\n}\n\nexport default function DateTooltipFormatter({ className, date }: Props) {\n  const parsedDate = parseDate(date);\n  return (\n    <DateFormatter date={parsedDate} long={true}>\n      {formattedDate => (\n        <Tooltip mouseEnterDelay={0.5} overlay={<DateTimeFormatter date={parsedDate} />}>\n          <time className={className} dateTime={parsedDate.toISOString()}>\n            {formattedDate}\n          </time>\n        </Tooltip>\n      )}\n    </DateFormatter>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { inRange } from 'lodash';\nimport './SizeRating.css';\n\ninterface Props {\n  muted?: boolean;\n  small?: boolean;\n  value: number | null | undefined;\n}\n\nexport default function SizeRating({ small = false, muted = false, value }: Props) {\n  if (value == null) {\n    return <div className=\"size-rating size-rating-muted\">&nbsp;</div>;\n  }\n\n  let letter;\n  if (inRange(value, 0, 1000)) {\n    letter = 'XS';\n  } else if (inRange(value, 1000, 10000)) {\n    letter = 'S';\n  } else if (inRange(value, 10000, 100000)) {\n    letter = 'M';\n  } else if (inRange(value, 100000, 500000)) {\n    letter = 'L';\n  } else if (value >= 500000) {\n    letter = 'XL';\n  }\n\n  const className = classNames('size-rating', {\n    'size-rating-small': small,\n    'size-rating-muted': muted\n  });\n\n  return <div className={className}>{letter}</div>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport ChartLegendIcon from '../icons-components/ChartLegendIcon';\n\n/*::\ntype Props = {\n  style: string,\n  translatedName: string,\n  value: string\n};\n*/\n\nexport default function PreviewGraphTooltipsContent({ style, translatedName, value } /*: Props */) {\n  return (\n    <tr className=\"overview-analysis-graph-tooltip-line\">\n      <td className=\"thin\">\n        <ChartLegendIcon\n          className={'little-spacer-right line-chart-legend line-chart-legend-' + style}\n        />\n      </td>\n      <td className=\"overview-analysis-graph-tooltip-value text-right little-spacer-right thin\">\n        {value}\n      </td>\n      <td className=\"text-ellipsis overview-analysis-graph-tooltip-description\">\n        {translatedName}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport PreviewGraphTooltipsContent from './PreviewGraphTooltipsContent';\nimport DateFormatter from '../intl/DateFormatter';\nimport { Popup, PopupPlacement } from '../ui/popups';\n/*:: import type { Metric } from '../types'; */\n/*:: import type { Serie } from '../charts/AdvancedTimeline'; */\n\n/*::\ntype Props = {\n  formatValue: (number | string) => string,\n  graph: string,\n  graphWidth: number,\n  metrics: Array<Metric>,\n  selectedDate: Date,\n  series: Array<Serie & { translatedName: string }>,\n  tooltipIdx: number,\n  tooltipPos: number\n};\n*/\n\nconst TOOLTIP_WIDTH = 160;\n\nexport default class PreviewGraphTooltips extends React.PureComponent {\n  /*:: props: Props; */\n\n  render() {\n    const { tooltipIdx } = this.props;\n    const top = 16;\n    let left = this.props.tooltipPos;\n    let placement = PopupPlacement.RightTop;\n    if (left > this.props.graphWidth - TOOLTIP_WIDTH) {\n      left -= TOOLTIP_WIDTH;\n      placement = PopupPlacement.LeftTop;\n    }\n\n    return (\n      <Popup\n        className=\"overview-analysis-graph-popup disabled-pointer-events\"\n        placement={placement}\n        style={{ top, left, width: TOOLTIP_WIDTH }}>\n        <div className=\"overview-analysis-graph-tooltip\">\n          <div className=\"overview-analysis-graph-tooltip-title\">\n            <DateFormatter date={this.props.selectedDate} long={true} />\n          </div>\n          <table className=\"width-100\">\n            <tbody>\n              {this.props.series.map((serie, idx) => {\n                const point = serie.data[tooltipIdx];\n                if (!point || (!point.y && point.y !== 0)) {\n                  return null;\n                }\n                return (\n                  <PreviewGraphTooltipsContent\n                    key={serie.name}\n                    style={idx.toString()}\n                    translatedName={serie.translatedName}\n                    value={this.props.formatValue(point.y)}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Popup>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { minBy } from 'lodash';\nimport * as PropTypes from 'prop-types';\n// $FlowFixMe\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport PreviewGraphTooltips from './PreviewGraphTooltips';\nimport AdvancedTimeline from '../charts/AdvancedTimeline';\nimport {\n  DEFAULT_GRAPH,\n  getDisplayedHistoryMetrics,\n  generateSeries,\n  getSeriesMetricType,\n  hasHistoryDataValue,\n  PROJECT_ACTIVITY_GRAPH,\n  PROJECT_ACTIVITY_GRAPH_CUSTOM,\n  splitSeriesInGraphs\n} from '../../apps/projectActivity/utils';\nimport { get } from '../../helpers/storage';\nimport { formatMeasure, getShortType } from '../../helpers/measures';\nimport { getBranchLikeQuery } from '../../helpers/branches';\n/*:: import type { Serie } from '../charts/AdvancedTimeline'; */\n/*:: import type { History, Metric } from '../../apps/overview/types'; */\n\n/*::\ntype Props = {\n  branchLike?: { id?: string; name: string },\n  history: ?History,\n  metrics: { [string]: Metric },\n  project: string,\n  renderWhenEmpty?: () => void\n};\n*/\n\n/*::\ntype State = {\n  customMetrics: Array<string>,\n  graph: string,\n  selectedDate: ?Date,\n  series: Array<Serie>,\n  tooltipIdx: ?number,\n  tooltipXPos: ?number\n};\n*/\n\nconst GRAPH_PADDING = [4, 0, 4, 0];\nconst MAX_GRAPH_NB = 1;\nconst MAX_SERIES_PER_GRAPH = 3;\n\nexport default class PreviewGraph extends React.PureComponent {\n  /*:: props: Props; */\n  /*:: state: State; */\n\n  static contextTypes = {\n    router: PropTypes.object\n  };\n\n  constructor(props /*: Props */) {\n    super(props);\n    const customGraphs = get(PROJECT_ACTIVITY_GRAPH_CUSTOM);\n    const graph = get(PROJECT_ACTIVITY_GRAPH) || 'issues';\n    const customMetrics = customGraphs ? customGraphs.split(',') : [];\n    const series = splitSeriesInGraphs(\n      this.getSeries(props.history, graph, customMetrics, props.metrics),\n      MAX_GRAPH_NB,\n      MAX_SERIES_PER_GRAPH\n    );\n    this.state = {\n      customMetrics,\n      graph,\n      selectedDate: null,\n      series: series.length > 0 ? series[0] : [],\n      tooltipIdx: null,\n      tooltipXPos: null\n    };\n  }\n\n  componentWillReceiveProps(nextProps /*: Props */) {\n    if (nextProps.history !== this.props.history || nextProps.metrics !== this.props.metrics) {\n      const customGraphs = get(PROJECT_ACTIVITY_GRAPH_CUSTOM);\n      const graph = get(PROJECT_ACTIVITY_GRAPH) || 'issues';\n      const customMetrics = customGraphs ? customGraphs.split(',') : [];\n      const series = splitSeriesInGraphs(\n        this.getSeries(nextProps.history, graph, customMetrics, nextProps.metrics),\n        MAX_GRAPH_NB,\n        MAX_SERIES_PER_GRAPH\n      );\n      this.setState({\n        customMetrics,\n        graph,\n        series: series.length > 0 ? series[0] : []\n      });\n    }\n  }\n\n  formatValue = (tick /*: number | string */) =>\n    formatMeasure(tick, getShortType(getSeriesMetricType(this.state.series)));\n\n  getDisplayedMetrics = (graph /*: string */, customMetrics /*: Array<string> */) => {\n    const metrics /*: Array<string> */ = getDisplayedHistoryMetrics(graph, customMetrics);\n    if (!metrics || metrics.length <= 0) {\n      return getDisplayedHistoryMetrics(DEFAULT_GRAPH, customMetrics);\n    }\n    return metrics;\n  };\n\n  getSeries = (\n    history /*: ?History */,\n    graph /*: string */,\n    customMetrics /*: Array<string> */,\n    metrics /*: { [string]: Metric } */\n  ) => {\n    const myHistory = history;\n    if (!myHistory) {\n      return [];\n    }\n    const displayedMetrics = this.getDisplayedMetrics(graph, customMetrics);\n    const firstValid = minBy(\n      displayedMetrics.map(metric => myHistory[metric].find(p => p.value || p.value === 0)),\n      'date'\n    );\n    const measureHistory = displayedMetrics.map(metric => ({\n      metric,\n      history: firstValid\n        ? myHistory[metric].filter(p => p.date >= firstValid.date)\n        : myHistory[metric]\n    }));\n    return generateSeries(measureHistory, graph, metrics, displayedMetrics);\n  };\n\n  handleClick = () => {\n    this.context.router.push({\n      pathname: '/project/activity',\n      query: { id: this.props.project, ...getBranchLikeQuery(this.props.branchLike) }\n    });\n  };\n\n  updateTooltip = (\n    selectedDate /*: ?Date */,\n    tooltipXPos /*: ?number */,\n    tooltipIdx /*: ?number */\n  ) => this.setState({ selectedDate, tooltipXPos, tooltipIdx });\n\n  renderTimeline() {\n    const { graph, selectedDate, series, tooltipIdx, tooltipXPos } = this.state;\n    return (\n      <AutoSizer disableHeight={true}>\n        {({ width }) => (\n          <div>\n            <AdvancedTimeline\n              endDate={null}\n              startDate={null}\n              height={80}\n              width={width}\n              hideGrid={true}\n              hideXAxis={true}\n              interpolate=\"linear\"\n              metricType={getSeriesMetricType(series)}\n              padding={GRAPH_PADDING}\n              series={series}\n              showAreas={['coverage', 'duplications'].includes(graph)}\n              updateTooltip={this.updateTooltip}\n            />\n            {selectedDate != null &&\n              tooltipXPos != null &&\n              tooltipIdx != null && (\n                <PreviewGraphTooltips\n                  formatValue={this.formatValue}\n                  graph={graph}\n                  graphWidth={width}\n                  metrics={this.props.metrics}\n                  selectedDate={selectedDate}\n                  series={series}\n                  tooltipIdx={tooltipIdx}\n                  tooltipPos={tooltipXPos}\n                />\n              )}\n          </div>\n        )}\n      </AutoSizer>\n    );\n  }\n\n  render() {\n    const { series } = this.state;\n    if (!hasHistoryDataValue(series)) {\n      return this.props.renderWhenEmpty ? this.props.renderWhenEmpty() : null;\n    }\n\n    return (\n      <div\n        className=\"overview-analysis-graph big-spacer-bottom spacer-top\"\n        onClick={this.handleClick}\n        tabIndex={0}\n        role=\"link\">\n        {this.renderTimeline()}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, postJSON, post, RequestData } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Paging, BranchParameters } from '../app/types';\n\nexport interface Event {\n  key: string;\n  name: string;\n  category: string;\n  description?: string;\n}\n\nexport interface Analysis {\n  key: string;\n  date: string;\n  events: Event[];\n}\n\nexport function getProjectActivity(\n  data: { project: string; category?: string; p?: number; ps?: number } & BranchParameters\n): Promise<{ analyses: Analysis[]; paging: Paging }> {\n  return getJSON('/api/project_analyses/search', data).catch(throwGlobalError);\n}\n\ninterface CreateEventResponse {\n  analysis: string;\n  key: string;\n  name: string;\n  category: string;\n  description?: string;\n}\n\nexport function createEvent(\n  analysis: string,\n  name: string,\n  category?: string,\n  description?: string\n): Promise<CreateEventResponse> {\n  const data: RequestData = { analysis, name };\n  if (category) {\n    data.category = category;\n  }\n  if (description) {\n    data.description = description;\n  }\n  return postJSON('/api/project_analyses/create_event', data).then(r => r.event, throwGlobalError);\n}\n\nexport function deleteEvent(event: string): Promise<void | Response> {\n  return post('/api/project_analyses/delete_event', { event }).catch(throwGlobalError);\n}\n\nexport function changeEvent(\n  event: string,\n  name?: string,\n  description?: string\n): Promise<CreateEventResponse> {\n  const data: RequestData = { event };\n  if (name) {\n    data.name = name;\n  }\n  if (description) {\n    data.description = description;\n  }\n  return postJSON('/api/project_analyses/update_event', data).then(r => r.event, throwGlobalError);\n}\n\nexport function deleteAnalysis(analysis: string): Promise<void | Response> {\n  return post('/api/project_analyses/delete', { analysis }).catch(throwGlobalError);\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".size-rating{display:inline-block;vertical-align:top;width:24px;height:24px;line-height:24px;border-radius:24px;background-color:#4b9fd5;color:#fff;font-size:12px;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.size-rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:10px}.size-rating-muted{background-color:#bdbdbd}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./SizeRating.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./SizeRating.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./SizeRating.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".overview{animation:fadeIn .5s forwards}.overview-main{background-color:#f3f3f3;transition:transform .5s ease,opacity .5s ease}.overview-sidebar{margin-top:-20px;margin-bottom:-20px;margin-left:20px;padding-left:19px;padding-top:20px;padding-bottom:20px;border-left:1px solid #e6e6e6}.overview-title{font-size:16px;font-weight:400}.overview-quality-gate{padding-bottom:15px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.overview-quality-gate-conditions-list{display:flex;flex-wrap:wrap;align-items:flex-start}.overview-quality-gate-condition{display:block;margin-top:15px;margin-right:30px;border:none;border-left:5px solid;border-top-right-radius:2px;border-bottom-right-radius:2px;background-color:#fff;color:#444;transition:none}.overview-quality-gate-condition:focus,.overview-quality-gate-condition:hover{color:#444}.overview-quality-gate-condition:focus .overview-quality-gate-condition-container,.overview-quality-gate-condition:hover .overview-quality-gate-condition-container{border-color:inherit}.overview-quality-gate-condition-leak{background-color:#fbf3d5}.overview-quality-gate-condition-metric,.overview-quality-gate-condition-period{max-width:125px;line-height:16px;font-size:12px}.overview-quality-gate-condition-period{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.overview-quality-gate-condition-container{display:flex;align-items:center;min-width:150px;min-height:52px;padding:10px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;border-right:1px solid #e6e6e6;transition:border-color .3s ease}.overview-quality-gate-condition-value{line-height:1;margin-right:10px;font-size:24px;font-weight:400;min-width:24px;text-align:center}.overview-quality-gate-condition-value span{display:inline-block;vertical-align:top}.overview-quality-gate-threshold{margin-top:4px;font-size:12px;color:#777}.overview-quality-gate-warning{margin:15px 0 0}.overview-quality-gate-condition-error{border-color:#d4333f}.overview-quality-gate-condition-warn{border-color:#ed7d20}.overview-domains-list{animation:fadeIn .5s forwards}.overview-card{margin:15px 0}.overview-card-special{padding-bottom:26px;border-bottom:1px solid #e6e6e6}.overview-card-header{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:10px;line-height:24px}.overview-domain-panel{display:flex;margin-top:10px;border:1px solid #e6e6e6;background-color:#fff}.overview-domain-leak,.overview-domain-nutshell{position:relative;display:flex;padding:15px 10px}.overview-domain-nutshell{flex:3}.overview-domain-nutshell .line-chart-backdrop{fill:#e5f1f9}.overview-domain-leak{flex:2;background-color:#fbf3d5}.overview-domain-leak .overview-domain-measures{padding:0}.overview-domain-leak .line-chart-backdrop{fill:#efe7b8}.overview-domain-measures{position:relative;z-index:2;display:flex;flex:1;align-items:center;padding:0}.overview-domain-measures+.overview-domain-measures{margin-top:30px}.overview-domain-measures+.overview-domain-measures .overview-domain-measure-value{font-size:14px;font-weight:400}.overview-domain-measures+.overview-domain-measures .overview-domain-measure-label{margin-top:4px}.overview-domain-measure{flex:1;text-align:center}.overview-domain-measure-value{line-height:1;font-size:36px;font-weight:300;white-space:nowrap}.overview-domain-secondary-measure-value{line-height:1;font-size:20px;font-weight:300}.overview-domain-measure-label{margin-top:10px}.overview-domain-measure-label.offset-left{margin-right:-30px}.overview-domain-measure-label>svg{margin-top:3px}.overview-domain-leak .overview-domain-measure-label>svg{margin-top:0}.overview-domain-measure-history-link{vertical-align:bottom;visibility:hidden}.overview-domain-measure:hover .overview-domain-measure-history-link{visibility:visible}.overview-domain-measure-sup{display:inline-block;vertical-align:top;margin-top:-4px;margin-left:6px;font-size:16px}.overview-domain-timeline{position:absolute;z-index:1;bottom:0;left:0;right:0;animation:fadeIn .5s forwards}.overview-domain-timeline .line-chart-path{fill:none;stroke:none}.overview-domain-timeline-date{position:absolute;bottom:2px;left:5px;color:hsla(0,0%,47%,.6);font-size:11px}.overview-meta{background-color:#f3f3f3}.overview-meta-card{min-width:200px;box-sizing:border-box}.overview-meta-card+.overview-meta-card{margin-top:16px;padding-top:15px;border-top:1px solid #e6e6e6}.overview-meta-description{margin-top:-4px;line-height:1.5;color:#777}.overview-meta-header{margin-bottom:4px;color:#444}.overview-meta-list>li{padding-left:1px;padding-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.overview-meta-tags{position:relative}.overview-meta-size-ncloc{display:inline-block;vertical-align:middle;width:100px;text-align:center}.overview-meta-size-ncloc.is-half-width{width:50%;box-sizing:border-box}.overview-meta-size-ncloc a,.overview-meta-size-ncloc span{line-height:24px;font-size:18px;font-weight:300}.overview-meta-size-lang-dist{display:inline-block;vertical-align:middle;width:160px;min-height:40px;border-left:1px solid #e6e6e6;box-sizing:border-box}.overview-analysis{color:#777}.overview-analysis+.overview-analysis{margin-top:16px}.overview-analysis-graph{display:block;cursor:pointer;outline:none;border:none}.overview-analysis-graph-popup{opacity:.8;padding:0}.overview-analysis-graph-tooltip{padding:4px;pointer-events:none;font-size:12px;overflow:hidden}.overview-analysis-graph-tooltip-line{padding-bottom:2px}.overview-analysis-graph-tooltip-title{font-weight:700;margin-bottom:4px}.overview-analysis-graph-tooltip-value{font-weight:700}.overview-analysis-graph-tooltip-description{max-width:120px}.overview-activity-events{display:flex;flex-direction:column;align-items:flex-start}.overview-analysis-event{display:inline-block}.overview-analysis-event.badge{max-width:260px;border-radius:2px;font-weight:700;font-size:12px;letter-spacing:0;overflow:hidden;text-overflow:ellipsis}.overview-analysis-event+.overview-analysis-event{margin-top:4px}.overview-legend{position:absolute;bottom:100%;left:0;right:-1px;padding:5px 0 2px;border:1px solid #e6e6e6;background-color:#fbf3d5;font-size:14px;text-align:center;transform:translateY(-4px)}.overview-legend-spaced-line{padding:14px 0 10px}.overview-key{width:100%;background-color:transparent!important}.overview-deprecated-rules{margin:4px -6px;padding:3px 6px!important;border:1px solid #ebccd1;border-radius:3px;background-color:#f2dede}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".badges-list{display:flex;justify-content:space-around;justify-content:space-evenly;flex-wrap:nowrap}.badge-button{display:flex;justify-content:center;padding:8px;min-width:146px;height:116px;background-color:#f3f3f3;border:1px solid #e6e6e6;border-radius:3px;transition:all .3s ease}.badge-button:active,.badge-button:focus,.badge-button:hover{background-color:#f3f3f3;border-color:#4b9fd5;box-shadow:none}.badge-button.selected{background-color:#cae3f2;border-color:#236a97}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/lib/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".application-quality-gate-project{padding:10px}.overview-quality-gate-condition:hover .application-quality-gate-project{padding:9px;border-width:1px;border-style:solid;border-color:inherit}.application-quality-gate-project-conditions{margin-top:4px}.application-quality-gate-project-conditions>li{display:flex;justify-content:space-between;padding-top:2px;padding-bottom:2px}.application-quality-gate-project-conditions>li.is-on-leak{margin-left:-9px;margin-right:-9px;padding-left:9px;padding-right:9px;background-color:#fbf3d5}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ApplicationQualityGateProject.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ApplicationQualityGateProject.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/lib/index.js??postcss!./ApplicationQualityGateProject.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getComponentDrilldownUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../app/types';\nimport { getBranchLikeQuery } from '../../helpers/branches';\n\nconst ISSUE_MEASURES = [\n  'violations',\n  'new_violations',\n  'blocker_violations',\n  'critical_violations',\n  'major_violations',\n  'minor_violations',\n  'info_violations',\n  'new_blocker_violations',\n  'new_critical_violations',\n  'new_major_violations',\n  'new_minor_violations',\n  'new_info_violations',\n  'open_issues',\n  'reopened_issues',\n  'confirmed_issues',\n  'false_positive_issues',\n  'code_smells',\n  'new_code_smells',\n  'bugs',\n  'new_bugs',\n  'vulnerabilities',\n  'new_vulnerabilities'\n];\n\ninterface Props {\n  branchLike?: BranchLike;\n  children?: React.ReactNode;\n  className?: string;\n  component: string;\n  metric: string;\n  sinceLeakPeriod?: boolean;\n}\n\nexport default class DrilldownLink extends React.PureComponent<Props> {\n  isIssueMeasure = () => {\n    return ISSUE_MEASURES.indexOf(this.props.metric) !== -1;\n  };\n\n  propsToIssueParams = () => {\n    const params: { [key: string]: string | boolean } = {};\n\n    if (this.props.sinceLeakPeriod) {\n      params.sinceLeakPeriod = true;\n    }\n\n    switch (this.props.metric) {\n      case 'blocker_violations':\n      case 'new_blocker_violations':\n        Object.assign(params, { resolved: 'false', severities: 'BLOCKER' });\n        break;\n      case 'critical_violations':\n      case 'new_critical_violations':\n        Object.assign(params, { resolved: 'false', severities: 'CRITICAL' });\n        break;\n      case 'major_violations':\n      case 'new_major_violations':\n        Object.assign(params, { resolved: 'false', severities: 'MAJOR' });\n        break;\n      case 'minor_violations':\n      case 'new_minor_violations':\n        Object.assign(params, { resolved: 'false', severities: 'MINOR' });\n        break;\n      case 'info_violations':\n      case 'new_info_violations':\n        Object.assign(params, { resolved: 'false', severities: 'INFO' });\n        break;\n      case 'open_issues':\n        Object.assign(params, { resolved: 'false', statuses: 'OPEN' });\n        break;\n      case 'reopened_issues':\n        Object.assign(params, { resolved: 'false', statuses: 'REOPENED' });\n        break;\n      case 'confirmed_issues':\n        Object.assign(params, { resolved: 'false', statuses: 'CONFIRMED' });\n        break;\n      case 'false_positive_issues':\n        Object.assign(params, { resolutions: 'FALSE-POSITIVE' });\n        break;\n      case 'code_smells':\n      case 'new_code_smells':\n        Object.assign(params, { resolved: 'false', types: 'CODE_SMELL' });\n        break;\n      case 'bugs':\n      case 'new_bugs':\n        Object.assign(params, { resolved: 'false', types: 'BUG' });\n        break;\n      case 'vulnerabilities':\n      case 'new_vulnerabilities':\n        Object.assign(params, { resolved: 'false', types: 'VULNERABILITY' });\n        break;\n      default:\n        Object.assign(params, { resolved: 'false' });\n    }\n    return params;\n  };\n\n  renderIssuesLink = () => {\n    const url = getComponentIssuesUrl(this.props.component, {\n      ...this.propsToIssueParams(),\n      ...getBranchLikeQuery(this.props.branchLike)\n    });\n\n    return (\n      <Link to={url} className={this.props.className}>\n        {this.props.children}\n      </Link>\n    );\n  };\n\n  render() {\n    if (this.isIssueMeasure()) {\n      return this.renderIssuesLink();\n    }\n\n    const url = getComponentDrilldownUrl({\n      componentKey: this.props.component,\n      metric: this.props.metric,\n      branchLike: this.props.branchLike\n    });\n    return (\n      <Link className={this.props.className} to={url}>\n        {this.props.children}\n      </Link>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport classNames from 'classnames';\nimport { Link } from 'react-router';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport Measure from '../../../components/measure/Measure';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport { getPeriodValue, isDiffMetric, formatMeasure } from '../../../helpers/measures';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n/*:: import type { Component } from '../types'; */\n/*:: import type { MeasureEnhanced } from '../../../components/measure/types'; */\n\nexport default class QualityGateCondition extends React.PureComponent {\n  /*:: props: {\n    branchLike?: { id?: string; name: string },\n    component: Component,\n    condition: {\n      level: string,\n      measure: MeasureEnhanced,\n      op: string,\n      period: number,\n      error: string,\n      warning: string\n    }\n  };\n*/\n\n  getDecimalsNumber(threshold /*: number */, value /*: number */) /*: ?number */ {\n    const delta = Math.abs(threshold - value);\n    if (delta < 0.1 && delta > 0) {\n      //$FlowFixMe The matching result can't be null because of the previous check\n      return delta.toFixed(20).match('[^0.]').index - 1;\n    }\n  }\n\n  getIssuesUrl = (sinceLeakPeriod /*: boolean */, customQuery /*: {} */) => {\n    const query /*: Object */ = {\n      resolved: 'false',\n      ...getBranchLikeQuery(this.props.branchLike),\n      ...customQuery\n    };\n    if (sinceLeakPeriod) {\n      Object.assign(query, { sinceLeakPeriod: 'true' });\n    }\n    return getComponentIssuesUrl(this.props.component.key, query);\n  };\n\n  getUrlForCodeSmells(sinceLeakPeriod /*: boolean */) {\n    return this.getIssuesUrl(sinceLeakPeriod, { types: 'CODE_SMELL' });\n  }\n\n  getUrlForBugsOrVulnerabilities(type /*: string */, sinceLeakPeriod /*: boolean */) {\n    const RATING_TO_SEVERITIES_MAPPING = [\n      'BLOCKER,CRITICAL,MAJOR,MINOR',\n      'BLOCKER,CRITICAL,MAJOR',\n      'BLOCKER,CRITICAL',\n      'BLOCKER'\n    ];\n\n    const { condition } = this.props;\n    const threshold = condition.level === 'ERROR' ? condition.error : condition.warning;\n\n    return this.getIssuesUrl(sinceLeakPeriod, {\n      types: type,\n      severities: RATING_TO_SEVERITIES_MAPPING[Number(threshold) - 1]\n    });\n  }\n\n  getUrlForType(type /*: string */, sinceLeakPeriod /*: boolean */) {\n    return type === 'CODE_SMELL'\n      ? this.getUrlForCodeSmells(sinceLeakPeriod)\n      : this.getUrlForBugsOrVulnerabilities(type, sinceLeakPeriod);\n  }\n\n  wrapWithLink(children /*: React.Element<*> */) {\n    const { branchLike, component, condition } = this.props;\n\n    const className = classNames(\n      'overview-quality-gate-condition',\n      'overview-quality-gate-condition-' + condition.level.toLowerCase(),\n      { 'overview-quality-gate-condition-leak': condition.period != null }\n    );\n\n    const metricKey = condition.measure.metric.key;\n\n    const RATING_METRICS_MAPPING = {\n      reliability_rating: ['BUG', false],\n      new_reliability_rating: ['BUG', true],\n      security_rating: ['VULNERABILITY', false],\n      new_security_rating: ['VULNERABILITY', true],\n      sqale_rating: ['CODE_SMELL', false],\n      new_maintainability_rating: ['CODE_SMELL', true]\n    };\n\n    return RATING_METRICS_MAPPING[metricKey] ? (\n      <Link to={this.getUrlForType(...RATING_METRICS_MAPPING[metricKey])} className={className}>\n        {children}\n      </Link>\n    ) : (\n      <DrilldownLink\n        branchLike={branchLike}\n        className={className}\n        component={component.key}\n        metric={condition.measure.metric.key}\n        sinceLeakPeriod={condition.period != null}>\n        {children}\n      </DrilldownLink>\n    );\n  }\n\n  render() {\n    const { condition } = this.props;\n    const { measure } = condition;\n    const { metric } = measure;\n\n    const isDiff = isDiffMetric(metric.key);\n\n    const threshold = condition.level === 'ERROR' ? condition.error : condition.warning;\n    const actual = condition.period ? getPeriodValue(measure, condition.period) : measure.value;\n\n    let operator = translate('quality_gates.operator', condition.op);\n    let decimals = null;\n\n    if (metric.type === 'RATING') {\n      operator = translate('quality_gates.operator', condition.op, 'rating');\n    } else if (metric.type === 'PERCENT') {\n      decimals = this.getDecimalsNumber(parseFloat(condition.error), parseFloat(actual));\n    }\n\n    return this.wrapWithLink(\n      <div className=\"overview-quality-gate-condition-container\">\n        <div className=\"overview-quality-gate-condition-value\">\n          <Measure\n            decimals={decimals}\n            value={actual}\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n          />\n        </div>\n\n        <div>\n          <div className=\"overview-quality-gate-condition-metric\">\n            <IssueTypeIcon query={metric.key} className=\"little-spacer-right\" />\n            {metric.name}\n          </div>\n          {!isDiff &&\n            condition.period != null && (\n              <div className=\"overview-quality-gate-condition-period\">\n                {translate('quality_gates.conditions.leak')}\n              </div>\n            )}\n          <div className=\"overview-quality-gate-threshold\">\n            {operator} {formatMeasure(threshold, metric.type)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { shape, arrayOf, array, string, number, object } from 'prop-types';\n\nexport const ComponentType = shape({\n  id: string.isRequired\n});\n\nexport const MetricType = shape({\n  key: string.isRequired,\n  name: string.isRequired,\n  type: string.isRequired\n});\n\nexport const MeasureType = shape({\n  metric: MetricType.isRequired,\n  value: string,\n  periods: array\n});\n\nexport const MeasuresListType = arrayOf(MeasureType);\n\nexport const ConditionType = shape({\n  metric: string.isRequired\n});\n\nexport const EnhancedConditionType = shape({\n  measure: MeasureType.isRequired\n});\n\nexport const ConditionsListType = arrayOf(ConditionType);\n\nexport const EnhancedConditionsListType = arrayOf(EnhancedConditionType);\n\nexport const PeriodType = shape({\n  index: number.isRequired,\n  date: string.isRequired,\n  mode: string.isRequired,\n  parameter: string\n});\n\nexport const PeriodsListType = arrayOf(PeriodType);\n\nexport const EventType = shape({\n  id: string.isRequired,\n  date: object.isRequired,\n  type: string.isRequired,\n  name: string.isRequired,\n  text: string\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport { sortBy } from 'lodash';\nimport PropTypes from 'prop-types';\nimport QualityGateCondition from './QualityGateCondition';\nimport { ComponentType, ConditionsListType } from '../propTypes';\nimport { getMeasuresAndMeta } from '../../../api/measures';\nimport { enhanceMeasuresWithMetrics } from '../../../helpers/measures';\nimport { isSameBranchLike, getBranchLikeQuery } from '../../../helpers/branches';\n\nconst LEVEL_ORDER = ['ERROR', 'WARN'];\n\nfunction enhanceConditions(conditions, measures) {\n  return conditions.map(c => {\n    const measure = measures.find(measure => measure.metric.key === c.metric);\n    return { ...c, measure };\n  });\n}\n\nexport default class QualityGateConditions extends React.PureComponent {\n  static propTypes = {\n    branchLike: PropTypes.object,\n    component: ComponentType.isRequired,\n    conditions: ConditionsListType.isRequired\n  };\n\n  state = {\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadFailedMeasures();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike) ||\n      prevProps.conditions !== this.props.conditions ||\n      prevProps.component !== this.props.component\n    ) {\n      this.loadFailedMeasures();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadFailedMeasures() {\n    const { branchLike, component, conditions } = this.props;\n    const failedConditions = conditions.filter(c => c.level !== 'OK');\n    if (failedConditions.length > 0) {\n      const metrics = failedConditions.map(condition => condition.metric);\n      getMeasuresAndMeta(component.key, metrics, {\n        additionalFields: 'metrics',\n        ...getBranchLikeQuery(branchLike)\n      }).then(r => {\n        if (this.mounted) {\n          const measures = enhanceMeasuresWithMetrics(r.component.measures, r.metrics);\n          this.setState({\n            conditions: enhanceConditions(failedConditions, measures),\n            loading: false\n          });\n        }\n      });\n    } else {\n      this.setState({ loading: false });\n    }\n  }\n\n  render() {\n    const { branchLike, component } = this.props;\n    const { loading, conditions } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    const sortedConditions = sortBy(\n      conditions,\n      condition => LEVEL_ORDER.indexOf(condition.level),\n      condition => condition.metric.name\n    );\n\n    return (\n      <div\n        className=\"overview-quality-gate-conditions-list clearfix\"\n        id=\"overview-quality-gate-conditions-list\">\n        {sortedConditions.map(condition => (\n          <QualityGateCondition\n            branchLike={branchLike}\n            component={component}\n            condition={condition}\n            key={condition.measure.metric.key}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport { translate } from '../../../helpers/l10n';\n\nconst EmptyQualityGate = () => {\n  return (\n    <div className=\"overview-quality-gate\">\n      <h2 className=\"overview-title\">{translate('overview.quality_gate')}</h2>\n      <p className=\"overview-quality-gate-warning\">\n        {translate('overview.you_should_define_quality_gate')}\n      </p>\n    </div>\n  );\n};\n\nexport default EmptyQualityGate;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n//@flow\nimport React from 'react';\nimport QualityGateConditions from './QualityGateConditions';\nimport EmptyQualityGate from './EmptyQualityGate';\nimport { translate } from '../../../helpers/l10n';\nimport Level from '../../../components/ui/Level';\nimport HelpTooltip from '../../../components/controls/HelpTooltip';\nimport DocTooltip from '../../../components/docs/DocTooltip';\n/*:: import type { Component, MeasuresList } from '../types'; */\n\nfunction parseQualityGateDetails(rawDetails /*: string */) {\n  return JSON.parse(rawDetails);\n}\n\nfunction isProject(component /*: Component */) {\n  return component.qualifier === 'TRK';\n}\n\n/*::\ntype Props = {\n  branchLike?: {id?: string; name: string },\n  component: Component,\n  measures: MeasuresList\n};\n*/\n\nexport default function QualityGate({ branchLike, component, measures } /*: Props */) {\n  const statusMeasure = measures.find(measure => measure.metric.key === 'alert_status');\n  const detailsMeasure = measures.find(measure => measure.metric.key === 'quality_gate_details');\n\n  if (!statusMeasure) {\n    return isProject(component) ? <EmptyQualityGate /> : null;\n  }\n\n  const level = statusMeasure.value;\n\n  let conditions = [];\n  let ignoredConditions = false;\n  if (detailsMeasure && detailsMeasure.value) {\n    const details = parseQualityGateDetails(detailsMeasure.value);\n    conditions = details.conditions || [];\n    ignoredConditions = details.ignoredConditions;\n  }\n\n  return (\n    <div className=\"overview-quality-gate\" id=\"overview-quality-gate\">\n      <div className=\"display-flex-center\">\n        <h2 className=\"overview-title\">{translate('overview.quality_gate')}</h2>\n        <DocTooltip className=\"spacer-left\" doc=\"quality-gates/project-homepage-quality-gate\" />\n        <Level className=\"big-spacer-left\" level={level} />\n      </div>\n\n      {ignoredConditions && (\n        <div className=\"alert alert-info display-inline-block big-spacer-top\">\n          <span className=\"text-middle\">\n            {translate('overview.quality_gate.ignored_conditions')}\n          </span>\n          <HelpTooltip\n            className=\"spacer-left\"\n            overlay={translate('overview.quality_gate.ignored_conditions.tooltip')}\n          />\n        </div>\n      )}\n\n      {conditions.length > 0 && (\n        <QualityGateConditions\n          branchLike={branchLike}\n          component={component}\n          conditions={conditions}\n        />\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { Link } from 'react-router';\nimport { getLocalizedMetricName, translate } from '../../../helpers/l10n';\nimport { formatMeasure, isDiffMetric } from '../../../helpers/measures';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport './ApplicationQualityGateProject.css';\nimport { Metric } from '../../../app/types';\nimport { ApplicationProject, ConditionAnalysis } from '../../../api/quality-gates';\n\ninterface Props {\n  metrics: { [key: string]: Metric };\n  project: ApplicationProject;\n}\n\nexport default class ApplicationQualityGateProject extends React.PureComponent<Props> {\n  renderCondition = (condition: ConditionAnalysis) => {\n    const metric = this.props.metrics[condition.metric];\n    const metricName = getLocalizedMetricName(metric);\n    const threshold = condition.errorThreshold || condition.warningThreshold;\n    const isDiff = isDiffMetric(condition.metric);\n\n    return (\n      <li className={classNames({ 'is-on-leak': isDiff })} key={condition.metric}>\n        <span className=\"text-limited\">\n          <strong>{formatMeasure(condition.value, metric.type)}</strong> {metricName}\n          {!isDiff && condition.onLeak && ' ' + translate('quality_gates.conditions.leak')}\n        </span>\n        <span\n          className={classNames('big-spacer-left', {\n            'text-danger': condition.status === 'ERROR',\n            'text-warning': condition.status === 'WARN'\n          })}>\n          {metric.type === 'RATING'\n            ? translate('quality_gates.operator', condition.comparator, 'rating')\n            : translate('quality_gates.operator', condition.comparator)}{' '}\n          {formatMeasure(threshold, metric.type)}\n        </span>\n      </li>\n    );\n  };\n\n  render() {\n    const { project } = this.props;\n\n    return (\n      <Link\n        className={classNames(\n          'overview-quality-gate-condition',\n          'overview-quality-gate-condition-' + project.status.toLowerCase()\n        )}\n        to={getProjectUrl(project.key)}>\n        <div className=\"application-quality-gate-project\">\n          <h4>{project.name}</h4>\n          <ul className=\"application-quality-gate-project-conditions\">\n            {project.conditions.filter(c => c.status !== 'OK').map(this.renderCondition)}\n          </ul>\n        </div>\n      </Link>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { keyBy } from 'lodash';\nimport ApplicationQualityGateProject from './ApplicationQualityGateProject';\nimport Level from '../../../components/ui/Level';\nimport { getApplicationQualityGate, ApplicationProject } from '../../../api/quality-gates';\nimport { translate } from '../../../helpers/l10n';\nimport { LightComponent, Metric } from '../../../app/types';\nimport DocTooltip from '../../../components/docs/DocTooltip';\n\ninterface Props {\n  component: LightComponent;\n}\n\ntype State = {\n  loading: boolean;\n  metrics?: { [key: string]: Metric };\n  projects?: ApplicationProject[];\n  status?: string;\n};\n\nexport default class ApplicationQualityGate extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component.key !== this.props.component.key) {\n      this.fetchDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchDetails = () => {\n    const { component } = this.props;\n    this.setState({ loading: true });\n    getApplicationQualityGate({\n      application: component.key,\n      organization: component.organization\n    }).then(\n      ({ status, projects, metrics }) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            metrics: keyBy(metrics, 'key'),\n            status,\n            projects\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { metrics, status, projects } = this.state;\n\n    return (\n      <div className=\"overview-quality-gate\" id=\"overview-quality-gate\">\n        <h2 className=\"overview-title\">\n          {translate('overview.quality_gate')}\n          {this.state.loading && <i className=\"spinner spacer-left\" />}\n          <DocTooltip className=\"spacer-left\" doc=\"quality-gates/project-homepage-quality-gate\" />\n          {status != null && <Level className=\"big-spacer-left\" level={status} />}\n        </h2>\n\n        {projects &&\n          metrics && (\n            <div\n              className=\"overview-quality-gate-conditions-list clearfix\"\n              id=\"overview-quality-gate-conditions-list\">\n              {projects\n                .filter(project => project.status !== 'OK')\n                .map(project => (\n                  <ApplicationQualityGateProject\n                    key={project.key}\n                    metrics={metrics}\n                    project={project}\n                  />\n                ))}\n            </div>\n          )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { extent, max } from 'd3-array';\nimport { scaleLinear, ScaleLinear } from 'd3-scale';\nimport { area as d3Area, line as d3Line, curveBasis } from 'd3-shape';\nimport { AutoSizer } from 'react-virtualized/dist/commonjs/AutoSizer';\nimport './LineChart.css';\n\ninterface DataPoint {\n  x: number;\n  y?: number;\n}\n\ninterface Props {\n  backdropConstraints?: [number, number];\n  data: DataPoint[];\n  displayBackdrop?: boolean;\n  displayPoints?: boolean;\n  displayVerticalGrid?: boolean;\n  domain?: [number, number];\n  height: number;\n  padding?: [number, number, number, number];\n  width?: number;\n  xTicks?: {}[];\n  xValues?: {}[];\n}\n\nexport default class LineChart extends React.PureComponent<Props> {\n  renderBackdrop(xScale: ScaleLinear<number, number>, yScale: ScaleLinear<number, number>) {\n    const { displayBackdrop = true } = this.props;\n\n    if (!displayBackdrop) {\n      return null;\n    }\n\n    const area = d3Area<DataPoint>()\n      .x(d => xScale(d.x))\n      .y0(yScale.range()[0])\n      .y1(d => yScale(d.y || 0))\n      .defined(d => d.y != null)\n      .curve(curveBasis);\n\n    let { data } = this.props;\n    if (this.props.backdropConstraints) {\n      const c = this.props.backdropConstraints;\n      data = data.filter(d => c[0] <= d.x && d.x <= c[1]);\n    }\n\n    return <path className=\"line-chart-backdrop\" d={area(data) as string} />;\n  }\n\n  renderPoints(xScale: ScaleLinear<number, number>, yScale: ScaleLinear<number, number>) {\n    const { displayPoints = true } = this.props;\n\n    if (!displayPoints) {\n      return null;\n    }\n\n    const points = this.props.data.filter(point => point.y != null).map((point, index) => {\n      const x = xScale(point.x);\n      const y = yScale(point.y || 0);\n      return <circle className=\"line-chart-point\" cx={x} cy={y} key={index} r=\"3\" />;\n    });\n    return <g>{points}</g>;\n  }\n\n  renderVerticalGrid(xScale: ScaleLinear<number, number>, yScale: ScaleLinear<number, number>) {\n    const { displayVerticalGrid = true } = this.props;\n\n    if (!displayVerticalGrid) {\n      return null;\n    }\n\n    const lines = this.props.data.map((point, index) => {\n      const x = xScale(point.x);\n      const y1 = yScale.range()[0];\n      const y2 = yScale(point.y || 0);\n      return <line className=\"line-chart-grid\" key={index} x1={x} x2={x} y1={y1} y2={y2} />;\n    });\n    return <g>{lines}</g>;\n  }\n\n  renderXTicks(xScale: ScaleLinear<number, number>, yScale: ScaleLinear<number, number>) {\n    const { xTicks = [] } = this.props;\n\n    if (!xTicks.length) {\n      return null;\n    }\n\n    const ticks = xTicks.map((tick, index) => {\n      const point = this.props.data[index];\n      const x = xScale(point.x);\n      const y = yScale.range()[0];\n      return (\n        <text className=\"line-chart-tick\" dy=\"1.5em\" key={index} x={x} y={y}>\n          {tick}\n        </text>\n      );\n    });\n    return <g>{ticks}</g>;\n  }\n\n  renderXValues(xScale: ScaleLinear<number, number>, yScale: ScaleLinear<number, number>) {\n    const { xValues = [] } = this.props;\n\n    if (!xValues.length) {\n      return null;\n    }\n\n    const ticks = xValues.map((value, index) => {\n      const point = this.props.data[index];\n      const x = xScale(point.x);\n      const y = yScale(point.y || 0);\n      return (\n        <text className=\"line-chart-tick\" dy=\"-1em\" key={index} x={x} y={y}>\n          {value}\n        </text>\n      );\n    });\n    return <g>{ticks}</g>;\n  }\n\n  renderLine(xScale: ScaleLinear<number, number>, yScale: ScaleLinear<number, number>) {\n    const p = d3Line<DataPoint>()\n      .x(d => xScale(d.x))\n      .y(d => yScale(d.y || 0))\n      .defined(d => d.y != null)\n      .curve(curveBasis);\n    return <path className=\"line-chart-path\" d={p(this.props.data) as string} />;\n  }\n\n  renderChart = (width: number) => {\n    const { height, padding = [10, 10, 10, 10] } = this.props;\n\n    if (!width || !height) {\n      return <div />;\n    }\n\n    const availableWidth = width - padding[1] - padding[3];\n    const availableHeight = height - padding[0] - padding[2];\n\n    const xScale = scaleLinear()\n      .domain(extent(this.props.data, d => d.x) as [number, number])\n      .range([0, availableWidth]);\n    const yScale = scaleLinear().range([availableHeight, 0]);\n\n    if (this.props.domain) {\n      yScale.domain(this.props.domain);\n    } else {\n      const maxY = max(this.props.data, d => d.y) as number;\n      yScale.domain([0, maxY]);\n    }\n\n    return (\n      <svg className=\"line-chart\" height={height} width={width}>\n        <g transform={`translate(${padding[3]}, ${padding[0]})`}>\n          {this.renderVerticalGrid(xScale, yScale)}\n          {this.renderBackdrop(xScale, yScale)}\n          {this.renderLine(xScale, yScale)}\n          {this.renderPoints(xScale, yScale)}\n          {this.renderXTicks(xScale, yScale)}\n          {this.renderXValues(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  };\n\n  render() {\n    return this.props.width !== undefined ? (\n      this.renderChart(this.props.width)\n    ) : (\n      <AutoSizer disableHeight={true}>{size => this.renderChart(size.width)}</AutoSizer>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { max } from 'd3-array';\nimport LineChart from '../../../components/charts/LineChart';\nimport { HistoryItem } from '../../../api/time-machine';\n\nconst HEIGHT = 80;\n\ninterface Props {\n  history: HistoryItem[];\n  before?: Date;\n  after?: Date;\n}\n\nexport default class Timeline extends React.PureComponent<Props> {\n  filterSnapshots() {\n    const { history, before, after } = this.props;\n\n    return history.filter(s => {\n      const matchBefore = !before || s.date <= before;\n      const matchAfter = !after || s.date >= after;\n      return matchBefore && matchAfter;\n    });\n  }\n\n  render() {\n    const snapshots = this.filterSnapshots();\n\n    if (snapshots.length < 2) {\n      return null;\n    }\n\n    const data = snapshots.map((snapshot, index) => {\n      return { x: index, y: snapshot.value !== undefined ? Number(snapshot.value) : undefined };\n    });\n    const domain = [\n      0,\n      max(this.props.history, d => (d.value !== undefined ? parseFloat(d.value) : 0))\n    ] as [number, number];\n    return (\n      <LineChart\n        data={data}\n        displayBackdrop={true}\n        displayPoints={false}\n        displayVerticalGrid={false}\n        domain={domain}\n        height={HEIGHT}\n        padding={[0, 0, 0, 0]}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport BubblesIcon from '../../../components/icons-components/BubblesIcon';\nimport HistoryIcon from '../../../components/icons-components/HistoryIcon';\nimport Rating from '../../../components/ui/Rating';\nimport Timeline from '../components/Timeline';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport {\n  formatMeasure,\n  isDiffMetric,\n  getPeriodValue,\n  getShortType,\n  getRatingTooltip,\n  MeasureEnhanced\n} from '../../../helpers/measures';\nimport { getLocalizedMetricName } from '../../../helpers/l10n';\nimport { getPeriodDate } from '../../../helpers/periods';\nimport {\n  getComponentDrilldownUrl,\n  getComponentIssuesUrl,\n  getMeasureHistoryUrl\n} from '../../../helpers/urls';\nimport { Component, BranchLike } from '../../../app/types';\nimport { History } from '../../../api/time-machine';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n\nexport interface EnhanceProps {\n  branchLike?: BranchLike;\n  component: Component;\n  measures: MeasureEnhanced[];\n  leakPeriod?: { index: number; date?: string };\n  history?: History;\n  historyStartDate?: Date;\n}\n\nexport interface ComposedProps extends EnhanceProps {\n  getValue: (measure: MeasureEnhanced) => string | undefined;\n  renderHeader: (domain: string, label: string) => React.ReactNode;\n  renderMeasure: (metricKey: string) => React.ReactNode;\n  renderRating: (metricKey: string) => React.ReactNode;\n  renderIssues: (metric: string, type: string) => React.ReactNode;\n  renderHistoryLink: (metricKey: string) => React.ReactNode;\n  renderTimeline: (metricKey: string, range: string, children?: React.ReactNode) => React.ReactNode;\n}\n\nexport default function enhance(ComposedComponent: React.ComponentType<ComposedProps>) {\n  return class extends React.PureComponent<EnhanceProps> {\n    static displayName = `enhance(${ComposedComponent.displayName})}`;\n\n    getValue = (measure: MeasureEnhanced) => {\n      const { leakPeriod } = this.props;\n      if (!measure) {\n        return '0';\n      }\n      return isDiffMetric(measure.metric.key)\n        ? getPeriodValue(measure, leakPeriod ? leakPeriod.index : 0)\n        : measure.value;\n    };\n\n    renderHeader = (domain: string, label: string) => {\n      const { branchLike, component } = this.props;\n      return (\n        <div className=\"overview-card-header\">\n          <div className=\"overview-title\">\n            <span>{label}</span>\n            <Link\n              className=\"button button-small spacer-left text-text-bottom\"\n              to={getComponentDrilldownUrl({\n                componentKey: component.key,\n                metric: domain,\n                branchLike\n              })}>\n              <BubblesIcon size={14} />\n            </Link>\n          </div>\n        </div>\n      );\n    };\n\n    renderMeasure = (metricKey: string) => {\n      const { branchLike, measures, component } = this.props;\n      const measure = measures.find(measure => measure.metric.key === metricKey);\n      if (!measure) {\n        return null;\n      }\n\n      return (\n        <div className=\"overview-domain-measure\">\n          <div className=\"overview-domain-measure-value\">\n            <DrilldownLink branchLike={branchLike} component={component.key} metric={metricKey}>\n              <span className=\"js-overview-main-tests\">\n                {formatMeasure(measure.value, getShortType(measure.metric.type))}\n              </span>\n            </DrilldownLink>\n          </div>\n\n          <div className=\"overview-domain-measure-label offset-left\">\n            {getLocalizedMetricName(measure.metric)}\n            {this.renderHistoryLink(measure.metric.key)}\n          </div>\n        </div>\n      );\n    };\n\n    renderRating = (metricKey: string) => {\n      const { branchLike, component, measures } = this.props;\n      const measure = measures.find(measure => measure.metric.key === metricKey);\n      if (!measure) {\n        return null;\n      }\n\n      const value = this.getValue(measure);\n      const title = value && getRatingTooltip(metricKey, value);\n      return (\n        <Tooltip overlay={title}>\n          <div className=\"overview-domain-measure-sup\">\n            <DrilldownLink\n              branchLike={branchLike}\n              className=\"link-no-underline\"\n              component={component.key}\n              metric={metricKey}>\n              <Rating value={value} />\n            </DrilldownLink>\n          </div>\n        </Tooltip>\n      );\n    };\n\n    renderIssues = (metric: string, type: string) => {\n      const { branchLike, measures, component } = this.props;\n      const measure = measures.find(measure => measure.metric.key === metric);\n      if (!measure) {\n        return null;\n      }\n\n      const value = this.getValue(measure);\n      const params = { ...getBranchLikeQuery(branchLike), resolved: 'false', types: type };\n      if (isDiffMetric(metric)) {\n        Object.assign(params, { sinceLeakPeriod: 'true' });\n      }\n\n      return (\n        <Link to={getComponentIssuesUrl(component.key, params)}>\n          {formatMeasure(value, 'SHORT_INT')}\n        </Link>\n      );\n    };\n\n    renderHistoryLink = (metricKey: string) => {\n      const linkClass = 'button button-small spacer-left overview-domain-measure-history-link';\n      return (\n        <Link\n          className={linkClass}\n          to={getMeasureHistoryUrl(this.props.component.key, metricKey, this.props.branchLike)}>\n          <HistoryIcon />\n        </Link>\n      );\n    };\n\n    renderTimeline = (metricKey: string, range: 'before' | 'after', children?: React.ReactNode) => {\n      if (!this.props.history) {\n        return null;\n      }\n      const history = this.props.history[metricKey];\n      if (!history) {\n        return null;\n      }\n      const props = { history, [range]: getPeriodDate(this.props.leakPeriod) };\n      return (\n        <div className=\"overview-domain-timeline\">\n          <Timeline {...props} />\n          {children}\n        </div>\n      );\n    };\n\n    render() {\n      return (\n        <ComposedComponent\n          {...this.props}\n          getValue={this.getValue}\n          renderHeader={this.renderHeader}\n          renderHistoryLink={this.renderHistoryLink}\n          renderIssues={this.renderIssues}\n          renderMeasure={this.renderMeasure}\n          renderRating={this.renderRating}\n          renderTimeline={this.renderTimeline}\n        />\n      );\n    }\n  };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { sortBy } from 'lodash';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport DateTooltipFormatter from '../../../components/intl/DateTooltipFormatter';\nimport { getApplicationLeak } from '../../../api/application';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport DateFromNow from '../../../components/intl/DateFromNow';\n\ninterface Props {\n  component: string;\n}\n\ninterface State {\n  leaks?: Array<{ date: string; project: string; projectName: string }>;\n}\n\nexport default class ApplicationLeakPeriodLegend extends React.Component<Props, State> {\n  mounted = false;\n  state: State = {};\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchLeaks();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.component !== this.props.component) {\n      this.setState({ leaks: undefined });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchLeaks = () => {\n    if (!this.state.leaks) {\n      getApplicationLeak(this.props.component).then(\n        leaks => {\n          if (this.mounted) {\n            this.setState({\n              leaks: sortBy(leaks, value => {\n                return new Date(value.date);\n              })\n            });\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ leaks: undefined });\n          }\n        }\n      );\n    }\n  };\n\n  renderOverlay = () =>\n    this.state.leaks != null ? (\n      <ul className=\"text-left\">\n        {this.state.leaks.map(leak => (\n          <li key={leak.project}>\n            {leak.projectName}: <DateTooltipFormatter date={leak.date} />\n          </li>\n        ))}\n      </ul>\n    ) : (\n      <i className=\"spinner spinner-margin\" />\n    );\n\n  render() {\n    const leak = this.state.leaks && this.state.leaks.length > 0 ? this.state.leaks[0] : undefined;\n    return (\n      <Tooltip overlay={this.renderOverlay()}>\n        <div className={classNames('overview-legend', { 'overview-legend-spaced-line': !leak })}>\n          {translate('issues.max_leak_period')}:{' '}\n          {leak && (\n            <>\n              <DateFromNow date={leak.date}>\n                {fromNow => <span>{translateWithParameters('overview.started_x', fromNow)}</span>}\n              </DateFromNow>\n              <br />\n              <span className=\"note\">\n                {translate('from')}:{leak.projectName}\n              </span>\n            </>\n          )}\n        </div>\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ApplicationLeak {\n  date: string;\n  project: string;\n  projectName: string;\n}\n\nexport function getApplicationLeak(application: string): Promise<Array<ApplicationLeak>> {\n  return getJSON('/api/views/show_leak', { application }).then(r => r.leaks, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { getPeriodDate, getPeriodLabel } from '../../../helpers/periods';\nimport { translateWithParameters } from '../../../helpers/l10n';\n\n/*::\ntype DaysPeriod = {\n  date: string,\n  mode: 'days',\n  parameter: string\n};\n*/\n\n/*::\ntype DatePeriod = {\n  date: string,\n  mode: 'date',\n  parameter: string\n};\n*/\n\n/*::\ntype VersionPeriod = {\n  date: string,\n  mode: 'version',\n  parameter: string\n};\n*/\n\n/*::\ntype PreviousAnalysisPeriod = {\n  date: string,\n  mode: 'previous_analysis'\n};\n*/\n\n/*::\ntype PreviousVersionPeriod = {\n  date: string,\n  mode: 'previous_version'\n};\n*/\n\n/*::\ntype Period =\n  | DaysPeriod\n  | DatePeriod\n  | VersionPeriod\n  | PreviousAnalysisPeriod\n  | PreviousVersionPeriod; */\n\nexport default function LeakPeriodLegend({ period } /*: { period: Period } */) {\n  const leakPeriodLabel = getPeriodLabel(period);\n\n  if (period.mode === 'days') {\n    return (\n      <div className=\"overview-legend overview-legend-spaced-line\">\n        {translateWithParameters('overview.leak_period_x', leakPeriodLabel)}\n      </div>\n    );\n  }\n\n  const leakPeriodDate = getPeriodDate(period);\n  const tooltip = (\n    <DateFormatter date={leakPeriodDate} long={true}>\n      {formattedLeakPeriodDate => (\n        <span>\n          {translateWithParameters(\n            ['date'].includes(period.mode)\n              ? 'overview.last_analysis_on_x'\n              : 'overview.started_on_x',\n            formattedLeakPeriodDate\n          )}\n        </span>\n      )}\n    </DateFormatter>\n  );\n  return (\n    <Tooltip overlay={tooltip}>\n      <div className=\"overview-legend\">\n        {translateWithParameters('overview.leak_period_x', leakPeriodLabel)}\n        <br />\n        <DateFromNow date={leakPeriodDate}>\n          {fromNow => (\n            <span className=\"note\">\n              {translateWithParameters(\n                ['date'].includes(period.mode) ? 'overview.last_analysis_x' : 'overview.started_x',\n                fromNow\n              )}\n            </span>\n          )}\n        </DateFromNow>\n      </div>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate } from '../../../helpers/l10n';\n\nexport function getMetricName(metricKey) {\n  return translate('overview.metric', metricKey);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport enhance, { ComposedProps } from './enhance';\nimport ApplicationLeakPeriodLegend from '../components/ApplicationLeakPeriodLegend';\nimport BubblesIcon from '../../../components/icons-components/BubblesIcon';\nimport BugIcon from '../../../components/icons-components/BugIcon';\nimport LeakPeriodLegend from '../components/LeakPeriodLegend';\nimport VulnerabilityIcon from '../../../components/icons-components/VulnerabilityIcon';\nimport { getMetricName } from '../helpers/metrics';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\nimport { translate } from '../../../helpers/l10n';\n\nexport class BugsAndVulnerabilities extends React.PureComponent<ComposedProps> {\n  renderHeader() {\n    const { branchLike, component } = this.props;\n\n    return (\n      <div className=\"overview-card-header\">\n        <div className=\"overview-title\">\n          <span>{translate('metric.bugs.name')}</span>\n          <Link\n            className=\"button button-small spacer-left text-text-bottom\"\n            to={getComponentDrilldownUrl({\n              componentKey: component.key,\n              metric: 'Reliability',\n              branchLike\n            })}>\n            <BubblesIcon size={14} />\n          </Link>\n          <span className=\"big-spacer-left\">{translate('metric.vulnerabilities.name')}</span>\n          <Link\n            className=\"button button-small spacer-left text-text-bottom\"\n            to={getComponentDrilldownUrl({\n              componentKey: component.key,\n              metric: 'Security',\n              branchLike\n            })}>\n            <BubblesIcon size={14} />\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  renderLeak() {\n    const { component, leakPeriod } = this.props;\n    if (!leakPeriod) {\n      return null;\n    }\n\n    return (\n      <div className=\"overview-domain-leak\">\n        {component.qualifier === 'APP' ? (\n          <ApplicationLeakPeriodLegend component={component.key} />\n        ) : (\n          <LeakPeriodLegend period={leakPeriod} />\n        )}\n\n        <div className=\"overview-domain-measures\">\n          <div className=\"overview-domain-measure\">\n            <div className=\"overview-domain-measure-value\">\n              <span style={{ marginLeft: 30 }}>{this.props.renderIssues('new_bugs', 'BUG')}</span>\n              {this.props.renderRating('new_reliability_rating')}\n            </div>\n            <div className=\"overview-domain-measure-label\">\n              <BugIcon className=\"little-spacer-right\" />\n              {getMetricName('new_bugs')}\n            </div>\n          </div>\n          <div className=\"overview-domain-measure\">\n            <div className=\"overview-domain-measure-value\">\n              <span style={{ marginLeft: 30 }}>\n                {this.props.renderIssues('new_vulnerabilities', 'VULNERABILITY')}\n              </span>\n              {this.props.renderRating('new_security_rating')}\n            </div>\n            <div className=\"overview-domain-measure-label\">\n              <VulnerabilityIcon className=\"little-spacer-right\" />\n              {getMetricName('new_vulnerabilities')}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderNutshell() {\n    return (\n      <div className=\"overview-domain-nutshell\">\n        <div className=\"overview-domain-measures\">\n          <div className=\"overview-domain-measure\">\n            <div className=\"overview-domain-measure-value\">\n              {this.props.renderIssues('bugs', 'BUG')}\n              {this.props.renderRating('reliability_rating')}\n            </div>\n            <div className=\"overview-domain-measure-label\">\n              <BugIcon className=\"little-spacer-right \" />\n              {getMetricName('bugs')}\n              {this.props.renderHistoryLink('bugs')}\n            </div>\n          </div>\n          <div className=\"overview-domain-measure\">\n            <div className=\"overview-domain-measure-value\">\n              {this.props.renderIssues('vulnerabilities', 'VULNERABILITY')}\n              {this.props.renderRating('security_rating')}\n            </div>\n            <div className=\"overview-domain-measure-label\">\n              <VulnerabilityIcon className=\"little-spacer-right \" />\n              {getMetricName('vulnerabilities')}\n              {this.props.renderHistoryLink('vulnerabilities')}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { measures } = this.props;\n    const bugsMeasure = measures.find(measure => measure.metric.key === 'bugs');\n    if (!bugsMeasure) {\n      return null;\n    }\n    return (\n      <div className=\"overview-card overview-card-special\">\n        {this.renderHeader()}\n\n        <div className=\"overview-domain-panel\">\n          {this.renderNutshell()}\n          {this.renderLeak()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(BugsAndVulnerabilities);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport enhance, { ComposedProps } from './enhance';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport { getMetricName } from '../helpers/metrics';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure, isDiffMetric } from '../../../helpers/measures';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport CodeSmellIcon from '../../../components/icons-components/CodeSmellIcon';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\n\nexport class CodeSmells extends React.PureComponent<ComposedProps> {\n  renderHeader() {\n    return this.props.renderHeader('Maintainability', translate('metric.code_smells.name'));\n  }\n\n  renderDebt(metric: string, type: string) {\n    const { branchLike, measures, component } = this.props;\n    const measure = measures.find(measure => measure.metric.key === metric);\n    const value = measure ? this.props.getValue(measure) : undefined;\n    const params = {\n      ...getBranchLikeQuery(branchLike),\n      resolved: 'false',\n      facetMode: 'effort',\n      types: type\n    };\n\n    if (isDiffMetric(metric)) {\n      Object.assign(params, { sinceLeakPeriod: 'true' });\n    }\n\n    return (\n      <Link to={getComponentIssuesUrl(component.key, params)}>\n        {formatMeasure(value, 'SHORT_WORK_DUR')}\n      </Link>\n    );\n  }\n\n  renderTimelineStartDate() {\n    if (!this.props.historyStartDate) {\n      return null;\n    }\n    return (\n      <DateFromNow date={this.props.historyStartDate}>\n        {fromNow => (\n          <span className=\"overview-domain-timeline-date\">\n            {translateWithParameters('overview.started_x', fromNow)}\n          </span>\n        )}\n      </DateFromNow>\n    );\n  }\n\n  renderTimeline(range: string, displayDate?: boolean) {\n    return this.props.renderTimeline(\n      'sqale_index',\n      range,\n      displayDate ? this.renderTimelineStartDate() : null\n    );\n  }\n\n  renderLeak() {\n    const { leakPeriod } = this.props;\n    if (!leakPeriod) {\n      return null;\n    }\n\n    return (\n      <div className=\"overview-domain-leak\">\n        <div className=\"overview-domain-measures\">\n          <div className=\"overview-domain-measure\">\n            <div className=\"overview-domain-measure-value\">\n              <span style={{ marginLeft: 30 }}>\n                {this.renderDebt('new_technical_debt', 'CODE_SMELL')}\n              </span>\n              {this.props.renderRating('new_maintainability_rating')}\n            </div>\n            <div className=\"overview-domain-measure-label\">{getMetricName('new_effort')}</div>\n          </div>\n          <div className=\"overview-domain-measure\">\n            <div className=\"overview-domain-measure-value\">\n              {this.props.renderIssues('new_code_smells', 'CODE_SMELL')}\n            </div>\n            <div className=\"overview-domain-measure-label\">\n              <CodeSmellIcon className=\"little-spacer-right\" />\n              {getMetricName('new_code_smells')}\n            </div>\n          </div>\n        </div>\n\n        {this.renderTimeline('after')}\n      </div>\n    );\n  }\n\n  renderNutshell() {\n    return (\n      <div className=\"overview-domain-nutshell\">\n        <div className=\"overview-domain-measures\">\n          <div className=\"overview-domain-measure\">\n            <div className=\"overview-domain-measure-value\">\n              {this.renderDebt('sqale_index', 'CODE_SMELL')}\n              {this.props.renderRating('sqale_rating')}\n            </div>\n            <div className=\"overview-domain-measure-label\">\n              {getMetricName('effort')}\n              {this.props.renderHistoryLink('sqale_index')}\n            </div>\n          </div>\n          <div className=\"overview-domain-measure\">\n            <div className=\"overview-domain-measure-value\">\n              {this.props.renderIssues('code_smells', 'CODE_SMELL')}\n            </div>\n            <div className=\"overview-domain-measure-label offset-left\">\n              <CodeSmellIcon className=\"little-spacer-right \" />\n              {getMetricName('code_smells')}\n              {this.props.renderHistoryLink('code_smells')}\n            </div>\n          </div>\n        </div>\n\n        {this.renderTimeline('before', true)}\n      </div>\n    );\n  }\n\n  render() {\n    const { measures } = this.props;\n    const codeSmellsMeasure = measures.find(measure => measure.metric.key === 'code_smells');\n    if (!codeSmellsMeasure) {\n      return null;\n    }\n    return (\n      <div className=\"overview-card\" id=\"overview-code-smells\">\n        {this.renderHeader()}\n\n        <div className=\"overview-domain-panel\">\n          {this.renderNutshell()}\n          {this.renderLeak()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(CodeSmells);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport enhance, { ComposedProps } from './enhance';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport { getMetricName } from '../helpers/metrics';\nimport { formatMeasure, getPeriodValue } from '../../../helpers/measures';\nimport { translate } from '../../../helpers/l10n';\nimport CoverageRating from '../../../components/ui/CoverageRating';\n\nexport class Coverage extends React.PureComponent<ComposedProps> {\n  getCoverage() {\n    const measure = this.props.measures.find(measure => measure.metric.key === 'coverage');\n    return Number(measure ? measure.value : undefined);\n  }\n\n  renderHeader() {\n    return this.props.renderHeader('Coverage', translate('metric.coverage.name'));\n  }\n\n  renderTimeline(range: string) {\n    return this.props.renderTimeline('coverage', range);\n  }\n\n  renderTests() {\n    return this.props.renderMeasure('tests');\n  }\n\n  renderCoverage() {\n    const { branchLike, component } = this.props;\n    const metric = 'coverage';\n    const coverage = this.getCoverage();\n\n    return (\n      <div className=\"overview-domain-measure\">\n        <div className=\"display-inline-block text-middle big-spacer-right\">\n          <CoverageRating size=\"big\" value={coverage} />\n        </div>\n\n        <div className=\"display-inline-block text-middle\">\n          <div className=\"overview-domain-measure-value\">\n            <DrilldownLink branchLike={branchLike} component={component.key} metric={metric}>\n              <span className=\"js-overview-main-coverage\">\n                {formatMeasure(coverage, 'PERCENT')}\n              </span>\n            </DrilldownLink>\n          </div>\n\n          <div className=\"overview-domain-measure-label\">\n            {getMetricName('coverage')}\n            {this.props.renderHistoryLink('coverage')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderNewCoverage() {\n    const { branchLike, component, leakPeriod, measures } = this.props;\n    if (!leakPeriod) {\n      return null;\n    }\n\n    const newCoverageMeasure = measures.find(measure => measure.metric.key === 'new_coverage');\n    const newCoverageValue =\n      newCoverageMeasure && getPeriodValue(newCoverageMeasure, leakPeriod.index);\n    const formattedValue =\n      newCoverageMeasure && newCoverageValue !== undefined ? (\n        <div>\n          <DrilldownLink\n            branchLike={branchLike}\n            component={component.key}\n            metric={newCoverageMeasure.metric.key}>\n            <span className=\"js-overview-main-new-coverage\">\n              {formatMeasure(newCoverageValue, 'PERCENT')}\n            </span>\n          </DrilldownLink>\n        </div>\n      ) : (\n        <span>—</span>\n      );\n\n    const newLinesToCover = measures.find(measure => measure.metric.key === 'new_lines_to_cover');\n    const newLinesToCoverValue =\n      newLinesToCover && getPeriodValue(newLinesToCover, leakPeriod.index);\n    const label =\n      newLinesToCover && newLinesToCoverValue !== undefined && Number(newLinesToCoverValue) > 0 ? (\n        <div className=\"overview-domain-measure-label\">\n          {translate('overview.coverage_on')}\n          <br />\n          <DrilldownLink\n            branchLike={branchLike}\n            className=\"spacer-right overview-domain-secondary-measure-value\"\n            component={component.key}\n            metric={newLinesToCover.metric.key}>\n            <span className=\"js-overview-main-new-coverage\">\n              {formatMeasure(newLinesToCoverValue, 'SHORT_INT')}\n            </span>\n          </DrilldownLink>\n          {getMetricName('new_lines_to_cover')}\n        </div>\n      ) : (\n        <div className=\"overview-domain-measure-label\">{getMetricName('new_coverage')}</div>\n      );\n\n    return (\n      <div className=\"overview-domain-measure\">\n        <div className=\"overview-domain-measure-value\">{formattedValue}</div>\n        {label}\n      </div>\n    );\n  }\n\n  renderNutshell() {\n    return (\n      <div className=\"overview-domain-nutshell\">\n        <div className=\"overview-domain-measures\">\n          {this.renderCoverage()}\n          {this.renderTests()}\n        </div>\n\n        {this.renderTimeline('before')}\n      </div>\n    );\n  }\n\n  renderLeak() {\n    const { leakPeriod } = this.props;\n    if (!leakPeriod) {\n      return null;\n    }\n    return (\n      <div className=\"overview-domain-leak\">\n        <div className=\"overview-domain-measures\">{this.renderNewCoverage()}</div>\n\n        {this.renderTimeline('after')}\n      </div>\n    );\n  }\n\n  render() {\n    const { measures } = this.props;\n    const coverageMeasure = measures.find(measure => measure.metric.key === 'coverage');\n    if (!coverageMeasure) {\n      return null;\n    }\n    return (\n      <div className=\"overview-card\">\n        {this.renderHeader()}\n\n        <div className=\"overview-domain-panel\">\n          {this.renderNutshell()}\n          {this.renderLeak()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(Coverage);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport enhance, { ComposedProps } from './enhance';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport { getMetricName } from '../helpers/metrics';\nimport { formatMeasure, getPeriodValue } from '../../../helpers/measures';\nimport { translate } from '../../../helpers/l10n';\nimport DuplicationsRating from '../../../components/ui/DuplicationsRating';\n\nexport class Duplications extends React.PureComponent<ComposedProps> {\n  renderHeader() {\n    return this.props.renderHeader('Duplications', translate('overview.domain.duplications'));\n  }\n\n  renderTimeline(range: string) {\n    return this.props.renderTimeline('duplicated_lines_density', range);\n  }\n\n  renderDuplicatedBlocks() {\n    return this.props.renderMeasure('duplicated_blocks');\n  }\n\n  renderDuplications() {\n    const { branchLike, component, measures } = this.props;\n    const measure = measures.find(measure => measure.metric.key === 'duplicated_lines_density');\n    if (!measure) {\n      return null;\n    }\n\n    const duplications = Number(measure.value);\n\n    return (\n      <div className=\"overview-domain-measure\">\n        <div className=\"display-inline-block text-middle big-spacer-right\">\n          <DuplicationsRating size=\"big\" value={duplications} />\n        </div>\n\n        <div className=\"display-inline-block text-middle\">\n          <div className=\"overview-domain-measure-value\">\n            <DrilldownLink\n              branchLike={branchLike}\n              component={component.key}\n              metric=\"duplicated_lines_density\">\n              {formatMeasure(duplications, 'PERCENT')}\n            </DrilldownLink>\n          </div>\n\n          <div className=\"overview-domain-measure-label offset-left\">\n            {getMetricName('duplications')}\n            {this.props.renderHistoryLink('duplicated_lines_density')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderNewDuplications() {\n    const { branchLike, component, measures, leakPeriod } = this.props;\n    if (!leakPeriod) {\n      return null;\n    }\n    const newDuplicationsMeasure = measures.find(\n      measure => measure.metric.key === 'new_duplicated_lines_density'\n    );\n    const newDuplicationsValue =\n      newDuplicationsMeasure && getPeriodValue(newDuplicationsMeasure, leakPeriod.index);\n    const formattedValue =\n      newDuplicationsMeasure && newDuplicationsValue ? (\n        <div>\n          <DrilldownLink\n            branchLike={branchLike}\n            component={component.key}\n            metric={newDuplicationsMeasure.metric.key}>\n            <span className=\"js-overview-main-new-duplications\">\n              {formatMeasure(newDuplicationsValue, 'PERCENT')}\n            </span>\n          </DrilldownLink>\n        </div>\n      ) : (\n        <span>—</span>\n      );\n\n    const newLinesMeasure = measures.find(measure => measure.metric.key === 'new_lines');\n    const newLinesValue = newLinesMeasure && getPeriodValue(newLinesMeasure, leakPeriod.index);\n    const label =\n      newLinesMeasure && newLinesValue !== undefined && Number(newLinesValue) > 0 ? (\n        <div className=\"overview-domain-measure-label\">\n          {translate('overview.duplications_on')}\n          <br />\n          <DrilldownLink\n            branchLike={branchLike}\n            className=\"spacer-right overview-domain-secondary-measure-value\"\n            component={component.key}\n            metric={newLinesMeasure.metric.key}>\n            <span className=\"js-overview-main-new-lines\">\n              {formatMeasure(newLinesValue, 'SHORT_INT')}\n            </span>\n          </DrilldownLink>\n          {getMetricName('new_lines')}\n        </div>\n      ) : (\n        <div className=\"overview-domain-measure-label\">{getMetricName('new_duplications')}</div>\n      );\n\n    return (\n      <div className=\"overview-domain-measure\">\n        <div className=\"overview-domain-measure-value\">{formattedValue}</div>\n        {label}\n      </div>\n    );\n  }\n\n  renderNutshell() {\n    return (\n      <div className=\"overview-domain-nutshell\">\n        <div className=\"overview-domain-measures\">\n          {this.renderDuplications()}\n          {this.renderDuplicatedBlocks()}\n        </div>\n\n        {this.renderTimeline('before')}\n      </div>\n    );\n  }\n\n  renderLeak() {\n    const { leakPeriod } = this.props;\n    if (leakPeriod == null) {\n      return null;\n    }\n    return (\n      <div className=\"overview-domain-leak\">\n        <div className=\"overview-domain-measures\">{this.renderNewDuplications()}</div>\n\n        {this.renderTimeline('after')}\n      </div>\n    );\n  }\n\n  render() {\n    const { measures } = this.props;\n    const duplications = measures.find(\n      measure => measure.metric.key === 'duplicated_lines_density'\n    );\n    if (duplications == null) {\n      return null;\n    }\n    return (\n      <div className=\"overview-card\">\n        {this.renderHeader()}\n\n        <div className=\"overview-domain-panel\">\n          {this.renderNutshell()}\n          {this.renderLeak()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(Duplications);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ClipboardButton from '../../../components/controls/ClipboardButton';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  componentKey: string;\n  qualifier: string;\n}\n\nexport default function MetaKey({ componentKey, qualifier }: Props) {\n  return (\n    <>\n      <h4 className=\"overview-meta-header\">{translate('overview.project_key', qualifier)}</h4>\n      <div className=\"display-flex-center\">\n        <input className=\"overview-key\" type=\"text\" value={componentKey} readOnly={true} />\n        <ClipboardButton className=\"little-spacer-left\" copyValue={componentKey} />\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport ClipboardButton from '../../../components/controls/ClipboardButton';\n\ninterface Props {\n  organization: string;\n}\n\nexport default function MetaOrganizationKey({ organization }: Props) {\n  return (\n    <>\n      <h4 className=\"overview-meta-header big-spacer-top\">{translate('organization_key')}</h4>\n      <div className=\"display-flex-center\">\n        <input className=\"overview-key\" type=\"text\" value={organization} readOnly={true} />\n        <ClipboardButton className=\"little-spacer-left\" copyValue={organization} />\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getLinkName } from '../../project-admin/links/utils';\nimport { ProjectLink } from '../../../app/types';\nimport ProjectLinkIcon from '../../../components/icons-components/ProjectLinkIcon';\n\ninterface Props {\n  link: ProjectLink;\n}\n\nexport default function MetaLink({ link }: Props) {\n  return (\n    <li>\n      <a className=\"link-with-icon\" href={link.url} rel=\"nofollow\" target=\"_blank\">\n        <ProjectLinkIcon className=\"little-spacer-right\" type={link.type} />\n        {getLinkName(link)}\n      </a>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport MetaLink from './MetaLink';\nimport { getProjectLinks } from '../../../api/projectLinks';\nimport { orderLinks } from '../../project-admin/links/utils';\nimport { LightComponent, ProjectLink } from '../../../app/types';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: LightComponent;\n}\n\ninterface State {\n  links?: ProjectLink[];\n}\n\nexport default class MetaLinks extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {};\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadLinks();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component.key !== this.props.component.key) {\n      this.loadLinks();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadLinks = () =>\n    getProjectLinks(this.props.component.key).then(\n      links => {\n        if (this.mounted) {\n          this.setState({ links });\n        }\n      },\n      () => {}\n    );\n\n  render() {\n    const { links } = this.state;\n\n    if (!links || links.length === 0) {\n      return null;\n    }\n\n    const orderedLinks = orderLinks(links);\n\n    return (\n      <div className=\"overview-meta-card\">\n        <h4 className=\"overview-meta-header\">{translate('overview.external_links')}</h4>\n        <ul className=\"overview-meta-list\">\n          {orderedLinks.map(link => <MetaLink key={link.id} link={link} />)}\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from '../../../helpers/l10n';\nimport { getQualityGateUrl } from '../../../helpers/urls';\n\ninterface Props {\n  organization?: string;\n  qualityGate: { isDefault?: boolean; key: string; name: string };\n}\n\nexport default function MetaQualityGate({ qualityGate, organization }: Props) {\n  return (\n    <>\n      <h4 className=\"overview-meta-header\">{translate('overview.quality_gate')}</h4>\n\n      <ul className=\"overview-meta-list\">\n        <li>\n          {qualityGate.isDefault && (\n            <span className=\"note spacer-right\">{'(' + translate('default') + ')'}</span>\n          )}\n          <Link to={getQualityGateUrl(qualityGate.key, organization)}>{qualityGate.name}</Link>\n        </li>\n      </ul>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport { omitNil } from '../../../helpers/request';\nimport { getHostUrl } from '../../../helpers/urls';\n\nexport type BadgeColors = 'white' | 'black' | 'orange';\n\nexport interface BadgeOptions {\n  branch?: string;\n  color?: BadgeColors;\n  project?: string;\n  metric?: string;\n  pullRequest?: string;\n}\n\nexport enum BadgeType {\n  measure = 'measure',\n  qualityGate = 'quality_gate',\n  marketing = 'marketing'\n}\n\nexport function getBadgeUrl(\n  type: BadgeType,\n  { branch, project, color = 'white', metric = 'alert_status', pullRequest }: BadgeOptions\n) {\n  switch (type) {\n    case BadgeType.marketing:\n      return `${getHostUrl()}/images/project_badges/sonarcloud-${color}.svg`;\n    case BadgeType.qualityGate:\n      return `${getHostUrl()}/api/project_badges/quality_gate?${stringify(\n        omitNil({ branch, project, pullRequest })\n      )}`;\n    case BadgeType.measure:\n    default:\n      return `${getHostUrl()}/api/project_badges/measure?${stringify(\n        omitNil({ branch, project, metric, pullRequest })\n      )}`;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getQualityProfileUrl } from '../../../helpers/urls';\nimport { searchRules } from '../../../api/rules';\nimport { getLanguages } from '../../../store/rootReducer';\n\ninterface StateProps {\n  languages: { [key: string]: { name: string } };\n}\n\ninterface OwnProps {\n  headerClassName?: string;\n  organization?: string;\n  profiles: { key: string; language: string; name: string }[];\n}\n\ninterface State {\n  deprecatedByKey: { [key: string]: number };\n}\n\nclass MetaQualityProfiles extends React.PureComponent<StateProps & OwnProps, State> {\n  mounted = false;\n  state: State = { deprecatedByKey: {} };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadDeprecatedRules();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadDeprecatedRules() {\n    const requests = this.props.profiles.map(profile =>\n      this.loadDeprecatedRulesForProfile(profile.key)\n    );\n    Promise.all(requests).then(\n      responses => {\n        if (this.mounted) {\n          const deprecatedByKey: { [key: string]: number } = {};\n          responses.forEach((count, i) => {\n            const profileKey = this.props.profiles[i].key;\n            deprecatedByKey[profileKey] = count;\n          });\n          this.setState({ deprecatedByKey });\n        }\n      },\n      () => {}\n    );\n  }\n\n  loadDeprecatedRulesForProfile(profileKey: string) {\n    const data = {\n      activation: 'true',\n      organization: this.props.organization,\n      ps: 1,\n      qprofile: profileKey,\n      statuses: 'DEPRECATED'\n    };\n    return searchRules(data).then(r => r.total);\n  }\n\n  getDeprecatedRulesCount(profile: { key: string }) {\n    const count = this.state.deprecatedByKey[profile.key];\n    return count || 0;\n  }\n\n  renderProfile(profile: { key: string; language: string; name: string }) {\n    const languageFromStore = this.props.languages[profile.language];\n    const languageName = languageFromStore ? languageFromStore.name : profile.language;\n\n    const path = getQualityProfileUrl(profile.name, profile.language, this.props.organization);\n\n    const inner = (\n      <div className=\"text-ellipsis\">\n        <span className=\"note spacer-right\">{'(' + languageName + ')'}</span>\n        <Link to={path}>{profile.name}</Link>\n      </div>\n    );\n\n    const count = this.getDeprecatedRulesCount(profile);\n\n    if (count > 0) {\n      const tooltip = translateWithParameters('overview.deprecated_profile', count);\n      return (\n        <Tooltip key={profile.key} overlay={tooltip}>\n          <li className=\"overview-deprecated-rules\">{inner}</li>\n        </Tooltip>\n      );\n    }\n\n    return <li key={profile.key}>{inner}</li>;\n  }\n\n  render() {\n    const { headerClassName, profiles } = this.props;\n\n    return (\n      <>\n        <h4 className={classNames('overview-meta-header', headerClassName)}>\n          {translate('overview.quality_profiles')}\n        </h4>\n\n        <ul className=\"overview-meta-list\">\n          {profiles.map(profile => this.renderProfile(profile))}\n        </ul>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect<StateProps, {}, OwnProps>(mapStateToProps)(MetaQualityProfiles);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DrilldownLink from '../../../components/shared/DrilldownLink';\nimport LanguageDistributionContainer from '../../../components/charts/LanguageDistributionContainer';\nimport SizeRating from '../../../components/ui/SizeRating';\nimport { formatMeasure, MeasureEnhanced } from '../../../helpers/measures';\nimport { getMetricName } from '../helpers/metrics';\nimport { translate } from '../../../helpers/l10n';\nimport { LightComponent, BranchLike } from '../../../app/types';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: LightComponent;\n  measures: MeasureEnhanced[];\n}\n\nexport default class MetaSize extends React.PureComponent<Props> {\n  renderLoC = (ncloc?: MeasureEnhanced) => (\n    <div\n      className={classNames('overview-meta-size-ncloc', {\n        'is-half-width': this.props.component.qualifier === 'APP'\n      })}\n      id=\"overview-ncloc\">\n      {ncloc && (\n        <span className=\"spacer-right\">\n          <SizeRating value={Number(ncloc.value)} />\n        </span>\n      )}\n      {ncloc ? (\n        <DrilldownLink\n          branchLike={this.props.branchLike}\n          component={this.props.component.key}\n          metric=\"ncloc\">\n          {formatMeasure(ncloc.value, 'SHORT_INT')}\n        </DrilldownLink>\n      ) : (\n        <span>0</span>\n      )}\n      <div className=\"spacer-top text-muted\">{getMetricName('ncloc')}</div>\n    </div>\n  );\n\n  renderLoCDistribution = () => {\n    const languageDistribution = this.props.measures.find(\n      measure => measure.metric.key === 'ncloc_language_distribution'\n    );\n\n    const className =\n      this.props.component.qualifier === 'TRK' ? 'overview-meta-size-lang-dist' : 'big-spacer-top';\n\n    return languageDistribution ? (\n      <div id=\"overview-language-distribution\" className={className}>\n        <LanguageDistributionContainer distribution={languageDistribution.value} width={160} />\n      </div>\n    ) : null;\n  };\n\n  renderProjects = () => {\n    const projects = this.props.measures.find(measure => measure.metric.key === 'projects');\n    return (\n      <div className=\"overview-meta-size-ncloc is-half-width\" id=\"overview-projects\">\n        {projects ? (\n          <DrilldownLink\n            branchLike={this.props.branchLike}\n            component={this.props.component.key}\n            metric=\"projects\">\n            {formatMeasure(projects.value, 'SHORT_INT')}\n          </DrilldownLink>\n        ) : (\n          <span>0</span>\n        )}\n        <div className=\"spacer-top text-muted\">{translate('metric.projects.name')}</div>\n      </div>\n    );\n  };\n\n  render() {\n    const ncloc = this.props.measures.find(measure => measure.metric.key === 'ncloc');\n\n    if (ncloc == null && this.props.component.qualifier !== 'APP') {\n      return null;\n    }\n\n    return (\n      <div className=\"big-spacer-top\" id=\"overview-size\">\n        {this.props.component.qualifier === 'APP' && this.renderProjects()}\n        {this.renderLoC(ncloc)}\n        {this.renderLoCDistribution()}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { without, difference } from 'lodash';\nimport TagsSelector from '../../../components/tags/TagsSelector';\nimport { searchProjectTags } from '../../../api/components';\n\ninterface Props {\n  project: string;\n  selectedTags: string[];\n  setProjectTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class MetaTagsSelector extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchProjectTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100)\n    }).then(\n      ({ tags }) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setProjectTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setProjectTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <TagsSelector\n        listSize={LIST_SIZE}\n        onSearch={this.onSearch}\n        onSelect={this.onSelect}\n        onUnselect={this.onUnselect}\n        selectedTags={this.props.selectedTags}\n        tags={availableTags}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport MetaTagsSelector from './MetaTagsSelector';\nimport { setProjectTags } from '../../../api/components';\nimport { translate } from '../../../helpers/l10n';\nimport TagsList from '../../../components/tags/TagsList';\nimport { Component } from '../../../app/types';\nimport { Button } from '../../../components/ui/buttons';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport { PopupPlacement } from '../../../components/ui/popups';\n\ninterface Props {\n  component: Component;\n  onComponentChange: (changes: {}) => void;\n}\n\nexport default class MetaTags extends React.PureComponent<Props> {\n  card?: HTMLDivElement | null;\n  tagsList?: HTMLElement | null;\n  tagsSelector?: HTMLDivElement | null;\n\n  canUpdateTags = () => {\n    const { configuration } = this.props.component;\n    return configuration && configuration.showSettings;\n  };\n\n  getPopupPos = (eltPos: ClientRect, containerPos: ClientRect) => ({\n    top: eltPos.height,\n    right: containerPos.width - eltPos.width\n  });\n\n  handleSetProjectTags = (values: string[]) => {\n    setProjectTags({\n      project: this.props.component.key,\n      tags: values.join(',')\n    }).then(() => this.props.onComponentChange({ tags: values }), () => {});\n  };\n\n  render() {\n    const { key } = this.props.component;\n    const tags = this.props.component.tags || [];\n\n    if (this.canUpdateTags()) {\n      return (\n        <div className=\"big-spacer-top overview-meta-tags\" ref={card => (this.card = card)}>\n          <Dropdown\n            closeOnClick={false}\n            closeOnClickOutside={true}\n            overlay={\n              <MetaTagsSelector\n                project={key}\n                selectedTags={tags}\n                setProjectTags={this.handleSetProjectTags}\n              />\n            }\n            overlayPlacement={PopupPlacement.BottomLeft}>\n            <Button\n              className=\"button-link\"\n              innerRef={tagsList => (this.tagsList = tagsList)}\n              stopPropagation={true}>\n              <TagsList allowUpdate={true} tags={tags.length ? tags : [translate('no_tags')]} />\n            </Button>\n          </Dropdown>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"big-spacer-top overview-meta-tags\">\n          <TagsList\n            allowUpdate={false}\n            className=\"note\"\n            tags={tags.length ? tags : [translate('no_tags')]}\n          />\n        </div>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { BadgeType } from './utils';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onClick: (type: BadgeType) => void;\n  selected: boolean;\n  type: BadgeType;\n  url: string;\n}\n\nexport default class BadgeButton extends React.PureComponent<Props> {\n  handleClick = () => {\n    this.props.onClick(this.props.type);\n  };\n\n  render() {\n    const { selected, type, url } = this.props;\n    const width = type !== BadgeType.measure ? '128px' : undefined;\n    return (\n      <Button className={classNames('badge-button', { selected })} onClick={this.handleClick}>\n        <img alt={translate('overview.badges', type, 'alt')} src={url} width={width} />\n      </Button>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BadgeColors, BadgeType, BadgeOptions } from './utils';\nimport Select from '../../../components/controls/Select';\nimport { fetchWebApi } from '../../../api/web-api';\nimport { getLocalizedMetricName, translate } from '../../../helpers/l10n';\nimport { Metric } from '../../../app/types';\n\ninterface Props {\n  className?: string;\n  metrics: { [key: string]: Metric };\n  options: BadgeOptions;\n  type: BadgeType;\n  updateOptions: (options: Partial<BadgeOptions>) => void;\n}\n\ninterface State {\n  badgeMetrics: string[];\n}\n\nexport default class BadgeParams extends React.PureComponent<Props> {\n  mounted = false;\n\n  state: State = { badgeMetrics: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchBadgeMetrics();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchBadgeMetrics() {\n    fetchWebApi(false).then(\n      webservices => {\n        if (this.mounted) {\n          const domain = webservices.find(domain => domain.path === 'api/project_badges');\n          const ws = domain && domain.actions.find(ws => ws.key === 'measure');\n          const param = ws && ws.params && ws.params.find(param => param.key === 'metric');\n          if (param && param.possibleValues) {\n            this.setState({ badgeMetrics: param.possibleValues });\n          }\n        }\n      },\n      () => {}\n    );\n  }\n\n  getColorOptions = () =>\n    ['white', 'black', 'orange'].map(color => ({\n      label: translate('overview.badges.options.colors', color),\n      value: color\n    }));\n\n  getMetricOptions = () =>\n    this.state.badgeMetrics.map(key => {\n      const metric = this.props.metrics[key];\n      return {\n        value: key,\n        label: metric ? getLocalizedMetricName(metric) : key\n      };\n    });\n\n  handleColorChange = ({ value }: { value: BadgeColors }) =>\n    this.props.updateOptions({ color: value });\n\n  handleMetricChange = ({ value }: { value: string }) =>\n    this.props.updateOptions({ metric: value });\n\n  render() {\n    const { className, options, type } = this.props;\n    switch (type) {\n      case BadgeType.marketing:\n        return (\n          <div className={className}>\n            <label className=\"big-spacer-right\" htmlFor=\"badge-color\">\n              {translate('color')}\n            </label>\n            <Select\n              className=\"input-medium\"\n              clearable={false}\n              name=\"badge-color\"\n              onChange={this.handleColorChange}\n              options={this.getColorOptions()}\n              searchable={false}\n              value={options.color}\n            />\n          </div>\n        );\n      case BadgeType.measure:\n        return (\n          <div className={className}>\n            <label className=\"big-spacer-right\" htmlFor=\"badge-metric\">\n              {translate('overview.badges.metric')}\n            </label>\n            <Select\n              className=\"input-medium\"\n              clearable={false}\n              name=\"badge-metric\"\n              onChange={this.handleMetricChange}\n              options={this.getMetricOptions()}\n              searchable={false}\n              value={options.metric}\n            />\n          </div>\n        );\n      default:\n        return null;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BadgeButton from './BadgeButton';\nimport BadgeParams from './BadgeParams';\nimport { BadgeType, BadgeOptions, getBadgeUrl } from './utils';\nimport { Metric, BranchLike } from '../../../app/types';\nimport CodeSnippet from '../../../components/common/CodeSnippet';\nimport Modal from '../../../components/controls/Modal';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { translate } from '../../../helpers/l10n';\nimport { Button, ResetButtonLink } from '../../../components/ui/buttons';\nimport { isSonarCloud } from '../../../helpers/system';\nimport './styles.css';\n\ninterface Props {\n  branchLike?: BranchLike;\n  metrics: { [key: string]: Metric };\n  project: string;\n  qualifier: string;\n}\n\ninterface State {\n  open: boolean;\n  selectedType: BadgeType;\n  badgeOptions: BadgeOptions;\n}\n\nexport default class BadgesModal extends React.PureComponent<Props, State> {\n  state: State = {\n    open: false,\n    selectedType: BadgeType.measure,\n    badgeOptions: { color: 'white', metric: 'alert_status' }\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  handleOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleSelectBadge = (selectedType: BadgeType) => {\n    this.setState({ selectedType });\n  };\n\n  handleUpdateOptions = (options: Partial<BadgeOptions>) => {\n    this.setState(state => ({ badgeOptions: { ...state.badgeOptions, ...options } }));\n  };\n\n  render() {\n    const { branchLike, project, qualifier } = this.props;\n    const { selectedType, badgeOptions } = this.state;\n    const header = translate('overview.badges.title');\n    const fullBadgeOptions = { project, ...badgeOptions, ...getBranchLikeQuery(branchLike) };\n    const badges = isSonarCloud()\n      ? [BadgeType.measure, BadgeType.qualityGate, BadgeType.marketing]\n      : [BadgeType.measure, BadgeType.qualityGate];\n    return (\n      <div className=\"overview-meta-card\">\n        <Button className=\"js-project-badges\" onClick={this.handleOpen}>\n          {translate('overview.badges.get_badge', qualifier)}\n        </Button>\n        {this.state.open && (\n          <Modal contentLabel={header} onRequestClose={this.handleClose}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n            <div className=\"modal-body\">\n              <p className=\"huge-spacer-bottom\">\n                {translate('overview.badges.description', qualifier)}\n              </p>\n              <div className=\"badges-list spacer-bottom\">\n                {badges.map(type => (\n                  <BadgeButton\n                    key={type}\n                    onClick={this.handleSelectBadge}\n                    selected={type === selectedType}\n                    type={type}\n                    url={getBadgeUrl(type, fullBadgeOptions)}\n                  />\n                ))}\n              </div>\n              <p className=\"text-center note huge-spacer-bottom\">\n                {translate('overview.badges', selectedType, 'description', qualifier)}\n              </p>\n              <BadgeParams\n                className=\"big-spacer-bottom\"\n                metrics={this.props.metrics}\n                options={badgeOptions}\n                type={selectedType}\n                updateOptions={this.handleUpdateOptions}\n              />\n              <CodeSnippet isOneLine={true} snippet={getBadgeUrl(selectedType, fullBadgeOptions)} />\n            </div>\n            <footer className=\"modal-foot\">\n              <ResetButtonLink className=\"js-modal-close\" onClick={this.handleClose}>\n                {translate('close')}\n              </ResetButtonLink>\n            </footer>\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Event as IEvent } from '../../../api/projectActivity';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  event: IEvent;\n}\n\nexport default function Event({ event }: Props) {\n  if (event.category === 'VERSION') {\n    return (\n      <span\n        className=\"overview-analysis-event badge\"\n        title={`${translate('version')} ${event.name}`}>\n        {event.name}\n      </span>\n    );\n  }\n\n  return (\n    <div className=\"overview-analysis-event\">\n      <span className=\"note\">{translate('event.category', event.category)}:</span>{' '}\n      {event.description ? (\n        <strong title={event.description}>{event.name}</strong>\n      ) : (\n        <strong>{event.name}</strong>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy } from 'lodash';\nimport Event from './Event';\nimport DateTooltipFormatter from '../../../components/intl/DateTooltipFormatter';\nimport { Analysis as IAnalysis, Event as IEvent } from '../../../api/projectActivity';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  analysis: IAnalysis;\n  qualifier: string;\n}\n\nexport default function Analysis({ analysis, ...props }: Props) {\n  const sortedEvents: Array<IEvent> = sortBy(\n    analysis.events,\n    // versions first\n    (event: IEvent) => (event.category === 'VERSION' ? 0 : 1),\n    // then the rest sorted by category\n    'category'\n  );\n\n  // use `TRK` for all components but applications\n  const qualifier = props.qualifier === 'APP' ? 'APP' : 'TRK';\n\n  return (\n    <li className=\"overview-analysis\">\n      <div className=\"small little-spacer-bottom\">\n        <strong>\n          <DateTooltipFormatter date={analysis.date} />\n        </strong>\n      </div>\n\n      {sortedEvents.length > 0 ? (\n        <div className=\"overview-activity-events\">\n          {sortedEvents.map(event => <Event event={event} key={event.key} />)}\n        </div>\n      ) : (\n        <span className=\"note\">{translate('project_activity.analyzed', qualifier)}</span>\n      )}\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Analysis from './Analysis';\nimport { getProjectActivity, Analysis as IAnalysis } from '../../../api/projectActivity';\nimport PreviewGraph from '../../../components/preview-graph/PreviewGraph';\nimport { translate } from '../../../helpers/l10n';\nimport { Metric, Component, BranchLike } from '../../../app/types';\nimport { History } from '../../../api/time-machine';\nimport { getBranchLikeQuery, isSameBranchLike } from '../../../helpers/branches';\nimport { getActivityUrl } from '../../../helpers/urls';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: Component;\n  history?: History;\n  metrics: { [key: string]: Metric };\n  qualifier: string;\n}\n\ninterface State {\n  analyses: IAnalysis[];\n  loading: boolean;\n}\n\nconst PAGE_SIZE = 3;\n\nexport default class AnalysesList extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { analyses: [], loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component.key !== this.props.component.key ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getTopLevelComponent = () => {\n    const { component } = this.props;\n    let current = component.breadcrumbs.length - 1;\n    while (\n      current > 0 &&\n      !['TRK', 'VW', 'APP'].includes(component.breadcrumbs[current].qualifier)\n    ) {\n      current--;\n    }\n    return component.breadcrumbs[current].key;\n  };\n\n  fetchData = () => {\n    this.setState({ loading: true });\n\n    getProjectActivity({\n      ...getBranchLikeQuery(this.props.branchLike),\n      project: this.getTopLevelComponent(),\n      ps: PAGE_SIZE\n    }).then(\n      ({ analyses }) => {\n        if (this.mounted) {\n          this.setState({ analyses, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderList(analyses: IAnalysis[]) {\n    if (!analyses.length) {\n      return <p className=\"spacer-top note\">{translate('no_results')}</p>;\n    }\n\n    return (\n      <ul className=\"spacer-top\">\n        {analyses.map(analysis => (\n          <Analysis analysis={analysis} key={analysis.key} qualifier={this.props.qualifier} />\n        ))}\n      </ul>\n    );\n  }\n\n  render() {\n    const { analyses, loading } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    return (\n      <div className=\"overview-meta-card\">\n        <h4 className=\"overview-meta-header\">\n          {translate('overview.project_activity', this.props.component.qualifier)}\n        </h4>\n\n        <PreviewGraph\n          branchLike={this.props.branchLike}\n          history={this.props.history}\n          metrics={this.props.metrics}\n          project={this.props.component.key}\n        />\n\n        {this.renderList(analyses)}\n\n        <div className=\"spacer-top small\">\n          <Link to={getActivityUrl(this.props.component.key, this.props.branchLike)}>\n            {translate('show_more')}\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport MetaKey from './MetaKey';\nimport MetaOrganizationKey from './MetaOrganizationKey';\nimport MetaLinks from './MetaLinks';\nimport MetaQualityGate from './MetaQualityGate';\nimport MetaQualityProfiles from './MetaQualityProfiles';\nimport MetaSize from './MetaSize';\nimport MetaTags from './MetaTags';\nimport BadgesModal from '../badges/BadgesModal';\nimport AnalysesList from '../events/AnalysesList';\nimport { Visibility, Component, Metric, BranchLike } from '../../../app/types';\nimport { History } from '../../../api/time-machine';\nimport { translate } from '../../../helpers/l10n';\nimport { MeasureEnhanced } from '../../../helpers/measures';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: Component;\n  history?: History;\n  measures: MeasureEnhanced[];\n  metrics: { [key: string]: Metric };\n  onComponentChange: (changes: {}) => void;\n}\n\nexport default class Meta extends React.PureComponent<Props> {\n  static contextTypes = {\n    organizationsEnabled: PropTypes.bool\n  };\n\n  render() {\n    const { organizationsEnabled } = this.context;\n    const { branchLike, component, metrics } = this.props;\n    const { qualifier, description, qualityProfiles, qualityGate, visibility } = component;\n\n    const isProject = qualifier === 'TRK';\n    const isApp = qualifier === 'APP';\n    const isPrivate = visibility === Visibility.Private;\n\n    return (\n      <div className=\"overview-meta\">\n        <div className=\"overview-meta-card\">\n          <h4 className=\"overview-meta-header\">\n            {translate('overview.about_this_project', qualifier)}\n          </h4>\n          {description !== undefined && <p className=\"overview-meta-description\">{description}</p>}\n          {isProject && (\n            <MetaTags component={component} onComponentChange={this.props.onComponentChange} />\n          )}\n          <MetaSize branchLike={branchLike} component={component} measures={this.props.measures} />\n        </div>\n\n        <AnalysesList\n          branchLike={branchLike}\n          component={component}\n          history={this.props.history}\n          metrics={metrics}\n          qualifier={component.qualifier}\n        />\n\n        {isProject && (\n          <div className=\"overview-meta-card\">\n            {qualityGate && (\n              <MetaQualityGate\n                organization={organizationsEnabled ? component.organization : undefined}\n                qualityGate={qualityGate}\n              />\n            )}\n\n            {qualityProfiles &&\n              qualityProfiles.length > 0 && (\n                <MetaQualityProfiles\n                  headerClassName={qualityGate ? 'big-spacer-top' : undefined}\n                  organization={organizationsEnabled ? component.organization : undefined}\n                  profiles={qualityProfiles}\n                />\n              )}\n          </div>\n        )}\n\n        {isProject && <MetaLinks component={component} />}\n\n        <div className=\"overview-meta-card\">\n          <MetaKey componentKey={component.key} qualifier={component.qualifier} />\n          {organizationsEnabled && <MetaOrganizationKey organization={component.organization} />}\n        </div>\n\n        {!isPrivate &&\n          (isProject || isApp) && (\n            <BadgesModal\n              branchLike={branchLike}\n              metrics={metrics}\n              project={component.key}\n              qualifier={component.qualifier}\n            />\n          )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n//@flow\n\nexport const METRICS = [\n  // quality gate\n  'alert_status',\n  'quality_gate_details',\n\n  // bugs\n  'bugs',\n  'new_bugs',\n  'reliability_rating',\n  'new_reliability_rating',\n\n  // vulnerabilities\n  'vulnerabilities',\n  'new_vulnerabilities',\n  'security_rating',\n  'new_security_rating',\n\n  // code smells\n  'code_smells',\n  'new_code_smells',\n  'sqale_rating',\n  'new_maintainability_rating',\n  'sqale_index',\n  'new_technical_debt',\n\n  // coverage\n  'coverage',\n  'new_coverage',\n  'new_lines_to_cover',\n  'tests',\n\n  // duplications\n  'duplicated_lines_density',\n  'new_duplicated_lines_density',\n  'duplicated_blocks',\n\n  // size\n  'ncloc',\n  'ncloc_language_distribution',\n  'projects',\n  'new_lines'\n];\n\nexport const HISTORY_METRICS_LIST = [\n  'sqale_index',\n  'duplicated_lines_density',\n  'ncloc',\n  'coverage'\n];\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { uniq } from 'lodash';\nimport { connect } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport QualityGate from '../qualityGate/QualityGate';\nimport ApplicationQualityGate from '../qualityGate/ApplicationQualityGate';\nimport BugsAndVulnerabilities from '../main/BugsAndVulnerabilities';\nimport CodeSmells from '../main/CodeSmells';\nimport Coverage from '../main/Coverage';\nimport Duplications from '../main/Duplications';\nimport Meta from '../meta/Meta';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport { getMeasuresAndMeta } from '../../../api/measures';\nimport { getAllTimeMachineData, History } from '../../../api/time-machine';\nimport { parseDate } from '../../../helpers/dates';\nimport { enhanceMeasuresWithMetrics, MeasureEnhanced } from '../../../helpers/measures';\nimport { getLeakPeriod, Period } from '../../../helpers/periods';\nimport { get } from '../../../helpers/storage';\nimport { METRICS, HISTORY_METRICS_LIST } from '../utils';\nimport {\n  DEFAULT_GRAPH,\n  getDisplayedHistoryMetrics,\n  PROJECT_ACTIVITY_GRAPH,\n  PROJECT_ACTIVITY_GRAPH_CUSTOM\n} from '../../projectActivity/utils';\nimport { isSameBranchLike, getBranchLikeQuery } from '../../../helpers/branches';\nimport { fetchMetrics } from '../../../store/rootActions';\nimport { getMetrics } from '../../../store/rootReducer';\nimport { BranchLike, Component, Metric } from '../../../app/types';\nimport { translate } from '../../../helpers/l10n';\nimport { getPathUrlAsString, getProjectUrl } from '../../../helpers/urls';\nimport '../styles.css';\n\ninterface OwnProps {\n  branchLike?: BranchLike;\n  component: Component;\n  onComponentChange: (changes: {}) => void;\n}\n\ninterface StateToProps {\n  metrics: { [key: string]: Metric };\n}\n\ninterface DispatchToProps {\n  fetchMetrics: () => void;\n}\n\ntype Props = StateToProps & DispatchToProps & OwnProps;\n\ninterface State {\n  history?: History;\n  historyStartDate?: Date;\n  loading: boolean;\n  measures: MeasureEnhanced[];\n  periods?: Period[];\n}\n\nexport class OverviewApp extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchMetrics();\n    this.loadMeasures().then(this.loadHistory, () => {});\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      this.props.component.key !== prevProps.component.key ||\n      !isSameBranchLike(this.props.branchLike, prevProps.branchLike)\n    ) {\n      this.loadMeasures().then(this.loadHistory, () => {});\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadMeasures() {\n    const { branchLike, component } = this.props;\n    this.setState({ loading: true });\n\n    return getMeasuresAndMeta(component.key, METRICS, {\n      additionalFields: 'metrics,periods',\n      ...getBranchLikeQuery(branchLike)\n    }).then(\n      r => {\n        if (this.mounted && r.metrics) {\n          this.setState({\n            loading: false,\n            measures: enhanceMeasuresWithMetrics(r.component.measures, r.metrics),\n            periods: r.periods\n          });\n        }\n      },\n      error => {\n        throwGlobalError(error);\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  loadHistory = () => {\n    const { branchLike, component } = this.props;\n\n    const customGraphs = get(PROJECT_ACTIVITY_GRAPH_CUSTOM);\n    let graphMetrics = getDisplayedHistoryMetrics(\n      get(PROJECT_ACTIVITY_GRAPH) || 'issues',\n      customGraphs ? customGraphs.split(',') : []\n    );\n    if (!graphMetrics || graphMetrics.length <= 0) {\n      graphMetrics = getDisplayedHistoryMetrics(DEFAULT_GRAPH, []);\n    }\n\n    const metrics = uniq(HISTORY_METRICS_LIST.concat(graphMetrics));\n    return getAllTimeMachineData({\n      ...getBranchLikeQuery(branchLike),\n      component: component.key,\n      metrics: metrics.join()\n    }).then(r => {\n      if (this.mounted) {\n        const history: History = {};\n        r.measures.forEach(measure => {\n          const measureHistory = measure.history.map(analysis => ({\n            date: parseDate(analysis.date),\n            value: analysis.value\n          }));\n          history[measure.metric] = measureHistory;\n        });\n        const historyStartDate = history[HISTORY_METRICS_LIST[0]][0].date;\n        this.setState({ history, historyStartDate });\n      }\n    });\n  };\n\n  getApplicationLeakPeriod = () =>\n    this.state.measures.find(measure => measure.metric.key === 'new_bugs')\n      ? { index: 1 }\n      : undefined;\n\n  isEmpty = () =>\n    this.state.measures === undefined ||\n    this.state.measures.find(measure => measure.metric.key === 'ncloc') === undefined;\n\n  renderLoading() {\n    return (\n      <div className=\"text-center\">\n        <i className=\"spinner spinner-margin\" />\n      </div>\n    );\n  }\n\n  renderEmpty() {\n    const { component } = this.props;\n    const isApp = component.qualifier === 'APP';\n    return (\n      <div className=\"overview-main page-main\">\n        <h3>\n          {!this.state.measures ||\n          !this.state.measures.find(measure => measure.metric.key === 'projects')\n            ? translate(isApp ? 'portfolio.app.empty' : 'overview.project.empty')\n            : translate(\n                isApp ? 'portfolio.app.no_lines_of_code' : 'overview.project.no_lines_of_code'\n              )}\n        </h3>\n      </div>\n    );\n  }\n\n  renderMain() {\n    const { branchLike, component } = this.props;\n    const { periods, measures, history, historyStartDate } = this.state;\n    const leakPeriod =\n      component.qualifier === 'APP' ? this.getApplicationLeakPeriod() : getLeakPeriod(periods);\n    const domainProps = {\n      branchLike,\n      component,\n      measures,\n      leakPeriod,\n      history,\n      historyStartDate\n    };\n\n    if (this.isEmpty()) {\n      return this.renderEmpty();\n    }\n\n    return (\n      <div className=\"overview-main page-main\">\n        {component.qualifier === 'APP' ? (\n          <ApplicationQualityGate component={component} />\n        ) : (\n          <QualityGate branchLike={branchLike} component={component} measures={measures} />\n        )}\n\n        <div className=\"overview-domains-list\">\n          <BugsAndVulnerabilities {...domainProps} />\n          <CodeSmells {...domainProps} />\n          <Coverage {...domainProps} />\n          <Duplications {...domainProps} />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { branchLike, component } = this.props;\n    const { loading, measures, history } = this.state;\n\n    if (loading) {\n      return this.renderLoading();\n    }\n\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"overview page-with-sidebar\">\n          <Suggestions suggestions=\"overview\" />\n          <Helmet>\n            <link href={getPathUrlAsString(getProjectUrl(component.key))} rel=\"canonical\" />\n          </Helmet>\n\n          {this.renderMain()}\n\n          <div className=\"overview-sidebar page-sidebar-fixed\">\n            <Meta\n              branchLike={branchLike}\n              component={component}\n              history={history}\n              measures={measures}\n              metrics={this.props.metrics}\n              onComponentChange={this.props.onComponentChange}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps: DispatchToProps = { fetchMetrics };\n\nconst mapStateToProps = (state: any): StateToProps => ({\n  metrics: getMetrics(state)\n});\n\nexport default connect<StateToProps, DispatchToProps, OwnProps>(\n  mapStateToProps,\n  mapDispatchToProps\n)(OverviewApp);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { FormattedMessage } from 'react-intl';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  hasBranches?: boolean;\n  showWarning?: boolean;\n}\n\nexport default function EmptyOverview({ component, hasBranches, showWarning }: Props) {\n  const rawMessage = translate('provisioning.no_analysis.delete');\n  const head = rawMessage.substr(0, rawMessage.indexOf('{0}'));\n  const tail = rawMessage.substr(rawMessage.indexOf('{0}') + 3);\n\n  return (\n    <div className=\"page page-limited\">\n      {showWarning && (\n        <div className=\"big-spacer-bottom\">\n          <div className=\"alert alert-warning\">\n            {hasBranches ? (\n              <FormattedMessage\n                defaultMessage={translate('provisioning.no_analysis_on_main_branch')}\n                id=\"provisioning.no_analysis_on_main_branch\"\n                values={{\n                  branch: (\n                    <div className=\"outline-badge text-baseline little-spacer-right\">\n                      {translate('branches.main_branch')}\n                    </div>\n                  )\n                }}\n              />\n            ) : (\n              translate('provisioning.no_analysis')\n            )}\n          </div>\n\n          {!hasBranches && (\n            <div className=\"big-spacer-top\">\n              {head}\n              <Link\n                className=\"text-danger\"\n                to={{ pathname: '/project/deletion', query: { id: component } }}>\n                {translate('provisioning.no_analysis.delete_project')}\n              </Link>\n              {tail}\n            </div>\n          )}\n        </div>\n      )}\n\n      <div>\n        <h4>{translate('key')}</h4>\n        <code>{component}</code>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport OverviewApp from './OverviewApp';\nimport EmptyOverview from './EmptyOverview';\nimport { Component, BranchLike } from '../../../app/types';\nimport { isShortLivingBranch } from '../../../helpers/branches';\nimport { getShortLivingBranchUrl, getCodeUrl } from '../../../helpers/urls';\n\ninterface Props {\n  branchLike?: BranchLike;\n  branchLikes: BranchLike[];\n  component: Component;\n  isInProgress?: boolean;\n  isPending?: boolean;\n  onComponentChange: (changes: Partial<Component>) => void;\n}\n\nexport default class App extends React.PureComponent<Props> {\n  static contextTypes = {\n    router: PropTypes.object\n  };\n\n  componentDidMount() {\n    const { branchLike, component } = this.props;\n\n    if (this.isPortfolio()) {\n      this.context.router.replace({\n        pathname: '/portfolio',\n        query: { id: component.key }\n      });\n    } else if (this.isFile()) {\n      this.context.router.replace(\n        getCodeUrl(component.breadcrumbs[0].key, branchLike, component.key)\n      );\n    } else if (isShortLivingBranch(branchLike)) {\n      this.context.router.replace(getShortLivingBranchUrl(component.key, branchLike.name));\n    }\n  }\n\n  isPortfolio = () => ['VW', 'SVW'].includes(this.props.component.qualifier);\n\n  isFile = () => ['FIL', 'UTS'].includes(this.props.component.qualifier);\n\n  render() {\n    const { branchLike, branchLikes, component } = this.props;\n\n    if (this.isPortfolio() || this.isFile() || isShortLivingBranch(branchLike)) {\n      return null;\n    }\n\n    if (!component.analysisDate) {\n      return (\n        <EmptyOverview\n          component={component.key}\n          hasBranches={branchLikes.length > 1}\n          showWarning={!this.props.isPending && !this.props.isInProgress}\n        />\n      );\n    }\n\n    return (\n      <OverviewApp\n        branchLike={branchLike}\n        component={component}\n        onComponentChange={this.props.onComponentChange}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default class Suggestions extends React.PureComponent<Props> {\n  context!: { suggestions: SuggestionsContext };\n\n  static contextTypes = {\n    suggestions: PropTypes.object.isRequired\n  };\n\n  componentDidMount() {\n    this.context.suggestions.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.context.suggestions.removeSuggestions(this.props.suggestions);\n      this.context.suggestions.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.context.suggestions.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from '../controls/HelpTooltip';\nimport { lazyLoad } from '../lazyLoad';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  /** Key of the documentation chunk */\n  doc: string;\n}\n\ninterface State {\n  content?: string;\n  loading: boolean;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false, open: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.doc !== this.props.doc) {\n      this.setState({ content: undefined, loading: false, open: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  fetchContent = () => {\n    this.setState({ loading: true });\n    import(`Docs/tooltips/${this.props.doc}.md`).then(\n      ({ default: content }) => {\n        if (this.mounted) {\n          this.setState({ content, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  close = () => {\n    this.setState({ open: false });\n  };\n\n  renderOverlay() {\n    return (\n      <div className=\"abs-width-300\">\n        {this.state.loading ? (\n          <i className=\"spinner\" />\n        ) : (\n          <DocMarkdownBlock className=\"cut-margins\" content={this.state.content} isTooltip={true} />\n        )}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <HelpTooltip\n        className={this.props.className}\n        onShow={this.fetchContent}\n        overlay={this.renderOverlay()}>\n        {this.props.children}\n      </HelpTooltip>\n    );\n  }\n}\n","var map = {\n\t\"./branches/no-branch-support.md\": [\n\t\t947,\n\t\t358\n\t],\n\t\"./branches/single-branch.md\": [\n\t\t946,\n\t\t357\n\t],\n\t\"./editions/datacenter.md\": [\n\t\t945,\n\t\t356\n\t],\n\t\"./editions/developer.md\": [\n\t\t944,\n\t\t355\n\t],\n\t\"./editions/enterprise.md\": [\n\t\t943,\n\t\t354\n\t],\n\t\"./organizations/add-organization-member.md\": [\n\t\t942,\n\t\t353\n\t],\n\t\"./organizations/organization.md\": [\n\t\t941,\n\t\t352\n\t],\n\t\"./quality-gates/built-in-quality-gate.md\": [\n\t\t940,\n\t\t351\n\t],\n\t\"./quality-gates/default-quality-gate.md\": [\n\t\t939,\n\t\t350\n\t],\n\t\"./quality-gates/project-homepage-quality-gate.md\": [\n\t\t938,\n\t\t349\n\t],\n\t\"./quality-gates/quality-gate-conditions.md\": [\n\t\t937,\n\t\t348\n\t],\n\t\"./quality-gates/quality-gate-projects.md\": [\n\t\t936,\n\t\t347\n\t],\n\t\"./quality-gates/quality-gate.md\": [\n\t\t935,\n\t\t346\n\t],\n\t\"./quality-profiles/built-in-quality-profile.md\": [\n\t\t934,\n\t\t345\n\t],\n\t\"./quality-profiles/default-quality-profile.md\": [\n\t\t933,\n\t\t344\n\t],\n\t\"./quality-profiles/quality-profile-projects.md\": [\n\t\t932,\n\t\t343\n\t],\n\t\"./rules/custom-rule-removal.md\": [\n\t\t931,\n\t\t342\n\t],\n\t\"./rules/custom-rules.md\": [\n\t\t930,\n\t\t341\n\t],\n\t\"./rules/rule-templates.md\": [\n\t\t929,\n\t\t340\n\t],\n\t\"./rules/rules-quality-profiles.md\": [\n\t\t928,\n\t\t339\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\tvar module = __webpack_require__(ids[0]);\n\t\treturn (typeof module === \"object\" && module && module.__esModule ? module : Object.assign({/* fake namespace object */}, typeof module === \"object\" && module, { \"default\": module }));\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 903;\nmodule.exports = webpackAsyncContext;","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BugIcon from '../icons-components/BugIcon';\nimport VulnerabilityIcon from '../icons-components/VulnerabilityIcon';\nimport CodeSmellIcon from '../icons-components/CodeSmellIcon';\n\ninterface Props {\n  className?: string;\n  query: string;\n  size?: number;\n}\n\nexport default function IssueTypeIcon({ className, query, size }: Props) {\n  let icon;\n\n  switch (query.toLowerCase()) {\n    case 'bug':\n    case 'bugs':\n    case 'new_bugs':\n      icon = <BugIcon size={size} />;\n      break;\n    case 'vulnerability':\n    case 'vulnerabilities':\n    case 'new_vulnerabilities':\n      icon = <VulnerabilityIcon size={size} />;\n      break;\n    case 'code_smell':\n    case 'code_smells':\n    case 'new_code_smells':\n      icon = <CodeSmellIcon size={size} />;\n      break;\n  }\n\n  if (!icon) {\n    return null;\n  }\n\n  return className ? <span className={className}>{icon}</span> : icon;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function CodeSmellIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 2C4.7 2 2 4.7 2 8s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm-.5 5.5h.9v.9h-.9v-.9zm-3.8.2c-.1 0-.2-.1-.2-.2 0-.4.1-1.2.6-2S5.3 4.2 5.6 4c.2 0 .3 0 .3.1l1.3 2.3c0 .1 0 .2-.1.2-.1.2-.2.3-.3.5-.1.2-.2.4-.2.5 0 .1-.1.2-.2.2l-2.7-.1zM9.9 12c-.3.2-1.1.5-2 .5-.9 0-1.7-.3-2-.5-.1 0-.1-.2-.1-.3l1.3-2.3c0-.1.1-.1.2-.1.2.1.3.1.5.1s.4 0 .5-.1c.1 0 .2 0 .2.1l1.3 2.3c.2.2.2.3.1.3zm2.5-4.1L9.7 8c-.1 0-.2-.1-.2-.2 0-.2-.1-.4-.2-.5 0-.1-.2-.3-.3-.4-.1 0-.1-.1-.1-.2l1.3-2.3c.1-.1.2-.1.3-.1.3.2 1 .7 1.5 1.5s.6 1.6.6 2c0 0-.1.1-.2.1z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function VulnerabilityIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M10.8 5H6V3.9a2.28 2.28 0 0 1 2-2.5 2.22 2.22 0 0 1 1.8 1.2.48.48 0 0 0 .7.2.48.48 0 0 0 .2-.7A3 3 0 0 0 8 .4a3.34 3.34 0 0 0-3 3.5v1.2a2.16 2.16 0 0 0-2 2.1v4.4a2.22 2.22 0 0 0 2.2 2.2h5.6a2.22 2.22 0 0 0 2.2-2.2V7.2A2.22 2.22 0 0 0 10.8 5zm-2.2 5.5v1.2H7.4v-1.2a1.66 1.66 0 0 1-1.1-1.6A1.75 1.75 0 0 1 8 7.2a1.71 1.71 0 0 1 .6 3.3z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BugIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M11 9h1.3l.5.8.8-.5-.8-1.3H11v-.3l2-2.3V3h-1v2l-1 1.2V5c-.1-.8-.7-1.5-1.4-1.9L11 1.8l-.7-.7-1.8 1.6-1.8-1.6-.7.7 1.5 1.3C6.7 3.5 6.1 4.2 6 5v1.1L5 5V3H4v2.3l2 2.3V8H4.2l-.7 1.2.8.5.4-.7H6v.3l-2 1.9V14h1v-2.4l1-1C6 12 7.1 13 8.4 13h.8c.7 0 1.4-.3 1.8-.9.3-.4.3-.9.2-1.4l.9.9V14h1v-2.8l-2-1.9V9zm-2 2H8V6h1v5z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getRatingTooltip } from './utils';\nimport Rating from '../ui/Rating';\nimport Level from '../ui/Level';\nimport Tooltip from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span>{'–'}</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function TagsIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M4.303 5.36a.94.94 0 0 0-.944-.945.94.94 0 0 0-.944.944c0 .524.42.944.944.944a.94.94 0 0 0 .944-.944zm7.866 4.246a.95.95 0 0 1-.273.663l-3.62 3.627a.95.95 0 0 1-1.334 0L1.671 8.618C1.295 8.249 1 7.534 1 7.01V3.944A.95.95 0 0 1 1.944 3H5.01c.523 0 1.238.295 1.614.67l5.271 5.265a.98.98 0 0 1 .273.67zm2.831 0a.95.95 0 0 1-.273.663l-3.62 3.627a.98.98 0 0 1-.67.273c-.384 0-.575-.177-.826-.435l3.465-3.465a.95.95 0 0 0 0-1.334L7.805 3.67C7.429 3.295 6.714 3 6.19 3h1.651c.524 0 1.239.295 1.615.67l5.271 5.265a.98.98 0 0 1 .273.67z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { post, getJSON, postJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Rule, RuleDetails, RuleActivation } from '../app/types';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: { [rule: string]: RuleActivation[] };\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: RuleActivation[]; rule: RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    error => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (error && error.response && error.response.status === 409) {\n        return Promise.reject(error.response);\n      } else {\n        return throwGlobalError(error);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function DetachIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M12 9.25v2.5A2.25 2.25 0 0 1 9.75 14h-6.5A2.25 2.25 0 0 1 1 11.75v-6.5A2.25 2.25 0 0 1 3.25 3h5.5c.14 0 .25.11.25.25v.5c0 .14-.11.25-.25.25h-5.5C2.562 4 2 4.563 2 5.25v6.5c0 .688.563 1.25 1.25 1.25h6.5c.688 0 1.25-.563 1.25-1.25v-2.5c0-.14.11-.25.25-.25h.5c.14 0 .25.11.25.25zm3-6.75v4c0 .273-.227.5-.5.5a.497.497 0 0 1-.352-.148l-1.375-1.375L7.68 10.57a.27.27 0 0 1-.18.078.27.27 0 0 1-.18-.078l-.89-.89a.27.27 0 0 1-.078-.18.27.27 0 0 1 .078-.18l5.093-5.093-1.375-1.375A.497.497 0 0 1 10 2.5c0-.273.227-.5.5-.5h4c.273 0 .5.227.5.5z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport { chunk, flatMap, groupBy, isEqual, sortBy } from 'lodash';\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsDate,\n  parseAsString,\n  serializeStringArray,\n  serializeDate,\n  serializeString\n} from '../../helpers/query';\nimport { parseDate, startOfDay } from '../../helpers/dates';\nimport { getLocalizedMetricName, translate } from '../../helpers/l10n';\n/*:: import type { Analysis, MeasureHistory, Metric, Query } from './types'; */\n/*:: import type { RawQuery } from '../../helpers/query'; */\n/*:: import type { Serie } from '../../components/charts/AdvancedTimeline'; */\n\nexport const EVENT_TYPES = ['VERSION', 'QUALITY_GATE', 'QUALITY_PROFILE', 'OTHER'];\nexport const APPLICATION_EVENT_TYPES = ['QUALITY_GATE', 'OTHER'];\nexport const DEFAULT_GRAPH = 'issues';\nexport const GRAPH_TYPES = ['issues', 'coverage', 'duplications', 'custom'];\nexport const GRAPHS_METRICS_DISPLAYED = {\n  issues: ['bugs', 'code_smells', 'vulnerabilities'],\n  coverage: ['lines_to_cover', 'uncovered_lines'],\n  duplications: ['ncloc', 'duplicated_lines']\n};\nexport const GRAPHS_METRICS = {\n  issues: GRAPHS_METRICS_DISPLAYED['issues'].concat([\n    'reliability_rating',\n    'security_rating',\n    'sqale_rating'\n  ]),\n  coverage: GRAPHS_METRICS_DISPLAYED['coverage'].concat(['coverage']),\n  duplications: GRAPHS_METRICS_DISPLAYED['duplications'].concat(['duplicated_lines_density'])\n};\n\nexport const PROJECT_ACTIVITY_GRAPH = 'sonarqube.project_activity.graph';\nexport const PROJECT_ACTIVITY_GRAPH_CUSTOM = 'sonarqube.project_activity.graph.custom';\n\nexport const datesQueryChanged = (prevQuery /*: Query */, nextQuery /*: Query */) =>\n  !isEqual(prevQuery.from, nextQuery.from) || !isEqual(prevQuery.to, nextQuery.to);\n\nexport const activityQueryChanged = (prevQuery /*: Query */, nextQuery /*: Query */) =>\n  prevQuery.category !== nextQuery.category || datesQueryChanged(prevQuery, nextQuery);\n\nexport const customMetricsChanged = (prevQuery /*: Query */, nextQuery /*: Query */) =>\n  !isEqual(prevQuery.customMetrics, nextQuery.customMetrics);\n\nexport const hasDataValues = (serie /*: Serie */) =>\n  serie.data.some(point => point.y || point.y === 0);\n\nexport const hasHistoryData = (series /*: Array<Serie> */) =>\n  series.some(serie => serie.data && serie.data.length > 1);\n\nexport const hasHistoryDataValue = (series /*: Array<Serie> */) =>\n  series.some(serie => serie.data && serie.data.length > 1 && hasDataValues(serie));\n\nexport function historyQueryChanged(prevQuery /*: Query */, nextQuery /*: Query */) /*: boolean */ {\n  return prevQuery.graph !== nextQuery.graph;\n}\n\nexport const isCustomGraph = (graph /*: string */) => graph === 'custom';\n\nexport const selectedDateQueryChanged = (prevQuery /*: Query */, nextQuery /*: Query */) =>\n  !isEqual(prevQuery.selectedDate, nextQuery.selectedDate);\n\nexport const generateCoveredLinesMetric = (\n  uncoveredLines /*: MeasureHistory */,\n  measuresHistory /*: Array<MeasureHistory> */\n) => {\n  const linesToCover = measuresHistory.find(measure => measure.metric === 'lines_to_cover');\n  return {\n    data: linesToCover\n      ? uncoveredLines.history.map((analysis, idx) => ({\n          x: analysis.date,\n          y: Number(linesToCover.history[idx].value) - Number(analysis.value)\n        }))\n      : [],\n    name: 'covered_lines',\n    translatedName: translate('project_activity.custom_metric.covered_lines'),\n    type: 'INT'\n  };\n};\n\nfunction findMetric(key /*: string */, metrics /*:  Array<Metric> | { [string]: Metric } */) {\n  if (Array.isArray(metrics)) {\n    return metrics.find(metric => metric.key === key);\n  }\n  return metrics[key];\n}\n\nexport function generateSeries(\n  measuresHistory /*: Array<MeasureHistory> */,\n  graph /*: string */,\n  metrics /*:  Array<Metric> | { [string]: Metric } */,\n  displayedMetrics /*: Array<string> */\n) /*: Array<Serie> */ {\n  if (displayedMetrics.length <= 0 || typeof measuresHistory === 'undefined') {\n    return [];\n  }\n  return sortBy(\n    measuresHistory\n      .filter(measure => displayedMetrics.indexOf(measure.metric) >= 0)\n      .map(measure => {\n        if (measure.metric === 'uncovered_lines' && !isCustomGraph(graph)) {\n          return generateCoveredLinesMetric(measure, measuresHistory);\n        }\n        const metric = findMetric(measure.metric, metrics);\n        return {\n          data: measure.history.map(analysis => ({\n            x: analysis.date,\n            y: metric && metric.type === 'LEVEL' ? analysis.value : Number(analysis.value)\n          })),\n          name: measure.metric,\n          translatedName: metric ? getLocalizedMetricName(metric) : measure.metric,\n          type: metric ? metric.type : 'INT'\n        };\n      }),\n    serie =>\n      displayedMetrics.indexOf(serie.name === 'covered_lines' ? 'uncovered_lines' : serie.name)\n  );\n}\n\nexport const splitSeriesInGraphs = (\n  series /*: Array<Serie> */,\n  maxGraph /*: number */,\n  maxSeries /*: number */\n) =>\n  flatMap(groupBy(series, serie => serie.type), type => chunk(type, maxSeries)).slice(0, maxGraph);\n\nexport const getSeriesMetricType = (series /*: Array<Serie> */) =>\n  series.length > 0 ? series[0].type : 'INT';\n\nexport function getAnalysesByVersionByDay(analyses /*: Array<Analysis> */, query /*: Query */) {\n  return analyses.reduce((acc, analysis) => {\n    let currentVersion = acc[acc.length - 1];\n    const versionEvent = analysis.events.find(event => event.category === 'VERSION');\n    if (versionEvent) {\n      const newVersion = { version: versionEvent.name, key: versionEvent.key, byDay: {} };\n      if (!currentVersion || Object.keys(currentVersion.byDay).length > 0) {\n        acc.push(newVersion);\n      } else {\n        acc[acc.length - 1] = newVersion;\n      }\n      currentVersion = newVersion;\n    } else if (!currentVersion) {\n      // APPs don't have version events, so let's create a fake one\n      currentVersion = { version: null, key: null, byDay: {} };\n      acc.push(currentVersion);\n    }\n\n    const day = startOfDay(parseDate(analysis.date))\n      .getTime()\n      .toString();\n\n    let matchFilters = true;\n    if (query.category || query.from || query.to) {\n      const isAfterFrom = !query.from || analysis.date >= query.from;\n      const isBeforeTo = !query.to || analysis.date <= query.to;\n      const hasSelectedCategoryEvents =\n        !query.category || analysis.events.find(event => event.category === query.category) != null;\n      matchFilters = isAfterFrom && isBeforeTo && hasSelectedCategoryEvents;\n    }\n\n    if (matchFilters) {\n      if (!currentVersion.byDay[day]) {\n        currentVersion.byDay[day] = [];\n      }\n      currentVersion.byDay[day].push(analysis);\n    }\n    return acc;\n  }, []);\n}\n\nexport const getDisplayedHistoryMetrics = (\n  graph /*: string */,\n  customMetrics /*: Array<string> */\n) => (isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS_DISPLAYED[graph]);\n\nexport const getHistoryMetrics = (graph /*: string */, customMetrics /*: Array<string> */) =>\n  isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS[graph];\n\nconst parseGraph = (value /*: ?string */) => {\n  const graph = parseAsString(value);\n  return GRAPH_TYPES.includes(graph) ? graph : DEFAULT_GRAPH;\n};\n\nconst serializeGraph = (value /*: string */) => (value === DEFAULT_GRAPH ? undefined : value);\n\nexport function parseQuery(urlQuery /*: RawQuery */) /*: Query */ {\n  return {\n    category: parseAsString(urlQuery['category']),\n    customMetrics: parseAsArray(urlQuery['custom_metrics'], parseAsString),\n    from: parseAsDate(urlQuery['from']),\n    graph: parseGraph(urlQuery['graph']),\n    project: parseAsString(urlQuery['id']),\n    to: parseAsDate(urlQuery['to']),\n    selectedDate: parseAsDate(urlQuery['selected_date'])\n  };\n}\n\nexport function serializeQuery(query /*: Query */) /*: RawQuery */ {\n  return cleanQuery({\n    category: serializeString(query.category),\n    from: serializeDate(query.from),\n    project: serializeString(query.project),\n    to: serializeDate(query.to)\n  });\n}\n\nexport function serializeUrlQuery(query /*: Query */) /*: RawQuery */ {\n  return cleanQuery({\n    category: serializeString(query.category),\n    custom_metrics: serializeStringArray(query.customMetrics),\n    from: serializeDate(query.from),\n    graph: serializeGraph(query.graph),\n    id: serializeString(query.project),\n    to: serializeDate(query.to),\n    selected_date: serializeDate(query.selectedDate)\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Condition, Metric, QualityGate, Omit } from '../app/types';\n\nexport function fetchQualityGates(data: {\n  organization?: string;\n}): Promise<{\n  actions: { create: boolean };\n  qualitygates: QualityGate[];\n}> {\n  return getJSON('/api/qualitygates/list', data).catch(throwGlobalError);\n}\n\nexport function fetchQualityGate(data: {\n  id: number;\n  organization?: string;\n}): Promise<QualityGate> {\n  return getJSON('/api/qualitygates/show', data).catch(throwGlobalError);\n}\n\nexport function createQualityGate(data: {\n  name: string;\n  organization?: string;\n}): Promise<QualityGate> {\n  return postJSON('/api/qualitygates/create', data).catch(throwGlobalError);\n}\n\nexport function deleteQualityGate(data: {\n  id: number;\n  organization?: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/destroy', data).catch(throwGlobalError);\n}\n\nexport function renameQualityGate(data: {\n  id: number;\n  name: string;\n  organization?: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/rename', data).catch(throwGlobalError);\n}\n\nexport function copyQualityGate(data: {\n  id: number;\n  name: string;\n  organization?: string;\n}): Promise<QualityGate> {\n  return postJSON('/api/qualitygates/copy', data).catch(throwGlobalError);\n}\n\nexport function setQualityGateAsDefault(data: {\n  id: number;\n  organization?: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/set_as_default', data).catch(throwGlobalError);\n}\n\nexport function createCondition(\n  data: {\n    gateId: number;\n    organization?: string;\n  } & Omit<Condition, 'id'>\n): Promise<Condition> {\n  return postJSON('/api/qualitygates/create_condition', data);\n}\n\nexport function updateCondition(data: { organization?: string } & Condition): Promise<Condition> {\n  return postJSON('/api/qualitygates/update_condition', data);\n}\n\nexport function deleteCondition(data: { id: number; organization?: string }): Promise<void> {\n  return post('/api/qualitygates/delete_condition', data);\n}\n\nexport function getGateForProject(data: {\n  organization?: string;\n  project: string;\n}): Promise<QualityGate | undefined> {\n  return getJSON('/api/qualitygates/get_by_project', data).then(\n    ({ qualityGate }) =>\n      qualityGate && {\n        ...qualityGate,\n        isDefault: qualityGate.default\n      },\n    throwGlobalError\n  );\n}\n\nexport function searchGates(data: {\n  gateId: number;\n  organization?: string;\n  page?: number;\n  pageSize?: number;\n  query?: string;\n  selected?: string;\n}): Promise<{ more: boolean; results: Array<{ id: string; name: string; selected: boolean }> }> {\n  return getJSON('/api/qualitygates/search', data).catch(throwGlobalError);\n}\n\nexport function associateGateWithProject(data: {\n  gateId: number;\n  organization?: string;\n  projectKey?: string;\n  projectId?: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/select', data).catch(throwGlobalError);\n}\n\nexport function dissociateGateWithProject(data: {\n  gateId: number;\n  organization?: string;\n  projectKey?: string;\n  projectId?: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/deselect', data).catch(throwGlobalError);\n}\n\nexport interface ConditionAnalysis {\n  comparator: string;\n  errorThreshold?: string;\n  metric: string;\n  periodIndex?: number;\n  onLeak?: boolean;\n  status: string;\n  value: string;\n  warningThreshold?: string;\n}\n\nexport interface ApplicationProject {\n  key: string;\n  name: string;\n  status: string;\n  conditions: ConditionAnalysis[];\n}\n\nexport interface ApplicationQualityGate {\n  metrics: Metric[];\n  projects: ApplicationProject[];\n  status: string;\n}\n\nexport function getApplicationQualityGate(data: {\n  application: string;\n  organization?: string;\n}): Promise<ApplicationQualityGate> {\n  return getJSON('/api/qualitygates/application_status', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  getRatingTooltip as nextGetRatingTooltip,\n  isDiffMetric,\n  Measure,\n  MeasureEnhanced\n} from '../../helpers/measures';\nimport { Metric } from '../../app/types';\n\nconst KNOWN_RATINGS = ['sqale_rating', 'reliability_rating', 'security_rating'];\n\nexport function enhanceMeasure(\n  measure: Measure,\n  metrics: { [key: string]: Metric }\n): MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = measure.periods.find(period => period.index === 1);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport * as Clipboard from 'clipboard';\nimport Tooltip from './Tooltip';\nimport { Button } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  copyValue: string;\n}\n\ninterface State {\n  tooltipShown: boolean;\n}\n\nexport default class ClipboardButton extends React.PureComponent<Props, State> {\n  clipboard?: Clipboard;\n  copyButton?: HTMLElement | null;\n  mounted = false;\n  state: State = { tooltipShown: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.copyButton) {\n      this.clipboard = new Clipboard(this.copyButton);\n      this.clipboard.on('success', this.showTooltip);\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.clipboard) {\n      this.clipboard.destroy();\n    }\n    if (this.copyButton) {\n      this.clipboard = new Clipboard(this.copyButton);\n      this.clipboard.on('success', this.showTooltip);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.clipboard) {\n      this.clipboard.destroy();\n    }\n  }\n\n  showTooltip = () => {\n    if (this.mounted) {\n      this.setState({ tooltipShown: true });\n      setTimeout(() => {\n        if (this.mounted) {\n          this.setState({ tooltipShown: false });\n        }\n      }, 1000);\n    }\n  };\n\n  render() {\n    return (\n      <Tooltip overlay={translate('copied_action')} visible={this.state.tooltipShown}>\n        <Button\n          className={classNames('js-copy-to-clipboard no-select', this.props.className)}\n          data-clipboard-text={this.props.copyValue}\n          innerRef={node => (this.copyButton = node)}>\n          {translate('copy')}\n        </Button>\n      </Tooltip>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/lib/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport ClipboardButton from '../controls/ClipboardButton';\nimport './CodeSnippet.css';\n\ninterface Props {\n  className?: string;\n  isOneLine?: boolean;\n  noCopy?: boolean;\n  snippet: string | (string | undefined)[];\n}\n\n// keep this \"useless\" concatentation for the readability reason\n// eslint-disable-next-line no-useless-concat\nconst s = ' \\\\' + '\\n  ';\n\nexport default function CodeSnippet({ className, isOneLine, noCopy, snippet }: Props) {\n  const snippetArray = Array.isArray(snippet)\n    ? snippet.filter(line => line !== undefined)\n    : [snippet];\n  const finalSnippet = isOneLine ? snippetArray.join(' ') : snippetArray.join(s);\n  return (\n    <div className={classNames('code-snippet', { 'code-snippet-oneline': isOneLine }, className)}>\n      <pre>{finalSnippet}</pre>\n      {!noCopy && <ClipboardButton copyValue={finalSnippet} />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DropdownIcon from '../icons-components/DropdownIcon';\nimport TagsIcon from '../icons-components/TagsIcon';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span className={classNames('tags-list', className)} title={tags.join(', ')}>\n      <TagsIcon className=\"text-middle\" />\n      <span className=\"text-ellipsis text-middle\">{tags.join(', ')}</span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BubblesIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size} style={{ fillRule: 'nonzero' }}>\n      <path\n        d=\"M4.1 10.2c1 0 1.9.8 1.9 1.9S5.1 14 4.1 14s-1.9-.8-1.9-1.9.8-1.9 1.9-1.9m0-2C2 8.2.2 9.9.2 12.1S1.9 16 4.1 16 8 14.3 8 12.1 6.2 8.2 4.1 8.2zM10.3 2c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7-3.8-1.6-3.8-3.7S8.2 2 10.3 2m0-2C7.1 0 4.5 2.6 4.5 5.7s2.6 5.7 5.7 5.7S16 8.9 16 5.7 13.4 0 10.3 0z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (elem: string) => void;\n  onSelectChange: (elem: string, selected: boolean) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default class MultiSelectOption extends React.PureComponent<Props> {\n  handleSelect = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.currentTarget.blur();\n\n    if (!this.props.disabled) {\n      this.props.onSelectChange(this.props.element, !this.props.selected);\n    }\n  };\n\n  handleHover = () => this.props.onHover(this.props.element);\n\n  render() {\n    const { selected, disabled } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': selected,\n      'icon-checkbox-invisible': disabled\n    });\n    const activeClass = classNames({ active: this.props.active, disabled });\n\n    return (\n      <li>\n        <a\n          className={activeClass}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          <i className={className} /> {this.props.custom && '+ '}\n          {this.props.renderLabel(this.props.element)}\n        </a>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport MultiSelectOption from './MultiSelectOption';\nimport SearchBox from '../controls/SearchBox';\nimport { translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (item: string, selected: boolean) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement &&\n            selectedElements.length < 1 &&\n            unselectedElements.length < 1 && (\n              <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n            )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}